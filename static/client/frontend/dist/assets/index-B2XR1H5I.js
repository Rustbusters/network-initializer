(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const qn=!1;var _r=Array.isArray,gr=Array.from,Bn=Object.defineProperty,De=Object.getOwnPropertyDescriptor,Wr=Object.getOwnPropertyDescriptors,Vn=Object.prototype,Wn=Array.prototype,hr=Object.getPrototypeOf;function ht(e){return typeof e=="function"}const et=()=>{};function Hn(e){return e()}function nr(e){for(var t=0;t<e.length;t++)e[t]()}const fe=2,Hr=4,St=8,br=16,ve=32,st=64,ir=128,Ve=256,Rt=512,ie=1024,Le=2048,Tt=4096,ye=8192,ot=16384,Kn=32768,zt=65536,Yn=1<<17,$n=1<<19,Kr=1<<20,Oe=Symbol("$state"),Yr=Symbol("legacy props"),ar=Symbol("");function $r(e){return e===this.v}function Gr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function pr(e){return!Gr(e,this.v)}function Gn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Zn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ei(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ti(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ri(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ni(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let lt=!1;function ii(){lt=!0}const yr=1,mr=2,Jr=4,ai=8,si=16,oi=1,li=2,Xr=4,ui=8,ci=16,di=1,fi=2,ee=Symbol(),Zr="http://www.w3.org/2000/svg";function te(e,t){var r={f:0,v:e,reactions:null,equals:$r,version:0};return r}function H(e){return vi(te(e))}function xr(e,t=!1){var i;const r=te(e);return t||(r.equals=pr),lt&&F!==null&&F.l!==null&&((i=F.l).s??(i.s=[])).push(r),r}function vi(e){return z!==null&&z.f&fe&&(me===null?Ei([e]):me.push(e)),e}function w(e,t){return z!==null&&Bt()&&z.f&(fe|br)&&(me===null||!me.includes(e))&&ni(),sr(e,t)}function sr(e,t){return e.equals(t)||(e.v=t,e.version=bn(),Qr(e,Le),Bt()&&R!==null&&R.f&ie&&!(R.f&ve)&&(J!==null&&J.includes(e)?(ke(R,Le),Ht(R)):je===null?Ii([e]):je.push(e))),t}function Qr(e,t){var r=e.reactions;if(r!==null)for(var i=Bt(),n=r.length,a=0;a<n;a++){var s=r[a],o=s.f;o&Le||!i&&s===R||(ke(s,t),o&(ie|Ve)&&(o&fe?Qr(s,Tt):Ht(s)))}}let en=!1;function V(e,t=null,r){if(typeof e!="object"||e===null||Oe in e)return e;const i=hr(e);if(i!==Vn&&i!==Wn)return e;var n=new Map,a=_r(e),s=te(0);a&&n.set("length",te(e.length));var o;return new Proxy(e,{defineProperty(c,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ei();var d=n.get(l);return d===void 0?(d=te(u.value),n.set(l,d)):w(d,V(u.value,o)),!0},deleteProperty(c,l){var u=n.get(l);if(u===void 0)l in c&&n.set(l,te(ee));else{if(a&&typeof l=="string"){var d=n.get("length"),f=Number(l);Number.isInteger(f)&&f<d.v&&w(d,f)}w(u,ee),Rr(s)}return!0},get(c,l,u){var g;if(l===Oe)return e;var d=n.get(l),f=l in c;if(d===void 0&&(!f||(g=De(c,l))!=null&&g.writable)&&(d=te(V(f?c[l]:ee,o)),n.set(l,d)),d!==void 0){var v=_(d);return v===ee?void 0:v}return Reflect.get(c,l,u)},getOwnPropertyDescriptor(c,l){var u=Reflect.getOwnPropertyDescriptor(c,l);if(u&&"value"in u){var d=n.get(l);d&&(u.value=_(d))}else if(u===void 0){var f=n.get(l),v=f==null?void 0:f.v;if(f!==void 0&&v!==ee)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(c,l){var v;if(l===Oe)return!0;var u=n.get(l),d=u!==void 0&&u.v!==ee||Reflect.has(c,l);if(u!==void 0||R!==null&&(!d||(v=De(c,l))!=null&&v.writable)){u===void 0&&(u=te(d?V(c[l],o):ee),n.set(l,u));var f=_(u);if(f===ee)return!1}return d},set(c,l,u,d){var m;var f=n.get(l),v=l in c;if(a&&l==="length")for(var g=u;g<f.v;g+=1){var y=n.get(g+"");y!==void 0?w(y,ee):g in c&&(y=te(ee),n.set(g+"",y))}f===void 0?(!v||(m=De(c,l))!=null&&m.writable)&&(f=te(void 0),w(f,V(u,o)),n.set(l,f)):(v=f.v!==ee,w(f,V(u,o)));var P=Reflect.getOwnPropertyDescriptor(c,l);if(P!=null&&P.set&&P.set.call(d,u),!v){if(a&&typeof l=="string"){var I=n.get("length"),h=Number(l);Number.isInteger(h)&&h>=I.v&&w(I,h+1)}Rr(s)}return!0},ownKeys(c){_(s);var l=Reflect.ownKeys(c).filter(f=>{var v=n.get(f);return v===void 0||v.v!==ee});for(var[u,d]of n)d.v!==ee&&!(u in c)&&l.push(u);return l},setPrototypeOf(){ti()}})}function Rr(e,t=1){w(e,e.v+t)}var Dr,tn,rn;function _i(){if(Dr===void 0){Dr=window;var e=Element.prototype,t=Node.prototype;tn=De(t,"firstChild").get,rn=De(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Ut(e=""){return document.createTextNode(e)}function rt(e){return tn.call(e)}function Ft(e){return rn.call(e)}function b(e,t){return rt(e)}function Y(e,t){{var r=rt(e);return r instanceof Comment&&r.data===""?Ft(r):r}}function E(e,t=1,r=!1){let i=e;for(;t--;)i=Ft(i);return i}function gi(e){e.textContent=""}function Se(e){var t=fe|Le;R===null?t|=Ve:R.f|=Kr;var r=z!==null&&z.f&fe?z:null;const i={children:null,ctx:F,deps:null,equals:$r,f:t,fn:e,reactions:null,v:null,version:0,parent:r??R};return r!==null&&(r.children??(r.children=[])).push(i),i}function hi(e){const t=Se(e);return t.equals=pr,t}function nn(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var i=t[r];i.f&fe?wr(i):xe(i)}}}function bi(e){for(var t=e.parent;t!==null;){if(!(t.f&fe))return t;t=t.parent}return null}function an(e){var t,r=R;we(bi(e));try{nn(e),t=pn(e)}finally{we(r)}return t}function sn(e){var t=an(e),r=(qe||e.f&Ve)&&e.deps!==null?Tt:ie;ke(e,r),e.equals(t)||(e.v=t,e.version=bn())}function wr(e){nn(e),kt(e,0),ke(e,ot),e.v=e.children=e.deps=e.ctx=e.reactions=null}function on(e){R===null&&z===null&&Xn(),z!==null&&z.f&Ve&&Jn(),Sr&&Gn()}function pi(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function We(e,t,r,i=!0){var n=(e&st)!==0,a=R,s={ctx:F,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|Le,first:null,fn:t,last:null,next:null,parent:n?null:a,prev:null,teardown:null,transitions:null,version:0};if(r){var o=tt;try{Or(!0),Wt(s),s.f|=Kn}catch(u){throw xe(s),u}finally{Or(o)}}else t!==null&&Ht(s);var c=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Kr)===0;if(!c&&!n&&i&&(a!==null&&pi(s,a),z!==null&&z.f&fe)){var l=z;(l.children??(l.children=[])).push(s)}return s}function ln(e){const t=We(St,null,!1);return ke(t,ie),t.teardown=e,t}function Te(e){on();var t=R!==null&&(R.f&ve)!==0&&F!==null&&!F.m;if(t){var r=F;(r.e??(r.e=[])).push({fn:e,effect:R,reaction:z})}else{var i=kr(e);return i}}function yi(e){return on(),Er(e)}function mi(e){const t=We(st,e,!0);return()=>{xe(t)}}function xi(e){const t=We(st,e,!0);return(r={})=>new Promise(i=>{r.outro?xt(t,()=>{xe(t),i(void 0)}):(xe(t),i(void 0))})}function kr(e){return We(Hr,e,!1)}function Er(e){return We(St,e,!0)}function K(e){return Mt(e)}function Mt(e,t=0){return We(St|br|t,e,!0)}function nt(e,t=!0){return We(St|ve,e,!0,t)}function un(e){var t=e.teardown;if(t!==null){const r=Sr,i=z;jr(!0),ze(null);try{t.call(null)}finally{jr(r),ze(i)}}}function cn(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)wr(t[r])}}function dn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var i=r.next;xe(r,t),r=i}}function wi(e){for(var t=e.first;t!==null;){var r=t.next;t.f&ve||xe(t),t=r}}function xe(e,t=!0){var r=!1;if((t||e.f&$n)&&e.nodes_start!==null){for(var i=e.nodes_start,n=e.nodes_end;i!==null;){var a=i===n?null:Ft(i);i.remove(),i=a}r=!0}dn(e,t&&!r),cn(e),kt(e,0),ke(e,ot);var s=e.transitions;if(s!==null)for(const c of s)c.stop();un(e);var o=e.parent;o!==null&&o.first!==null&&fn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function fn(e){var t=e.parent,r=e.prev,i=e.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=r))}function xt(e,t){var r=[];Ir(e,r,!0),vn(r,()=>{xe(e),t&&t()})}function vn(e,t){var r=e.length;if(r>0){var i=()=>--r||t();for(var n of e)n.out(i)}else t()}function Ir(e,t,r){if(!(e.f&ye)){if(e.f^=ye,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var i=e.first;i!==null;){var n=i.next,a=(i.f&zt)!==0||(i.f&ve)!==0;Ir(i,t,a?r:!1),i=n}}}function wt(e){_n(e,!0)}function _n(e,t){if(e.f&ye){Ct(e)&&Wt(e),e.f^=ye;for(var r=e.first;r!==null;){var i=r.next,n=(r.f&zt)!==0||(r.f&ve)!==0;_n(r,n?t:!1),r=i}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let or=!1,lr=[];function ki(){or=!1;const e=lr.slice();lr=[],nr(e)}function qt(e){or||(or=!0,queueMicrotask(ki)),lr.push(e)}function gn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let At=!1,Dt=!1,Ot=null,tt=!1,Sr=!1;function Or(e){tt=e}function jr(e){Sr=e}let ur=[],pt=0;let z=null;function ze(e){z=e}let R=null;function we(e){R=e}let me=null;function Ei(e){me=e}let J=null,se=0,je=null;function Ii(e){je=e}let hn=1,qe=!1,F=null;function bn(){return++hn}function Bt(){return!lt||F!==null&&F.l===null}function Ct(e){var s,o;var t=e.f;if(t&Le)return!0;if(t&Tt){var r=e.deps,i=(t&Ve)!==0;if(r!==null){var n;if(t&Rt){for(n=0;n<r.length;n++)((s=r[n]).reactions??(s.reactions=[])).push(e);e.f^=Rt}for(n=0;n<r.length;n++){var a=r[n];if(Ct(a)&&sn(a),i&&R!==null&&!qe&&!((o=a==null?void 0:a.reactions)!=null&&o.includes(e))&&(a.reactions??(a.reactions=[])).push(e),a.version>e.version)return!0}}(!i||R!==null&&!qe)&&ke(e,ie)}return!1}function Si(e,t){for(var r=t;r!==null;){if(r.f&ir)try{r.fn(e);return}catch{r.f^=ir}r=r.parent}throw At=!1,e}function Ti(e){return(e.f&ot)===0&&(e.parent===null||(e.parent.f&ir)===0)}function Vt(e,t,r,i){if(At){if(r===null&&(At=!1),Ti(t))throw e;return}r!==null&&(At=!0);{Si(e,t);return}}function pn(e){var f;var t=J,r=se,i=je,n=z,a=qe,s=me,o=F,c=e.f;J=null,se=0,je=null,z=c&(ve|st)?null:e,qe=!tt&&(c&Ve)!==0,me=null,F=e.ctx;try{var l=(0,e.fn)(),u=e.deps;if(J!==null){var d;if(kt(e,se),u!==null&&se>0)for(u.length=se+J.length,d=0;d<J.length;d++)u[se+d]=J[d];else e.deps=u=J;if(!qe)for(d=se;d<u.length;d++)((f=u[d]).reactions??(f.reactions=[])).push(e)}else u!==null&&se<u.length&&(kt(e,se),u.length=se);return l}finally{J=t,se=r,je=i,z=n,qe=a,me=s,F=o}}function Ci(e,t){let r=t.reactions;if(r!==null){var i=r.indexOf(e);if(i!==-1){var n=r.length-1;n===0?r=t.reactions=null:(r[i]=r[n],r.pop())}}r===null&&t.f&fe&&(J===null||!J.includes(t))&&(ke(t,Tt),t.f&(Ve|Rt)||(t.f^=Rt),kt(t,0))}function kt(e,t){var r=e.deps;if(r!==null)for(var i=t;i<r.length;i++)Ci(e,r[i])}function Wt(e){var t=e.f;if(!(t&ot)){ke(e,ie);var r=R,i=F;R=e;try{t&br?wi(e):dn(e),cn(e),un(e);var n=pn(e);e.teardown=typeof n=="function"?n:null,e.version=hn}catch(a){Vt(a,e,r,i||e.ctx)}finally{R=r}}}function Ni(){if(pt>1e3){pt=0;try{Zn()}catch(e){if(Ot!==null)Vt(e,Ot,null);else throw e}}pt++}function Pi(e){var t=e.length;if(t!==0){Ni();var r=tt;tt=!0;try{for(var i=0;i<t;i++){var n=e[i];n.f&ie||(n.f^=ie);var a=[];yn(n,a),Ai(a)}}finally{tt=r}}}function Ai(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var i=e[r];if(!(i.f&(ot|ye)))try{Ct(i)&&(Wt(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?fn(i):i.fn=null))}catch(n){Vt(n,i,null,i.ctx)}}}function Ri(){if(Dt=!1,pt>1001)return;const e=ur;ur=[],Pi(e),Dt||(pt=0,Ot=null)}function Ht(e){Dt||(Dt=!0,queueMicrotask(Ri)),Ot=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(st|ve)){if(!(r&ie))return;t.f^=ie}}ur.push(t)}function yn(e,t){var r=e.first,i=[];e:for(;r!==null;){var n=r.f,a=(n&ve)!==0,s=a&&(n&ie)!==0,o=r.next;if(!s&&!(n&ye))if(n&St){if(a)r.f^=ie;else try{Ct(r)&&Wt(r)}catch(d){Vt(d,r,null,r.ctx)}var c=r.first;if(c!==null){r=c;continue}}else n&Hr&&i.push(r);if(o===null){let d=r.parent;for(;d!==null;){if(e===d)break e;var l=d.next;if(l!==null){r=l;continue e}d=d.parent}}r=o}for(var u=0;u<i.length;u++)c=i[u],t.push(c),yn(c,t)}function _(e){var u;var t=e.f,r=(t&fe)!==0;if(r&&t&ot){var i=an(e);return wr(e),i}if(z!==null){me!==null&&me.includes(e)&&ri();var n=z.deps;J===null&&n!==null&&n[se]===e?se++:J===null?J=[e]:J.push(e),je!==null&&R!==null&&R.f&ie&&!(R.f&ve)&&je.includes(e)&&(ke(R,Le),Ht(R))}else if(r&&e.deps===null)for(var a=e,s=a.parent,o=a;s!==null;)if(s.f&fe){var c=s;o=c,s=c.parent}else{var l=s;(u=l.deriveds)!=null&&u.includes(o)||(l.deriveds??(l.deriveds=[])).push(o);break}return r&&(a=e,Ct(a)&&sn(a)),e.v}function Ue(e){const t=z;try{return z=null,e()}finally{z=t}}const Di=~(Le|Tt|ie);function ke(e,t){e.f=e.f&Di|t}function cr(e,t=1){var r=_(e),i=t===1?r++:r--;return w(e,r),i}function _e(e,t=!1,r){F={p:F,c:null,e:null,m:!1,s:e,x:null,l:null},lt&&!t&&(F.l={s:null,u:null,r1:[],r2:te(!1)})}function ge(e){const t=F;if(t!==null){const s=t.e;if(s!==null){var r=R,i=z;t.e=null;try{for(var n=0;n<s.length;n++){var a=s[n];we(a.effect),ze(a.reaction),kr(a.fn)}}finally{we(r),ze(i)}}F=t.p,t.m=!0}return{}}function Oi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Oe in e)dr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Oe in r&&dr(r)}}}function dr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{dr(e[i],t)}catch{}const r=hr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=Wr(r);for(let n in i){const a=i[n].get;if(a)try{a.call(e)}catch{}}}}}function ji(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Li=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function zi(e){return Li.includes(e)}const Ui={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Fi(e){return e=e.toLowerCase(),Ui[e]??e}const Mi=["touchstart","touchmove"];function qi(e){return Mi.includes(e)}function Bi(e,t){if(t){const r=document.body;e.autofocus=!0,qt(()=>{document.activeElement===r&&e.focus()})}}let Lr=!1;function Vi(){Lr||(Lr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function mn(e){var t=z,r=R;ze(null),we(null);try{return e()}finally{ze(t),we(r)}}function Wi(e,t,r,i=r){e.addEventListener(t,()=>mn(r));const n=e.__on_r;n?e.__on_r=()=>{n(),i(!0)}:e.__on_r=()=>i(!0),Vi()}const xn=new Set,fr=new Set;function wn(e,t,r,i){function n(a){if(i.capture||bt.call(t,a),!a.cancelBubble)return mn(()=>r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?qt(()=>{t.addEventListener(e,n,i)}):t.addEventListener(e,n,i),n}function Je(e,t,r,i,n){var a={capture:i,passive:n},s=wn(e,t,r,a);(t===document.body||t===window||t===document)&&ln(()=>{t.removeEventListener(e,s,a)})}function Ee(e){for(var t=0;t<e.length;t++)xn.add(e[t]);for(var r of fr)r(e)}function bt(e){var h;var t=this,r=t.ownerDocument,i=e.type,n=((h=e.composedPath)==null?void 0:h.call(e))||[],a=n[0]||e.target,s=0,o=e.__root;if(o){var c=n.indexOf(o);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var l=n.indexOf(t);if(l===-1)return;c<=l&&(s=c)}if(a=n[s]||e.target,a!==t){Bn(e,"currentTarget",{configurable:!0,get(){return a||r}});var u=z,d=R;ze(null),we(null);try{for(var f,v=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+i];if(y!==void 0&&!a.disabled)if(_r(y)){var[P,...I]=y;P.apply(a,[e,...I])}else y.call(a,e)}catch(m){f?v.push(m):f=m}if(e.cancelBubble||g===t||g===null)break;a=g}if(f){for(let m of v)queueMicrotask(()=>{throw m});throw f}}finally{e.__root=t,delete e.currentTarget,ze(u),we(d)}}}function kn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Et(e,t){var r=R;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function j(e,t){var r=(t&di)!==0,i=(t&fi)!==0,n,a=!e.startsWith("<!>");return()=>{n===void 0&&(n=kn(a?e:"<!>"+e),r||(n=rt(n)));var s=i?document.importNode(n,!0):n.cloneNode(!0);if(r){var o=rt(s),c=s.lastChild;Et(o,c)}else Et(s,s);return s}}function Hi(e,t,r="svg"){var i=!e.startsWith("<!>"),n=`<${r}>${i?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var s=kn(n),o=rt(s);a=rt(o)}var c=a.cloneNode(!0);return Et(c,c),c}}function ae(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ut();return e.append(t,r),Et(t,r),e}function N(e,t){e!==null&&e.before(t)}function ne(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function Ki(e,t){return Yi(e,t)}const $e=new Map;function Yi(e,{target:t,anchor:r,props:i={},events:n,context:a,intro:s=!0}){_i();var o=new Set,c=d=>{for(var f=0;f<d.length;f++){var v=d[f];if(!o.has(v)){o.add(v);var g=qi(v);t.addEventListener(v,bt,{passive:g});var y=$e.get(v);y===void 0?(document.addEventListener(v,bt,{passive:g}),$e.set(v,1)):$e.set(v,y+1)}}};c(gr(xn)),fr.add(c);var l=void 0,u=xi(()=>{var d=r??t.appendChild(Ut());return nt(()=>{if(a){_e({});var f=F;f.c=a}n&&(i.$$events=n),l=e(d,i)||{},a&&ge()}),()=>{var g;for(var f of o){t.removeEventListener(f,bt);var v=$e.get(f);--v===0?(document.removeEventListener(f,bt),$e.delete(f)):$e.set(f,v)}fr.delete(c),d!==r&&((g=d.parentNode)==null||g.removeChild(d))}});return $i.set(l,u),l}let $i=new WeakMap;function M(e,t,r=!1){var i=e,n=null,a=null,s=ee,o=r?zt:0,c=!1;const l=(d,f=!0)=>{c=!0,u(f,d)},u=(d,f)=>{s!==(s=d)&&(s?(n?wt(n):f&&(n=nt(()=>f(i))),a&&xt(a,()=>{a=null})):(a?wt(a):f&&(a=nt(()=>f(i))),n&&xt(n,()=>{n=null})))};Mt(()=>{c=!1,t(l),c||u(null,null)},o)}function ut(e,t){return t}function Gi(e,t,r,i){for(var n=[],a=t.length,s=0;s<a;s++)Ir(t[s].e,n,!0);var o=a>0&&n.length===0&&r!==null;if(o){var c=r.parentNode;gi(c),c.append(r),i.clear(),Ae(e,t[0].prev,t[a-1].next)}vn(n,()=>{for(var l=0;l<a;l++){var u=t[l];o||(i.delete(u.k),Ae(e,u.prev,u.next)),xe(u.e,!o)}})}function ct(e,t,r,i,n,a=null){var s=e,o={flags:t,items:new Map,first:null},c=(t&Jr)!==0;if(c){var l=e;s=l.appendChild(Ut())}var u=null,d=!1;Mt(()=>{var f=r(),v=_r(f)?f:f==null?[]:gr(f),g=v.length;if(!(d&&g===0)){d=g===0;{var y=z;Ji(v,o,s,n,t,(y.f&ye)!==0,i)}a!==null&&(g===0?u?wt(u):u=nt(()=>a(s)):u!==null&&xt(u,()=>{u=null})),r()}})}function Ji(e,t,r,i,n,a,s,o){var q,k,S,B;var c=(n&ai)!==0,l=(n&(yr|mr))!==0,u=e.length,d=t.items,f=t.first,v=f,g,y=null,P,I=[],h=[],m,C,p,x;if(c)for(x=0;x<u;x+=1)m=e[x],C=s(m,x),p=d.get(C),p!==void 0&&((q=p.a)==null||q.measure(),(P??(P=new Set)).add(p));for(x=0;x<u;x+=1){if(m=e[x],C=s(m,x),p=d.get(C),p===void 0){var O=v?v.e.nodes_start:r;y=Zi(O,t,y,y===null?t.first:y.next,m,C,x,i,n),d.set(C,y),I=[],h=[],v=y.next;continue}if(l&&Xi(p,m,x,n),p.e.f&ye&&(wt(p.e),c&&((k=p.a)==null||k.unfix(),(P??(P=new Set)).delete(p))),p!==v){if(g!==void 0&&g.has(p)){if(I.length<h.length){var A=h[0],D;y=A.prev;var U=I[0],X=I[I.length-1];for(D=0;D<I.length;D+=1)zr(I[D],A,r);for(D=0;D<h.length;D+=1)g.delete(h[D]);Ae(t,U.prev,X.next),Ae(t,y,U),Ae(t,X,A),v=A,y=X,x-=1,I=[],h=[]}else g.delete(p),zr(p,v,r),Ae(t,p.prev,p.next),Ae(t,p,y===null?t.first:y.next),Ae(t,y,p),y=p;continue}for(I=[],h=[];v!==null&&v.k!==C;)(a||!(v.e.f&ye))&&(g??(g=new Set)).add(v),h.push(v),v=v.next;if(v===null)continue;p=v}I.push(p),y=p,v=p.next}if(v!==null||g!==void 0){for(var $=g===void 0?[]:gr(g);v!==null;)(a||!(v.e.f&ye))&&$.push(v),v=v.next;var Q=$.length;if(Q>0){var le=n&Jr&&u===0?r:null;if(c){for(x=0;x<Q;x+=1)(S=$[x].a)==null||S.measure();for(x=0;x<Q;x+=1)(B=$[x].a)==null||B.fix()}Gi(t,$,le,d)}}c&&qt(()=>{var pe;if(P!==void 0)for(p of P)(pe=p.a)==null||pe.apply()}),R.first=t.first&&t.first.e,R.last=y&&y.e}function Xi(e,t,r,i){i&yr&&sr(e.v,t),i&mr?sr(e.i,r):e.i=r}function Zi(e,t,r,i,n,a,s,o,c,l){var u=(c&yr)!==0,d=(c&si)===0,f=u?d?xr(n):te(n):n,v=c&mr?te(s):s,g={i:v,v:f,k:a,a:null,e:null,prev:r,next:i};try{return g.e=nt(()=>o(e,f,v),en),g.e.prev=r&&r.e,g.e.next=i&&i.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function zr(e,t,r){for(var i=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==i;){var s=Ft(a);n.before(a),a=s}}function Ae(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function ce(e,t,r,i,n){var o;var a=(o=t.$$slots)==null?void 0:o[r],s=!1;a===!0&&(a=t.children,s=!0),a===void 0||a(e,s?()=>i:i)}function Qi(e,t,r,i,n,a){var s,o,c=null,l=e,u;Mt(()=>{const d=t()||null;var f=Zr;d!==s&&(u&&(d===null?xt(u,()=>{u=null,o=null}):d===o?wt(u):xe(u)),d&&d!==o&&(u=nt(()=>{c=document.createElementNS(f,d),Et(c,c);{var v=c.appendChild(Ut());i(c,v)}R.nodes_end=c,l.before(c)})),s=d,s&&(o=s))},zt)}function ea(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Kt(e,t,r,i){var n=e.__attributes??(e.__attributes={});n[t]!==(n[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ar]=r),r==null?e.removeAttribute(t):typeof r!="string"&&En(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ur(e,t,r,i,n=!1,a=!1,s=!1){var o=t||{},c=e.tagName==="OPTION";for(var l in t)l in r||(r[l]=null);var u=En(e),d=e.__attributes??(e.__attributes={});for(const h in r){let m=r[h];if(c&&h==="value"&&m==null){e.value=e.__value="",o[h]=m;continue}var f=o[h];if(m!==f){o[h]=m;var v=h[0]+h[1];if(v!=="$$"){if(v==="on"){const C={},p="$$"+h;let x=h.slice(2);var g=zi(x);if(ji(x)&&(x=x.slice(0,-7),C.capture=!0),!g&&f){if(m!=null)continue;e.removeEventListener(x,o[p],C),o[p]=null}if(m!=null)if(g)e[`__${x}`]=m,Ee([x]);else{let O=function(A){o[h].call(this,A)};var I=O;o[p]=wn(x,e,O,C)}else g&&(e[`__${x}`]=void 0)}else if(h==="style"&&m!=null)e.style.cssText=m+"";else if(h==="autofocus")Bi(e,!!m);else if(h==="__value"||h==="value"&&m!=null)e.value=e[h]=e.__value=m;else if(h==="selected"&&c)ea(e,m);else{var y=h;n||(y=Fi(y));var P=y==="defaultValue"||y==="defaultChecked";if(m==null&&!a&&!P)if(d[h]=null,y==="value"||y==="checked"){let C=e;if(y==="value"){let p=C.defaultValue;C.removeAttribute(y),C.defaultValue=p}else{let p=C.defaultChecked;C.removeAttribute(y),C.defaultChecked=p}}else e.removeAttribute(h);else P||u.includes(y)&&(a||typeof m!="string")?e[y]=m:typeof m!="function"&&Kt(e,y,m)}h==="style"&&"__styles"in e&&(e.__styles={})}}}return o}var Fr=new Map;function En(e){var t=Fr.get(e.nodeName);if(t)return t;Fr.set(e.nodeName,t=[]);for(var r,i=e,n=Element.prototype;n!==i;){r=Wr(i);for(var a in r)r[a].set&&t.push(a);i=hr(i)}return t}function ta(e){if(e.loading==="lazy"){var t=e.src;e[ar]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[ar]!=="eager"&&(e.loading="lazy"),e.src=t})}}function G(e,t){var r=e.__className,i=ra(t);(r!==i||en)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function ra(e){return e??""}function In(e,t,r=t){var i=Bt();Wi(e,"input",n=>{var a=n?e.defaultValue:e.value;if(a=Xt(e)?Zt(a):a,r(a),i&&a!==(a=t())){var s=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(o,e.value.length))}}),Ue(t)==null&&e.value&&r(Xt(e)?Zt(e.value):e.value),Er(()=>{var n=t();Xt(e)&&n===Zt(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Xt(e){var t=e.type;return t==="number"||t==="range"}function Zt(e){return e===""?null:+e}function Mr(e,t){return e===t||(e==null?void 0:e[Oe])===t}function Xe(e={},t,r,i){return kr(()=>{var n,a;return Er(()=>{n=a,a=[],Ue(()=>{e!==r(...a)&&(t(e,...a),n&&Mr(r(...n),e)&&t(null,...n))})}),()=>{qt(()=>{a&&Mr(r(...a),e)&&t(null,...a)})}}),e}function na(e=!1){const t=F,r=t.l.u;if(!r)return;let i=()=>Oi(t.s);if(e){let n=0,a={};const s=Se(()=>{let o=!1;const c=t.s;for(const l in c)c[l]!==a[l]&&(a[l]=c[l],o=!0);return o&&n++,n});i=()=>_(s)}r.b.length&&yi(()=>{qr(t,i),nr(r.b)}),Te(()=>{const n=Ue(()=>r.m.map(Hn));return()=>{for(const a of n)typeof a=="function"&&a()}}),r.a.length&&Te(()=>{qr(t,i),nr(r.a)})}function qr(e,t){if(e.l.s)for(const r of e.l.s)_(r);t()}function Sn(e,t,r){if(e==null)return t(void 0),et;const i=Ue(()=>e.subscribe(t,r));return i.unsubscribe?()=>i.unsubscribe():i}let Pt=!1;function re(e,t,r){const i=r[t]??(r[t]={store:null,source:xr(void 0),unsubscribe:et});if(i.store!==e)if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=et;else{var n=!0;i.unsubscribe=Sn(e,a=>{n?i.source.v=a:w(i.source,a)}),n=!1}return _(i.source)}function Nt(){const e={};return ln(()=>{for(var t in e)e[t].unsubscribe()}),e}function ia(e){var t=Pt;try{return Pt=!1,[e(),Pt]}finally{Pt=t}}const aa={get(e,t){if(!e.exclude.includes(t))return _(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=ue({get[t](){return e.props[t]}},t,Xr)),e.special[t](r),cr(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),cr(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function oe(e,t){return new Proxy({props:e,exclude:t,special:{},version:te(0)},aa)}const sa={get(e,t){let r=e.props.length;for(;r--;){let i=e.props[r];if(ht(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,r){let i=e.props.length;for(;i--;){let n=e.props[i];ht(n)&&(n=n());const a=De(n,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let i=e.props[r];if(ht(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const n=De(i,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(e,t){if(t===Oe||t===Yr)return!1;for(let r of e.props)if(ht(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){ht(r)&&(r=r());for(const i in r)t.includes(i)||t.push(i)}return t}};function he(...e){return new Proxy({props:e},sa)}function Br(e){for(var t=R,r=R;t!==null&&!(t.f&(ve|st));)t=t.parent;try{return we(t),e()}finally{we(r)}}function ue(e,t,r,i){var O;var n=(r&oi)!==0,a=!lt||(r&li)!==0,s=(r&ui)!==0,o=(r&ci)!==0,c=!1,l;s?[l,c]=ia(()=>e[t]):l=e[t];var u=Oe in e||Yr in e,d=((O=De(e,t))==null?void 0:O.set)??(u&&s&&t in e?A=>e[t]=A:void 0),f=i,v=!0,g=!1,y=()=>(g=!0,v&&(v=!1,o?f=Ue(i):f=i),f);l===void 0&&i!==void 0&&(d&&a&&Qn(),l=y(),d&&d(l));var P;if(a)P=()=>{var A=e[t];return A===void 0?y():(v=!0,g=!1,A)};else{var I=Br(()=>(n?Se:hi)(()=>e[t]));I.f|=Yn,P=()=>{var A=_(I);return A!==void 0&&(f=void 0),A===void 0?f:A}}if(!(r&Xr))return P;if(d){var h=e.$$legacy;return function(A,D){return arguments.length>0?((!a||!D||h||c)&&d(D?P():A),A):P()}}var m=!1,C=!1,p=xr(l),x=Br(()=>Se(()=>{var A=P(),D=_(p);return m?(m=!1,C=!0,D):(C=!1,p.v=A)}));return n||(x.equals=pr),function(A,D){if(arguments.length>0){const U=D?_(x):a&&s?V(A):A;return x.equals(U)||(m=!0,w(p,U),g&&f!==void 0&&(f=U),Ue(()=>_(x))),A}return _(x)}}function dt(e){F===null&&gn(),lt&&F.l!==null?la(F).m.push(e):Te(()=>{const t=Ue(e);if(typeof t=="function")return t})}function oa(e){F===null&&gn(),dt(()=>()=>Ue(e))}function la(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ua="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ua);ii();/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var da=Hi("<svg><!><!></svg>");function be(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]),i=oe(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);_e(t,!1);let n=ue(t,"name",8,void 0),a=ue(t,"color",8,"currentColor"),s=ue(t,"size",8,24),o=ue(t,"strokeWidth",8,2),c=ue(t,"absoluteStrokeWidth",8,!1),l=ue(t,"iconNode",24,()=>[]);const u=(...y)=>y.filter((P,I,h)=>!!P&&h.indexOf(P)===I).join(" ");na();var d=da();let f;var v=b(d);ct(v,1,l,ut,(y,P)=>{let I=()=>_(P)[0],h=()=>_(P)[1];var m=ae(),C=Y(m);Qi(C,I,!0,(p,x)=>{let O;K(()=>O=Ur(p,O,{...h()},void 0,p.namespaceURI===Zr,p.nodeName.includes("-")))}),N(y,m)});var g=E(v);ce(g,t,"default",{}),K(()=>f=Ur(d,f,{...ca,...i,width:s(),height:s(),stroke:a(),"stroke-width":c()?Number(o())*24/Number(s()):o(),class:u("lucide-icon","lucide",n()?`lucide-${n()}`:"",r.class)},void 0,!0)),N(e,d),ge()}function Tn(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"circle-user-round"},()=>r,{iconNode:[["path",{d:"M18 20a6 6 0 0 0-12 0"}],["circle",{cx:"12",cy:"10",r:"4"}],["circle",{cx:"12",cy:"12",r:"10"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function fa(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function it(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function va(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"message-square"},()=>r,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function _a(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function ga(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"paperclip"},()=>r,{iconNode:[["path",{d:"M13.234 20.252 21 12.3"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function ha(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"send"},()=>r,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function ba(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"smile"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function pa(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function ya(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}function Tr(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,he({name:"x"},()=>r,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(n,a)=>{var s=ae(),o=Y(s);ce(o,t,"default",{}),N(n,s)},$$slots:{default:!0}}))}const Ge=[];function de(e,t=et){let r=null;const i=new Set;function n(o){if(Gr(e,o)&&(e=o,r)){const c=!Ge.length;for(const l of i)l[1](),Ge.push(l,e);if(c){for(let l=0;l<Ge.length;l+=2)Ge[l][0](Ge[l+1]);Ge.length=0}}}function a(o){n(o(e))}function s(o,c=et){const l=[o,c];return i.add(l),i.size===1&&(r=t(n,a)||et),o(e),()=>{i.delete(l),i.size===0&&r&&(r(),r=null)}}return{set:n,update:a,subscribe:s}}function Re(e){let t;return Sn(e,r=>t=r)(),t}const yt=de({});function It(e,t){return`${e}|${t}`}function ma(e){const[t,r]=e.split("|").map(Number);return{displayer:t,other:r}}const vr=de(new Set),at=de({}),Be=de(new Set),Ze=de({}),Qe=de(new Set),jt=de({}),Yt=de({}),mt=de({});function xa(e,t){Yt.update(r=>{const i=r[e]||{};return{...r,[e]:{...i,[t]:(i[t]||0)+1}}})}function wa(e,t){Yt.update(r=>{const i=r[e]||{},{[t]:n,...a}=i;return{...r,[e]:a}})}const Fe=de({});function ka(e){Fe.update(t=>({...t,[e]:{users:[],isLoading:!0,isRefreshing:!1}}))}function Ea(e,t){Fe.update(r=>({...r,[e]:{...r[e],users:t,isLoading:!1,isRefreshing:!1}}))}function Ia(e,t){Fe.update(r=>({...r,[e]:{...r[e],isRefreshing:t}}))}function Sa(e,t){return Re(Fe)[e].users.some(i=>i.id===t)}const Me=de({});function Ta(e){Me.update(t=>{const{[e]:r,...i}=t;return i})}async function Ca(e){const t=e.message;switch(t.response){case"RegistrationSuccess":Re(Be).has(e.client_id)&&(at.update(n=>({...n,[e.client_id]:e.server_id})),Be.update(n=>(n.delete(e.client_id),n)));break;case"RegistrationFailure":Be.update(n=>(n.delete(e.client_id),n)),jt.update(n=>{const{[e.client_id]:a,...s}=n;return s}),Me.update(n=>({...n,[e.client_id]:{message:t.reason,type:"error"}}));break;case"UnregisterSuccess":Re(Qe).has(e.client_id)&&(Ze.update(n=>({...n,[e.client_id]:!1})),at.update(n=>{const{[e.client_id]:a,...s}=n;return s}),Qe.update(n=>(n.delete(e.client_id),n)),jt.update(n=>{const{[e.client_id]:a,...s}=n;return s}),yt.update(n=>{const a={};for(const s in n){const{displayer:o}=ma(s);o!==e.client_id&&(a[s]=n[s])}return a}),Yt.update(n=>{const{[e.client_id]:a,...s}=n;return s}),mt.update(n=>{const{[e.client_id]:a,...s}=n;return s}));break;case"UnregisterFailure":Re(Qe).has(e.client_id)&&(console.warn(`Failed to unregister client ${e.client_id}`),Ze.update(n=>({...n,[e.client_id]:!1})),Qe.update(n=>(n.delete(e.client_id),n)),Me.update(n=>({...n,[e.client_id]:{message:t.reason,type:"error"}})));break;case"ActiveUsersList":let r=t.users.filter(n=>n.id!==e.client_id);Ea(e.client_id,r);break;case"NewUserRegistered":const i={id:t.id,name:t.name};Fe.update(n=>{var s;const a=((s=n[e.client_id])==null?void 0:s.users)??[];return{...n,[e.client_id]:{...n[e.client_id],users:[...a,i]}}}),Me.update(n=>({...n,[e.client_id]:{message:`${t.name} joined the server`,type:"success"}}));break;case"UserUnregistered":Fe.update(n=>{const a=n[e.client_id].users.find(o=>o.id===t.id),s=n[e.client_id].users.filter(o=>o.id!==t.id);return a&&Me.update(o=>({...o,[e.client_id]:{message:`${a.name} left the server`,type:"error"}})),{...n,[e.client_id]:{...n[e.client_id],users:s}}}),mt.update(n=>{if(n[e.client_id]===t.id){const{[e.client_id]:a,...s}=n;return s}return n});break;case"PrivateMessage":if(Sa(e.client_id,t.sender_id)){const n=It(e.client_id,t.sender_id);yt.update(s=>{const o=s[n]||[];return{...s,[n]:[...o,{content:t.message.content,timestamp:t.message.timestamp,sender_id:t.sender_id,receiver_id:e.client_id,server_id:e.server_id}]}}),Re(mt)[e.client_id]!==t.sender_id&&xa(e.client_id,t.sender_id)}break;case"UserNotFound":console.warn(`User ${t.user_id} not found`);break;case"SendingError":if(t.message.request==="SendPrivateMessage"){const n=t.message,a=It(n.message.sender_id,n.recipient_id);yt.update(s=>{const o=s[a];if(o)for(let c=o.length-1;c>=0;c--){const l=o[c];if(l.content.type===n.message.content.type&&l.content.data===n.message.content.data&&l.timestamp===n.message.timestamp&&l.sender_id===n.message.sender_id){l.status="failed";break}}return s})}Me.update(n=>({...n,[e.client_id]:{message:t.error,type:"error"}}));break}}let Pe=null,Lt=0;const Na=5,Cr=de(!1);function Cn(){return Pe&&Pe.close(),Pe=new WebSocket("ws://localhost:7374"),Pe.onopen=function(){console.log("WebSocket connection opened"),er(!0)},Pe.onclose=function(){console.log("WebSocket connection closed"),er(!1)},Pe.onerror=function(e){console.error("WebSocket error:",e),er(!1)},Pe.onmessage=function(e){try{const t=JSON.parse(e.data.toString());console.info(`[WS] ${t.message.response}`,t),Ca(t)}catch(t){console.warn("Error parsing WebSocket message:",t)}},Pe}function Qt(){if(Lt>=Na){console.log("Max reconnect attempts reached");return}Lt++,Cn()}function er(e){Cr.set(e),Lt=e?0:Lt}async function Vr(e,t,r,i){if(!r)return;const n=Re(at)[e],a=new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),o={content:{type:i,data:r},timestamp:a,sender_id:e,receiver_id:t,server_id:n,status:"sent"};try{if(!(await fetch("/api/send-to",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Network response was not ok");let l=It(e,t);return yt.update(u=>{const d=u[l]||[];return{...u,[l]:[...d,o]}}),!0}catch(c){return console.error("Error sending message:",c),!1}}const Pa=["image/jpeg","image/png","image/gif","image/webp"];async function tr(e){return new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=n=>r(n)})}function rr(e){return Pa.includes(e.type)}var Aa=(e,t)=>{e.stopPropagation(),w(t,!_(t))},Ra=(e,t,r)=>{e.stopPropagation(),t(_(r))},Da=j('<button class="emoji-option p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200"> </button>'),Oa=j('<div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-gray-400"><button class="emoji-button hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 bg-white dark:bg-gray-700 rounded-full p-1" aria-label="Insert emoji"><!></button> <div></div></div>');function ja(e,t){_e(t,!0);let r=H(!1),i;const n=["ðŸ˜‚","â¤ï¸","ðŸ˜","ðŸ¤£","ðŸ˜Š","ðŸ™","ðŸ¥°","ðŸ˜­","ðŸ˜˜","ðŸ‘","ðŸ¤”","ðŸ˜…","ðŸŽ‰","ðŸ‘","ðŸ¥³","ðŸ¤—","ðŸ˜Ž","ðŸ’”","ðŸ’•","ðŸ˜œ"],a=d=>{var f;(f=t.onEmojiSelect)==null||f.call(t,d)},s=d=>{i&&!i.contains(d.target)&&w(r,!1)};dt(()=>(document.addEventListener("click",s),()=>{document.removeEventListener("click",s)}));var o=Oa(),c=b(o);c.__click=[Aa,r];var l=b(c);ba(l,{class:"size-5"});var u=E(c,2);ct(u,21,()=>n,ut,(d,f)=>{var v=Da();v.__click=[Ra,a,f];var g=b(v);K(()=>ne(g,_(f))),N(d,v)}),Xe(u,d=>i=d,()=>i),K(()=>G(u,`emoji-dropdown ${(_(r)?"grid":"hidden")??""} select-none absolute bottom-full right-0 mb-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2 grid-cols-5 gap-2`)),N(e,o),ge()}Ee(["click"]);var La=j("<div> </div>"),za=(e,t)=>{var r;return(r=t.onImageClick)==null?void 0:r.call(t,t.message.content.data)},Ua=j('<div><img alt="Sent img" class="w-full h-auto rounded-xl object-cover cursor-pointer hover:opacity-90 transition-opacity" loading="lazy"></div>'),Fa=j('<div><div><!> <div><span class="text-xs text-gray-500 dark:text-gray-400"> </span> <!></div></div></div>');function Ma(e,t){_e(t,!0);var r=Fa(),i=b(r),n=b(i);{var a=f=>{var v=La(),g=b(v);K(()=>{G(v,`inline-block rounded-2xl px-4 py-2 ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 text-white rounded-br-none":"bg-blue-500 text-white rounded-br-none")??""} shadow-sm break-words whitespace-pre-wrap overflow-hidden svelte-sjx01p`),ne(g,t.message.content.data)}),N(f,v)},s=f=>{var v=ae(),g=Y(v);{var y=P=>{var I=Ua(),h=b(I);h.__click=[za,t],K(()=>{G(I,`p-1 rounded-xl ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 rounded-br-none":"bg-blue-500 rounded-br-none")??""} shadow-sm`),Kt(h,"src",t.message.content.data)}),Je("load",h,function(...m){var C;(C=t.onImageLoad)==null||C.apply(this,m)}),ta(h),N(P,I)};M(g,P=>{t.message.content.type==="Image"&&P(y)},!0)}N(f,v)};M(n,f=>{t.message.content.type==="Text"?f(a):f(s,!1)})}var o=E(n,2),c=b(o),l=b(c),u=E(c,2);{var d=f=>{ya(f,{class:"size-3 text-red-500"})};M(u,f=>{t.message.status==="failed"&&f(d)})}K(()=>{G(r,`flex ${(t.isReceived?"justify-start":"justify-end")??""} animate-fadeIn`),G(i,`flex flex-col ${(t.message.content.type==="Text"?"max-w-[70%]":"w-[60%]")??""} gap-0.5`),G(o,`flex items-center gap-1 px-1 ${(t.isReceived?"justify-start":"justify-end")??""}`),ne(l,t.message.timestamp)}),N(e,r),ge()}Ee(["click"]);var qa=j('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10"><div><span> </span> <button class="ml-2 p-1 hover:bg-black/20 rounded-full transition-colors" aria-label="Dismiss"><!></button></div></div>');function Nn(e,t){_e(t,!0);let r=ue(t,"type",3,"error"),i=ue(t,"duration",3,3e3);ue(t,"key",3,0);let n=H(!0),a;Te(()=>(w(n,!0),a&&clearTimeout(a),a=setTimeout(()=>{s()},i()),()=>{a&&clearTimeout(a)}));function s(){var u;w(n,!1),a&&clearTimeout(a),(u=t.onClose)==null||u.call(t)}var o=ae(),c=Y(o);{var l=u=>{var d=qa(),f=b(d),v=b(f),g=b(v),y=E(v,2);y.__click=s;var P=b(y);Tr(P,{class:"size-4"}),K(()=>{G(f,`px-4 py-2 rounded-lg shadow-lg ${(r()==="error"?"bg-red-500":"bg-green-500")??""} text-white flex items-center gap-2`),ne(g,t.message)}),N(u,d)};M(c,u=>{_(n)&&u(l)})}N(e,o),ge()}Ee(["click"]);function Ba(e,t,r){w(t,null),w(r,null)}function Va(e,t){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())}var Wa=j('<div class="absolute inset-5 backdrop-blur-sm bg-blue-100/70 dark:bg-blue-900/70 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center z-10 pointer-events-none"><p class="text-blue-600 dark:text-blue-400 font-medium">Release here to attach image</p></div>'),Ha=j('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),Ka=j('<button class="absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"><!></button>'),Ya=j('<div class="p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="relative inline-block"><img alt="Preview"> <!></div></div>'),$a=j('<div class="w-full h-[450px] flex flex-col"><div class="p-4 border-b border-gray-100 dark:border-gray-700"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"><!> </h3> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div></div> <div class="relative flex-1 overflow-hidden"><!> <div class="chat-box absolute inset-0 overflow-y-auto space-y-4 p-4 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"></div></div> <!> <div class="p-4 border-t border-gray-100 dark:border-gray-700"><div class="flex gap-2"><input type="file" accept="image/*" class="hidden"> <button class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors" title="Attach image"><!></button> <div class="relative flex-1"><input type="text" class="message-input w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" placeholder="Write a message..."> <!></div> <button class="send-button p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center"><!></button></div></div></div> <!>',1);function Ga(e,t){_e(t,!0);const r=Nt(),i=()=>re(Fe,"$clientUsers",r),n=()=>re(yt,"$messages",r);let a=H(void 0),s=H(""),o,c,l=!0,u=H(!1),d=H(""),f=H(0);const v=Se(()=>{var T;return((T=i()[t.clientId])==null?void 0:T.users.find(L=>L.id===t.destinationId))??{id:t.destinationId,name:`Client ${t.destinationId}`}}),g=()=>{o&&(o.scrollTop=o.scrollHeight)};function y(){setTimeout(g,60)}mi(()=>{o&&g()}),Te(()=>{n()[It(t.clientId,t.destinationId)]&&l&&setTimeout(g,60)}),Te(()=>{l=!0,t.destinationId,setTimeout(g,0)});const P=()=>{if(!o)return;l=Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=1};let I=H(null),h=H(null),m,C=H(!1);async function p(T){var Z;const L=T.target,W=(Z=L.files)==null?void 0:Z[0];W&&rr(W)&&(w(I,V(await tr(W))),w(h,V(_(I)))),L.value=""}async function x(T){var W;const L=(W=T.clipboardData)==null?void 0:W.items;if(L){for(const Z of L)if(Z.kind==="file"){const gt=Z.getAsFile();if(gt&&rr(gt)){T.preventDefault(),w(I,V(await tr(gt))),w(h,V(_(I)));return}}}}async function O(){if(!(!_(I)&&!_(s).trim()))try{_(I)&&(w(C,!0),await Vr(t.clientId,t.destinationId,_(I),"Image"),w(I,null),w(h,null),w(C,!1)),_(s).trim()&&(await Vr(t.clientId,t.destinationId,_(s),"Text"),w(s,""),_(a)&&(_(a).value="")),l=!0,setTimeout(()=>{g(),setTimeout(g,50)},60)}catch(T){w(C,!1),console.error(T),w(d,"Failed to send message. Please try again."),cr(f),w(u,!0)}}function A(T){var W;const L=((W=_(a))==null?void 0:W.selectionStart)??_(s).length;w(s,_(s).slice(0,L)+T+_(s).slice(L)),setTimeout(()=>{if(_(a)){const Z=L+T.length;_(a).setSelectionRange(Z,Z),_(a).focus()}},0)}let D=H(!1);function U(T){T.preventDefault(),T.stopPropagation(),w(D,!0)}function X(T){const L=o.getBoundingClientRect(),W=T.clientX,Z=T.clientY;(W<=L.left||W>=L.right||Z<=L.top||Z>=L.bottom)&&w(D,!1)}async function $(T){var W;T.preventDefault(),w(D,!1);const L=(W=T.dataTransfer)==null?void 0:W.files[0];L&&rr(L)&&(w(I,V(await tr(L))),w(h,V(_(I))))}var Q=$a(),le=Y(Q),q=b(le),k=b(q),S=b(k),B=b(S);Tn(B,{class:"size-5 text-gray-600 dark:text-gray-300"});var pe=E(B),Ce=E(S,2),ft=b(Ce),Ne=E(q,2),Ie=b(Ne);{var vt=T=>{var L=Wa();N(T,L)};M(Ie,T=>{_(D)&&T(vt)})}var He=E(Ie,2);ct(He,5,()=>n()[It(t.clientId,t.destinationId)]||[],ut,(T,L)=>{var W=Se(()=>_(L).sender_id!==t.clientId);Ma(T,{get message(){return _(L)},get isReceived(){return _(W)},get onImageClick(){return t.onImageClick},onImageLoad:y})}),Xe(He,T=>o=T,()=>o),Xe(Ne,T=>c=T,()=>c);var Nr=E(Ne,2);{var An=T=>{var L=Ya(),W=b(L),Z=b(W),gt=E(Z,2);{var Fn=Ke=>{var Ye=Ha(),Jt=b(Ye);it(Jt,{class:"size-8 text-blue-500 animate-spin"}),N(Ke,Ye)},Mn=Ke=>{var Ye=Ka();Ye.__click=[Ba,I,h];var Jt=b(Ye);Tr(Jt,{class:"size-4"}),N(Ke,Ye)};M(gt,Ke=>{_(C)?Ke(Fn):Ke(Mn,!1)})}K(()=>{Kt(Z,"src",_(h)),G(Z,`max-h-48 rounded-lg ${(_(C)?"opacity-50":"")??""}`)}),N(T,L)};M(Nr,T=>{_(h)&&T(An)})}var Rn=E(Nr,2),Dn=b(Rn),$t=b(Dn);$t.__change=p,Xe($t,T=>m=T,()=>m);var Gt=E($t,2);Gt.__click=()=>m.click();var On=b(Gt);ga(On,{class:"size-5"});var Pr=E(Gt,2),_t=b(Pr);_t.__keydown=[Va,O],Xe(_t,T=>w(a,T),()=>_(a));var jn=E(_t,2);ja(jn,{get inputElement(){return _(a)},onEmojiSelect:A});var Ar=E(Pr,2);Ar.__click=O;var Ln=b(Ar);ha(Ln,{class:"size-5"});var zn=E(le,2);{var Un=T=>{Nn(T,{get message(){return _(d)},type:"error",onClose:()=>w(u,!1),get key(){return _(f)}})};M(zn,T=>{_(u)&&T(Un)})}K(()=>{ne(pe,` ${_(v).name??""}`),ne(ft,`ID: ${_(v).id??""}`)}),Je("scroll",He,P),Je("dragover",He,U),Je("dragleave",He,X),Je("drop",He,$),Je("paste",_t,x),In(_t,()=>_(s),T=>w(s,T)),N(e,Q),ge()}Ee(["click","change","keydown"]);async function Pn(e){try{const t=Re(at)[e];if(!(await fetch(`/api/registered-users?client_id=${e}&server_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to request registered users")}catch(t){console.error("Error requesting registered users:",t)}}var Ja=e=>e.stopPropagation(),Xa=j('<div><div class="relative w-[80%] h-[80%] flex items-center justify-center"><div class="relative w-full h-full flex items-center justify-center"><img alt="Full size" class="rounded-lg shadow-xl min-w-[300px] min-h-[300px] w-auto h-auto max-w-full max-h-full object-contain"> <div class="absolute -top-4 -right-4 flex gap-2"><button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button> <button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button></div></div></div></div>');function Za(e,t){_e(t,!0);let r=ue(t,"containerClass",3,"");function i(g){g.key==="Escape"&&t.onClose()}function n(){const g=document.createElement("a");g.href=t.src,g.download=`image-${Date.now()}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g)}dt(()=>(document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}));var a=Xa();a.__click=function(...g){var y;(y=t.onClose)==null||y.apply(this,g)};var s=b(a);s.__click=[Ja];var o=b(s),c=b(o),l=E(c,2),u=b(l);u.__click=n;var d=b(u);fa(d,{class:"size-5"});var f=E(u,2);f.__click=function(...g){var y;(y=t.onClose)==null||y.apply(this,g)};var v=b(f);Tr(v,{class:"size-5"}),K(()=>{G(a,`absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm ${r()??""}`),Kt(c,"src",t.src)}),N(e,a),ge()}Ee(["click"]);async function Qa(e,t){Ia(t.clientId,!0),await Pn(t.clientId)}var es=j('<div class="flex justify-center py-4"><div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div></div>'),ts=(e,t,r)=>t(_(r).id),rs=j('<span class="absolute right-2 top-1/2 -translate-y-1/2 min-w-[20px] h-5 flex items-center justify-center bg-blue-500 text-white text-xs rounded-full px-1.5"> </span>'),ns=j("<button><!> <span> </span> <!></button>"),is=j('<div class="space-y-2"></div>'),as=j('<div class="relative flex-1"><!> <!></div>'),ss=j('<div class="flex items-center justify-center w-full h-[450px]"><p class="text-gray-500 dark:text-gray-400">Select a user to start chatting</p></div>'),os=j(`<div class="flex w-full"><div class="w-52 bg-white dark:bg-gray-800 border-r border-gray-300 dark:border-gray-700 overflow-hidden"><div class="p-2 border-b border-gray-300 dark:border-gray-700"><button class="w-full px-3 py-2 flex items-center justify-center gap-2 text-sm
                       bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500
                       rounded-lg transition-colors text-gray-800 dark:text-white"><span>Refresh Users</span> <!></button></div> <div class="px-3 py-2"><!></div></div> <!></div>`);function ls(e,t){_e(t,!0);const r=Nt(),i=()=>re(Fe,"$clientUsers",r),n=()=>re(Yt,"$unreadMessages",r);let a=ue(t,"destinationId",31,()=>-1);dt(()=>{ka(t.clientId),Pn(t.clientId)});let s=H(null);Te(()=>{mt.update(p=>({...p,[t.clientId]:a()})),a()!==-1&&wa(t.clientId,a()),w(s,null)});function o(p){a(p)}var c=os(),l=b(c),u=b(l),d=b(u);d.__click=[Qa,t];var f=E(b(d),2);{var v=p=>{it(p,{class:"size-4 animate-spin"})};M(f,p=>{var x;(x=i()[t.clientId])!=null&&x.isRefreshing&&p(v)})}var g=E(u,2),y=b(g);{var P=p=>{var x=es();N(p,x)},I=p=>{var x=is();ct(x,5,()=>{var O;return((O=i()[t.clientId])==null?void 0:O.users)||[]},ut,(O,A)=>{var D=ns();D.__click=[ts,o,A];var U=b(D),X=Se(()=>`size-5 ${(a()===_(A).id?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300")??""}`);Tn(U,{get class(){return _(X)}});var $=E(U,2),Q=b($),le=E($,2);{var q=k=>{var S=rs(),B=b(S);K(()=>ne(B,n()[t.clientId][_(A).id])),N(k,S)};M(le,k=>{var S;(((S=n()[t.clientId])==null?void 0:S[_(A).id])??0)>0&&k(q)})}K(()=>{G(D,`w-full p-2 rounded cursor-pointer transition-colors flex items-center gap-2 relative
                                   ${(a()===_(A).id?"bg-blue-100 dark:bg-blue-900":"hover:bg-gray-100 dark:hover:bg-gray-700")??""}`),G($,a()===_(A).id?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-800 dark:text-gray-100"),ne(Q,_(A).name)}),N(O,D)}),N(p,x)};M(y,p=>{var x;(x=i()[t.clientId])!=null&&x.isLoading?p(P):p(I,!1)})}var h=E(l,2);{var m=p=>{var x=as(),O=b(x);Ga(O,{get clientId(){return t.clientId},get destinationId(){return a()},onImageClick:U=>w(s,V(U))});var A=E(O,2);{var D=U=>{Za(U,{get src(){return _(s)},onClose:()=>w(s,null)})};M(A,U=>{_(s)&&U(D)})}N(p,x)},C=p=>{var x=ss();N(p,x)};M(h,p=>{a()!==-1?p(m):p(C,!1)})}N(e,c),ge()}Ee(["click"]);function us(e,t,r,i){e.key==="Enter"&&_(t).trim()?(e.preventDefault(),r()):e.key==="Escape"&&(e.preventDefault(),i())}function cs(e,t,r,i){if(_(t).length>0){const n=Math.floor(Math.random()*_(t).length);w(r,V(_(t)[n])),w(i,!0)}}var ds=j('<div class="flex items-center justify-center w-full h-[450px]"><div class="text-center"><!> <p class="text-gray-600 dark:text-gray-300 mb-4">Registering to server...</p> <button class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Cancel</button></div></div>'),fs=(e,t,r,i)=>{w(t,V(_(r))),w(i,!0)},vs=j("<button> </button>"),_s=j(`<div class="flex justify-center pt-4"><button class="px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg
                                   transition-all hover:bg-blue-700 dark:hover:bg-blue-600
                                   hover:shadow-md w-full sm:w-auto">Connect to Random Server</button></div>`),gs=j(`<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full"><h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"> </h2> <input type="text" placeholder="Enter your username" class="w-full p-3 mb-4 border rounded-lg dark:bg-gray-700 dark:text-gray-200
                               focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <div class="flex justify-end gap-3"><button class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">Cancel</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors
                                   disabled:opacity-50 disabled:cursor-not-allowed">Join Server</button></div></div></div>`),hs=j(`<div class="flex items-center justify-center flex-col w-full h-[450px] p-6"><div class="w-full max-w-md space-y-6"><div class="flex items-center justify-between"><h2 class="text-xl font-semibold text-gray-700 dark:text-gray-300">Available Servers</h2> <button class="inline-flex items-center justify-center px-3 py-2 rounded-lg
                               bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
                               transition-colors gap-2 text-gray-700 dark:text-gray-300"><span class="text-sm font-medium">Refresh</span> <!></button></div> <div></div> <!></div></div> <!>`,1),bs=j('<div class="flex w-full relative"><!></div>');function ps(e,t){_e(t,!0);const r=Nt(),i=()=>re(Be,"$pendingRegistrations",r);let n=H(V([])),a=H(!1),s=H(-1),o=H(""),c=H(!1),l;async function u(){w(c,!0);try{let h=await fetch(`/api/servers?id=${t.clientId}`);w(n,V((await h.json()).sort((m,C)=>m-C)))}catch(h){console.error(h),w(n,V([]))}finally{setTimeout(()=>{w(c,!1)},600)}}dt(async()=>{await u()}),Te(()=>{_(a)&&l&&l.focus()});async function d(){try{Be.update(m=>(m.add(t.clientId),m)),(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:_(s),username:_(o)})})).ok?(w(a,!1),jt.update(m=>({...m,[t.clientId]:_(o)})),w(o,"")):(Be.update(m=>(m.delete(t.clientId),m)),t.showToast(`Registration failed for Server ${_(s)}. Please try again.`,"error"))}catch(h){console.error(h),t.showToast(`Registration failed for Server ${_(s)}. Please try again.`,"error")}}async function f(){try{(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:_(s)})})).ok?Be.update(m=>(m.delete(t.clientId),m)):t.showToast("Failed to cancel registration. Please try again.","error")}catch(h){console.error(h),t.showToast("Failed to cancel registration. Please try again.","error")}}function v(){w(a,!1),w(o,"")}var g=bs(),y=b(g);{var P=h=>{var m=ds(),C=b(m),p=b(C);it(p,{class:"size-8 animate-spin mx-auto mb-4 text-blue-500"});var x=E(p,4);x.__click=f,N(h,m)},I=h=>{var m=hs(),C=Y(m),p=b(C),x=b(p),O=E(b(x),2);O.__click=u;var A=E(b(O),2),D=Se(()=>`size-5 ${(_(c)?"animate-spin":"hidden")??""}`);it(A,{get class(){return _(D)}});var U=E(x,2);ct(U,21,()=>_(n),ut,(q,k)=>{var S=vs();S.__click=[fs,s,k,a];var B=b(S);K(()=>{G(S,`flex items-center justify-center px-6 py-3
                                   bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600
                                   text-gray-800 dark:text-gray-200 rounded-lg transition-all
                                   hover:shadow-md border border-gray-300 dark:border-gray-600
                                   ${(_(n).length===1?"text-lg":"")??""}`),ne(B,`Server ${_(k)??""}`)}),N(q,S)});var X=E(U,2);{var $=q=>{var k=_s(),S=b(k);S.__click=[cs,n,s,a],N(q,k)};M(X,q=>{_(n).length>1&&q($)})}var Q=E(C,2);{var le=q=>{var k=gs(),S=b(k),B=b(S),pe=b(B),Ce=E(B,2);Ce.__keydown=[us,o,d,v],Xe(Ce,vt=>l=vt,()=>l);var ft=E(Ce,2),Ne=b(ft);Ne.__click=v;var Ie=E(Ne,2);Ie.__click=d,K(()=>{ne(pe,`Connect to Server ${_(s)??""}`),Ie.disabled=!_(o)}),In(Ce,()=>_(o),vt=>w(o,vt)),N(q,k)};M(Q,q=>{_(a)&&q(le)})}K(()=>{O.disabled=_(c),G(U,`grid gap-3 ${(_(n).length===1?"":"sm:grid-cols-2")??""}`)}),N(h,m)};M(y,h=>{i().has(t.clientId)?h(P):h(I,!1)})}N(e,g),ge()}Ee(["click","keydown"]);var ys=j('<button class="px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200 flex items-center gap-1 disabled:opacity-75"><!> Disconnect</button> <span class="text-xs text-gray-500 dark:text-gray-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full"> </span>',1),ms=j('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-200 relative"><div class="p-4 border-b border-gray-300 dark:border-gray-700"><div class="flex justify-between items-center"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100"> </h2></div> <div class="flex items-center gap-2"><!> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"> </span></div></div></div> <!> <!></div>');function xs(e,t){_e(t,!0);const r=Nt(),i=()=>re(mt,"$currentChats",r),n=()=>re(Me,"$userEvents",r),a=()=>re(Ze,"$isDisconnecting",r),s=()=>re(at,"$registrationStatus",r),o=()=>re(Cr,"$connectionStatus",r),c=()=>re(jt,"$clientUsernames",r);let l=Se(()=>i()[t.clientId]??-1),u=H(null);Te(()=>{const k=n()[t.clientId];k&&(w(u,V({message:k.message,type:k.type,key:Date.now()})),Ta(t.clientId))});function d(k,S){w(u,V({message:k,type:S,key:Date.now()}))}async function f(){if(!a()[t.clientId]){Ze.update(k=>({...k,[t.clientId]:!0}));try{if(Qe.update(S=>(S.add(t.clientId),S)),!(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:s()[t.clientId]})})).ok){Ze.update(S=>({...S,[t.clientId]:!1})),Qe.update(S=>(S.delete(t.clientId),S));return}}catch(k){console.error("Error unregistering:",k),Ze.update(S=>({...S,[t.clientId]:!1}))}}}var v=ms(),g=b(v),y=b(g),P=b(y),I=b(P),h=b(I),m=E(h,2),C=E(I,2),p=b(C),x=E(P,2),O=b(x);{var A=k=>{var S=ys(),B=Y(S);B.__click=f;var pe=b(B);{var Ce=Ie=>{it(Ie,{class:"size-3 animate-spin"})};M(pe,Ie=>{a()[t.clientId]&&Ie(Ce)})}var ft=E(B,2),Ne=b(ft);K(()=>{B.disabled=a()[t.clientId],ne(Ne,`Server ${s()[t.clientId]??""}`)}),N(k,S)};M(O,k=>{s()[t.clientId]&&k(A)})}var D=E(O,2),U=b(D),X=E(g,2);{var $=k=>{ls(k,{get clientId(){return t.clientId},get destinationId(){return _(l)}})},Q=k=>{ps(k,{get clientId(){return t.clientId},showToast:d})};M(X,k=>{s()[t.clientId]?k($):k(Q,!1)})}var le=E(X,2);{var q=k=>{Nn(k,{get message(){return _(u).message},get type(){return _(u).type},onClose:()=>w(u,null),get key(){return _(u).key}})};M(le,k=>{_(u)&&k(q)})}K(()=>{G(h,`status-indicator w-3 h-3 ${(o()?"bg-green-500":"bg-red-500")??""} rounded-full`),G(m,`status-ping w-3 h-3 ${(o()?"bg-green-500 animate-ping":"bg-red-500")??""} rounded-full absolute inset-0`),ne(p,c()[t.clientId]||`Chat ${t.clientId}`),ne(U,`ID: ${t.clientId??""}`)}),N(e,v),ge()}Ee(["click"]);function ws(){const e=localStorage.getItem("theme");e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}async function ks(){ws();try{const t=await(await fetch("/api/clients")).json();t.sort(),t.forEach(r=>{vr.set(new Set([...Re(vr),r]))})}catch(e){console.error("Error loading active_clients:",e)}Cn()}var Es=j('<button class="ml-2 px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors duration-200">Reconnect</button>'),Is=()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")},Ss=j('<div class="fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50 transition-opacity duration-500"><div class="text-center flex flex-col gap-4 items-center justify-center"><!> <p class="text-gray-600 dark:text-gray-300">Loading chats...</p></div></div>'),Ts=j('<div class="container mx-auto p-4 lg:p-6"><div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"><div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="flex items-center gap-3"><div class="bg-blue-500 p-2 rounded-lg"><!></div> <div><h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Clients - AP 24/25</h1> <p class="text-sm text-gray-500 dark:text-gray-400">Clients UI for Advanced Programming Project</p></div></div> <div class="flex items-center gap-6"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <span class="text-sm text-gray-600 dark:text-gray-300"> </span> <!></div> <div class="h-8 w-px bg-gray-200 dark:bg-gray-700"></div> <div class="flex items-center gap-3"><!> <button id="theme-toggle" aria-label="Change theme" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><span class="inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-200 translate-x-[2px] dark:translate-x-5"></span></button> <!></div></div></div></div> <div id="chat-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"></div></div> <!>',1);function Cs(e,t){_e(t,!0);const r=Nt(),i=()=>re(vr,"$displayedChats",r),n=()=>re(at,"$registrationStatus",r),a=()=>re(Cr,"$connectionStatus",r);let s=H(!0);dt(async()=>{await ks(),setTimeout(()=>{w(s,!1)},800),window.addEventListener("beforeunload",o)}),oa(()=>{window.removeEventListener("beforeunload",o),c()});function o(k){c()}function c(){console.error("Unregistering clients..."),i().forEach(k=>{const S=n()[k];S!==void 0&&S>=0&&fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:k,server_id:S})})}),console.warn("Clients unregistered.")}var l=Ts(),u=Y(l),d=b(u),f=b(d),v=b(f),g=b(v),y=b(g);va(y,{class:"size-5 text-white"});var P=E(v,2),I=b(P),h=b(I),m=b(h),C=E(m,2),p=E(h,2),x=b(p),O=E(p,2);{var A=k=>{var S=Es();S.__click=function(...B){Qt==null||Qt.apply(this,B)},N(k,S)};M(O,k=>{a()||k(A)})}var D=E(I,4),U=b(D);pa(U,{class:"size-5 dark:text-gray-200"});var X=E(U,2);X.__click=[Is];var $=E(X,2);_a($,{class:"size-5 dark:text-gray-200"});var Q=E(d,2);ct(Q,5,i,ut,(k,S)=>{xs(k,{get clientId(){return _(S)}})});var le=E(u,2);{var q=k=>{var S=Ss(),B=b(S),pe=b(B);it(pe,{class:"w-16 h-16 text-blue-500 animate-spin mb-4"}),N(k,S)};M(le,k=>{_(s)&&k(q)})}K(()=>{G(m,`w-3 h-3 rounded-full transition-colors duration-200 ${(a()?"bg-green-500":"bg-red-500")??""}`),G(C,`w-3 h-3 absolute inset-0 rounded-full transition-colors duration-200 ${(a()?"bg-green-500 animate-ping":"bg-red-500")??""}`),ne(x,a()?"Online":"Offline")}),N(e,l),ge()}Ee(["click"]);Ki(Cs,{target:document.getElementById("app")});
