(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();const qn=!1;var vr=Array.isArray,_r=Array.from,Bn=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,$r=Object.getOwnPropertyDescriptors,$n=Object.prototype,Vn=Array.prototype,gr=Object.getPrototypeOf;function ft(e){return typeof e=="function"}const Xe=()=>{};function Wn(e){return e()}function rr(e){for(var t=0;t<e.length;t++)e[t]()}const ve=2,Vr=4,It=8,hr=16,_e=32,nt=64,nr=128,Me=256,At=512,ae=1024,je=2048,St=4096,me=8192,it=16384,Hn=32768,Lt=65536,Kn=1<<17,Yn=1<<19,Wr=1<<20,De=Symbol("$state"),Hr=Symbol("legacy props"),ir=Symbol("");function Kr(e){return e===this.v}function Yr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function br(e){return!Yr(e,this.v)}function Gn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Zn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ei(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ti(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ri(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ni(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let at=!1;function ii(){at=!0}const pr=1,yr=2,Gr=4,ai=8,si=16,oi=1,li=2,Jr=4,ui=8,ci=16,di=1,fi=2,te=Symbol(),Xr="http://www.w3.org/2000/svg";function re(e,t){var r={f:0,v:e,reactions:null,equals:Kr,version:0};return r}function W(e){return vi(re(e))}function mr(e,t=!1){var n;const r=re(e);return t||(r.equals=br),at&&U!==null&&U.l!==null&&((n=U.l).s??(n.s=[])).push(r),r}function vi(e){return z!==null&&z.f&ve&&(xe===null?Ei([e]):xe.push(e)),e}function k(e,t){return z!==null&&qt()&&z.f&(ve|hr)&&(xe===null||!xe.includes(e))&&ni(),ar(e,t)}function ar(e,t){return e.equals(t)||(e.v=t,e.version=hn(),Zr(e,je),qt()&&R!==null&&R.f&ae&&!(R.f&_e)&&(X!==null&&X.includes(e)?(Ee(R,je),Vt(R)):Oe===null?Ii([e]):Oe.push(e))),t}function Zr(e,t){var r=e.reactions;if(r!==null)for(var n=qt(),i=r.length,a=0;a<i;a++){var s=r[a],o=s.f;o&je||!n&&s===R||(Ee(s,t),o&(ae|Me)&&(o&ve?Zr(s,St):Vt(s)))}}let Qr=!1;function $(e,t=null,r){if(typeof e!="object"||e===null||De in e)return e;const n=gr(e);if(n!==$n&&n!==Vn)return e;var i=new Map,a=vr(e),s=re(0);a&&i.set("length",re(e.length));var o;return new Proxy(e,{defineProperty(u,c,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&ei();var d=i.get(c);return d===void 0?(d=re(l.value),i.set(c,d)):k(d,$(l.value,o)),!0},deleteProperty(u,c){var l=i.get(c);if(l===void 0)c in u&&i.set(c,re(te));else{if(a&&typeof c=="string"){var d=i.get("length"),f=Number(c);Number.isInteger(f)&&f<d.v&&k(d,f)}k(l,te),Ar(s)}return!0},get(u,c,l){var g;if(c===De)return e;var d=i.get(c),f=c in u;if(d===void 0&&(!f||(g=Re(u,c))!=null&&g.writable)&&(d=re($(f?u[c]:te,o)),i.set(c,d)),d!==void 0){var v=_(d);return v===te?void 0:v}return Reflect.get(u,c,l)},getOwnPropertyDescriptor(u,c){var l=Reflect.getOwnPropertyDescriptor(u,c);if(l&&"value"in l){var d=i.get(c);d&&(l.value=_(d))}else if(l===void 0){var f=i.get(c),v=f==null?void 0:f.v;if(f!==void 0&&v!==te)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return l},has(u,c){var v;if(c===De)return!0;var l=i.get(c),d=l!==void 0&&l.v!==te||Reflect.has(u,c);if(l!==void 0||R!==null&&(!d||(v=Re(u,c))!=null&&v.writable)){l===void 0&&(l=re(d?$(u[c],o):te),i.set(c,l));var f=_(l);if(f===te)return!1}return d},set(u,c,l,d){var w;var f=i.get(c),v=c in u;if(a&&c==="length")for(var g=l;g<f.v;g+=1){var y=i.get(g+"");y!==void 0?k(y,te):g in u&&(y=re(te),i.set(g+"",y))}f===void 0?(!v||(w=Re(u,c))!=null&&w.writable)&&(f=re(void 0),k(f,$(l,o)),i.set(c,f)):(v=f.v!==te,k(f,$(l,o)));var C=Reflect.getOwnPropertyDescriptor(u,c);if(C!=null&&C.set&&C.set.call(d,l),!v){if(a&&typeof c=="string"){var x=i.get("length"),b=Number(c);Number.isInteger(b)&&b>=x.v&&k(x,b+1)}Ar(s)}return!0},ownKeys(u){_(s);var c=Reflect.ownKeys(u).filter(f=>{var v=i.get(f);return v===void 0||v.v!==te});for(var[l,d]of i)d.v!==te&&!(l in u)&&c.push(l);return c},setPrototypeOf(){ti()}})}function Ar(e,t=1){k(e,e.v+t)}var Rr,en,tn;function _i(){if(Rr===void 0){Rr=window;var e=Element.prototype,t=Node.prototype;en=Re(t,"firstChild").get,tn=Re(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function zt(e=""){return document.createTextNode(e)}function Qe(e){return en.call(e)}function Ut(e){return tn.call(e)}function h(e,t){return Qe(e)}function Y(e,t){{var r=Qe(e);return r instanceof Comment&&r.data===""?Ut(r):r}}function I(e,t=1,r=!1){let n=e;for(;t--;)n=Ut(n);return n}function gi(e){e.textContent=""}function Se(e){var t=ve|je;R===null?t|=Me:R.f|=Wr;var r=z!==null&&z.f&ve?z:null;const n={children:null,ctx:U,deps:null,equals:Kr,f:t,fn:e,reactions:null,v:null,version:0,parent:r??R};return r!==null&&(r.children??(r.children=[])).push(n),n}function hi(e){const t=Se(e);return t.equals=br,t}function rn(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var n=t[r];n.f&ve?xr(n):we(n)}}}function bi(e){for(var t=e.parent;t!==null;){if(!(t.f&ve))return t;t=t.parent}return null}function nn(e){var t,r=R;ke(bi(e));try{rn(e),t=bn(e)}finally{ke(r)}return t}function an(e){var t=nn(e),r=(Fe||e.f&Me)&&e.deps!==null?St:ae;Ee(e,r),e.equals(t)||(e.v=t,e.version=hn())}function xr(e){rn(e),wt(e,0),Ee(e,it),e.v=e.children=e.deps=e.ctx=e.reactions=null}function sn(e){R===null&&z===null&&Xn(),z!==null&&z.f&Me&&Jn(),Ir&&Gn()}function pi(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function qe(e,t,r,n=!0){var i=(e&nt)!==0,a=R,s={ctx:U,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|je,first:null,fn:t,last:null,next:null,parent:i?null:a,prev:null,teardown:null,transitions:null,version:0};if(r){var o=Ze;try{Dr(!0),$t(s),s.f|=Hn}catch(l){throw we(s),l}finally{Dr(o)}}else t!==null&&Vt(s);var u=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Wr)===0;if(!u&&!i&&n&&(a!==null&&pi(s,a),z!==null&&z.f&ve)){var c=z;(c.children??(c.children=[])).push(s)}return s}function on(e){const t=qe(It,null,!1);return Ee(t,ae),t.teardown=e,t}function Te(e){sn();var t=R!==null&&(R.f&_e)!==0&&U!==null&&!U.m;if(t){var r=U;(r.e??(r.e=[])).push({fn:e,effect:R,reaction:z})}else{var n=wr(e);return n}}function yi(e){return sn(),kr(e)}function mi(e){const t=qe(nt,e,!0);return()=>{we(t)}}function xi(e){const t=qe(nt,e,!0);return(r={})=>new Promise(n=>{r.outro?mt(t,()=>{we(t),n(void 0)}):(we(t),n(void 0))})}function wr(e){return qe(Vr,e,!1)}function kr(e){return qe(It,e,!0)}function H(e){return Ft(e)}function Ft(e,t=0){return qe(It|hr|t,e,!0)}function et(e,t=!0){return qe(It|_e,e,!0,t)}function ln(e){var t=e.teardown;if(t!==null){const r=Ir,n=z;Or(!0),Le(null);try{t.call(null)}finally{Or(r),Le(n)}}}function un(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)xr(t[r])}}function cn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;we(r,t),r=n}}function wi(e){for(var t=e.first;t!==null;){var r=t.next;t.f&_e||we(t),t=r}}function we(e,t=!0){var r=!1;if((t||e.f&Yn)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var a=n===i?null:Ut(n);n.remove(),n=a}r=!0}cn(e,t&&!r),un(e),wt(e,0),Ee(e,it);var s=e.transitions;if(s!==null)for(const u of s)u.stop();ln(e);var o=e.parent;o!==null&&o.first!==null&&dn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function dn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function mt(e,t){var r=[];Er(e,r,!0),fn(r,()=>{we(e),t&&t()})}function fn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Er(e,t,r){if(!(e.f&me)){if(e.f^=me,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var n=e.first;n!==null;){var i=n.next,a=(n.f&Lt)!==0||(n.f&_e)!==0;Er(n,t,a?r:!1),n=i}}}function xt(e){vn(e,!0)}function vn(e,t){if(e.f&me){Tt(e)&&$t(e),e.f^=me;for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Lt)!==0||(r.f&_e)!==0;vn(r,i?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let sr=!1,or=[];function ki(){sr=!1;const e=or.slice();or=[],rr(e)}function Mt(e){sr||(sr=!0,queueMicrotask(ki)),or.push(e)}function _n(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Pt=!1,Rt=!1,Dt=null,Ze=!1,Ir=!1;function Dr(e){Ze=e}function Or(e){Ir=e}let lr=[],ht=0;let z=null;function Le(e){z=e}let R=null;function ke(e){R=e}let xe=null;function Ei(e){xe=e}let X=null,le=0,Oe=null;function Ii(e){Oe=e}let gn=1,Fe=!1,U=null;function hn(){return++gn}function qt(){return!at||U!==null&&U.l===null}function Tt(e){var s,o;var t=e.f;if(t&je)return!0;if(t&St){var r=e.deps,n=(t&Me)!==0;if(r!==null){var i;if(t&At){for(i=0;i<r.length;i++)((s=r[i]).reactions??(s.reactions=[])).push(e);e.f^=At}for(i=0;i<r.length;i++){var a=r[i];if(Tt(a)&&an(a),n&&R!==null&&!Fe&&!((o=a==null?void 0:a.reactions)!=null&&o.includes(e))&&(a.reactions??(a.reactions=[])).push(e),a.version>e.version)return!0}}(!n||R!==null&&!Fe)&&Ee(e,ae)}return!1}function Si(e,t){for(var r=t;r!==null;){if(r.f&nr)try{r.fn(e);return}catch{r.f^=nr}r=r.parent}throw Pt=!1,e}function Ti(e){return(e.f&it)===0&&(e.parent===null||(e.parent.f&nr)===0)}function Bt(e,t,r,n){if(Pt){if(r===null&&(Pt=!1),Ti(t))throw e;return}r!==null&&(Pt=!0);{Si(e,t);return}}function bn(e){var f;var t=X,r=le,n=Oe,i=z,a=Fe,s=xe,o=U,u=e.f;X=null,le=0,Oe=null,z=u&(_e|nt)?null:e,Fe=!Ze&&(u&Me)!==0,xe=null,U=e.ctx;try{var c=(0,e.fn)(),l=e.deps;if(X!==null){var d;if(wt(e,le),l!==null&&le>0)for(l.length=le+X.length,d=0;d<X.length;d++)l[le+d]=X[d];else e.deps=l=X;if(!Fe)for(d=le;d<l.length;d++)((f=l[d]).reactions??(f.reactions=[])).push(e)}else l!==null&&le<l.length&&(wt(e,le),l.length=le);return c}finally{X=t,le=r,Oe=n,z=i,Fe=a,xe=s,U=o}}function Ci(e,t){let r=t.reactions;if(r!==null){var n=r.indexOf(e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&t.f&ve&&(X===null||!X.includes(t))&&(Ee(t,St),t.f&(Me|At)||(t.f^=At),wt(t,0))}function wt(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Ci(e,r[n])}function $t(e){var t=e.f;if(!(t&it)){Ee(e,ae);var r=R,n=U;R=e;try{t&hr?wi(e):cn(e),un(e),ln(e);var i=bn(e);e.teardown=typeof i=="function"?i:null,e.version=gn}catch(a){Bt(a,e,r,n||e.ctx)}finally{R=r}}}function Ni(){if(ht>1e3){ht=0;try{Zn()}catch(e){if(Dt!==null)Bt(e,Dt,null);else throw e}}ht++}function Pi(e){var t=e.length;if(t!==0){Ni();var r=Ze;Ze=!0;try{for(var n=0;n<t;n++){var i=e[n];i.f&ae||(i.f^=ae);var a=[];pn(i,a),Ai(a)}}finally{Ze=r}}}function Ai(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if(!(n.f&(it|me)))try{Tt(n)&&($t(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?dn(n):n.fn=null))}catch(i){Bt(i,n,null,n.ctx)}}}function Ri(){if(Rt=!1,ht>1001)return;const e=lr;lr=[],Pi(e),Rt||(ht=0,Dt=null)}function Vt(e){Rt||(Rt=!0,queueMicrotask(Ri)),Dt=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(nt|_e)){if(!(r&ae))return;t.f^=ae}}lr.push(t)}function pn(e,t){var r=e.first,n=[];e:for(;r!==null;){var i=r.f,a=(i&_e)!==0,s=a&&(i&ae)!==0,o=r.next;if(!s&&!(i&me))if(i&It){if(a)r.f^=ae;else try{Tt(r)&&$t(r)}catch(d){Bt(d,r,null,r.ctx)}var u=r.first;if(u!==null){r=u;continue}}else i&Vr&&n.push(r);if(o===null){let d=r.parent;for(;d!==null;){if(e===d)break e;var c=d.next;if(c!==null){r=c;continue e}d=d.parent}}r=o}for(var l=0;l<n.length;l++)u=n[l],t.push(u),pn(u,t)}function _(e){var l;var t=e.f,r=(t&ve)!==0;if(r&&t&it){var n=nn(e);return xr(e),n}if(z!==null){xe!==null&&xe.includes(e)&&ri();var i=z.deps;X===null&&i!==null&&i[le]===e?le++:X===null?X=[e]:X.push(e),Oe!==null&&R!==null&&R.f&ae&&!(R.f&_e)&&Oe.includes(e)&&(Ee(R,je),Vt(R))}else if(r&&e.deps===null)for(var a=e,s=a.parent,o=a;s!==null;)if(s.f&ve){var u=s;o=u,s=u.parent}else{var c=s;(l=c.deriveds)!=null&&l.includes(o)||(c.deriveds??(c.deriveds=[])).push(o);break}return r&&(a=e,Tt(a)&&an(a)),e.v}function ze(e){const t=z;try{return z=null,e()}finally{z=t}}const Di=~(je|St|ae);function Ee(e,t){e.f=e.f&Di|t}function ur(e,t=1){var r=_(e),n=t===1?r++:r--;return k(e,r),n}function ge(e,t=!1,r){U={p:U,c:null,e:null,m:!1,s:e,x:null,l:null},at&&!t&&(U.l={s:null,u:null,r1:[],r2:re(!1)})}function he(e){const t=U;if(t!==null){const s=t.e;if(s!==null){var r=R,n=z;t.e=null;try{for(var i=0;i<s.length;i++){var a=s[i];ke(a.effect),Le(a.reaction),wr(a.fn)}}finally{ke(r),Le(n)}}U=t.p,t.m=!0}return{}}function Oi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(De in e)cr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&De in r&&cr(r)}}}function cr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{cr(e[n],t)}catch{}const r=gr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=$r(r);for(let i in n){const a=n[i].get;if(a)try{a.call(e)}catch{}}}}}function ji(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Li=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function zi(e){return Li.includes(e)}const Ui={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Fi(e){return e=e.toLowerCase(),Ui[e]??e}const Mi=["touchstart","touchmove"];function qi(e){return Mi.includes(e)}function Bi(e,t){if(t){const r=document.body;e.autofocus=!0,Mt(()=>{document.activeElement===r&&e.focus()})}}let jr=!1;function $i(){jr||(jr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function yn(e){var t=z,r=R;Le(null),ke(null);try{return e()}finally{Le(t),ke(r)}}function Vi(e,t,r,n=r){e.addEventListener(t,()=>yn(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),$i()}const mn=new Set,dr=new Set;function xn(e,t,r,n){function i(a){if(n.capture||vt.call(t,a),!a.cancelBubble)return yn(()=>r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Mt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Ye(e,t,r,n,i){var a={capture:n,passive:i},s=xn(e,t,r,a);(t===document.body||t===window||t===document)&&on(()=>{t.removeEventListener(e,s,a)})}function Ie(e){for(var t=0;t<e.length;t++)mn.add(e[t]);for(var r of dr)r(e)}function vt(e){var b;var t=this,r=t.ownerDocument,n=e.type,i=((b=e.composedPath)==null?void 0:b.call(e))||[],a=i[0]||e.target,s=0,o=e.__root;if(o){var u=i.indexOf(o);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(s=u)}if(a=i[s]||e.target,a!==t){Bn(e,"currentTarget",{configurable:!0,get(){return a||r}});var l=z,d=R;Le(null),ke(null);try{for(var f,v=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+n];if(y!==void 0&&!a.disabled)if(vr(y)){var[C,...x]=y;C.apply(a,[e,...x])}else y.call(a,e)}catch(w){f?v.push(w):f=w}if(e.cancelBubble||g===t||g===null)break;a=g}if(f){for(let w of v)queueMicrotask(()=>{throw w});throw f}}finally{e.__root=t,delete e.currentTarget,Le(l),ke(d)}}}function wn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function kt(e,t){var r=R;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function O(e,t){var r=(t&di)!==0,n=(t&fi)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=wn(a?e:"<!>"+e),r||(i=Qe(i)));var s=n?document.importNode(i,!0):i.cloneNode(!0);if(r){var o=Qe(s),u=s.lastChild;kt(o,u)}else kt(s,s);return s}}function Wi(e,t,r="svg"){var n=!e.startsWith("<!>"),i=`<${r}>${n?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var s=wn(i),o=Qe(s);a=Qe(o)}var u=a.cloneNode(!0);return kt(u,u),u}}function se(){var e=document.createDocumentFragment(),t=document.createComment(""),r=zt();return e.append(t,r),kt(t,r),e}function T(e,t){e!==null&&e.before(t)}function ie(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function Hi(e,t){return Ki(e,t)}const He=new Map;function Ki(e,{target:t,anchor:r,props:n={},events:i,context:a,intro:s=!0}){_i();var o=new Set,u=d=>{for(var f=0;f<d.length;f++){var v=d[f];if(!o.has(v)){o.add(v);var g=qi(v);t.addEventListener(v,vt,{passive:g});var y=He.get(v);y===void 0?(document.addEventListener(v,vt,{passive:g}),He.set(v,1)):He.set(v,y+1)}}};u(_r(mn)),dr.add(u);var c=void 0,l=xi(()=>{var d=r??t.appendChild(zt());return et(()=>{if(a){ge({});var f=U;f.c=a}i&&(n.$$events=i),c=e(d,n)||{},a&&he()}),()=>{var g;for(var f of o){t.removeEventListener(f,vt);var v=He.get(f);--v===0?(document.removeEventListener(f,vt),He.delete(f)):He.set(f,v)}dr.delete(u),d!==r&&((g=d.parentNode)==null||g.removeChild(d))}});return Yi.set(c,l),c}let Yi=new WeakMap;function M(e,t,r=!1){var n=e,i=null,a=null,s=te,o=r?Lt:0,u=!1;const c=(d,f=!0)=>{u=!0,l(f,d)},l=(d,f)=>{s!==(s=d)&&(s?(i?xt(i):f&&(i=et(()=>f(n))),a&&mt(a,()=>{a=null})):(a?xt(a):f&&(a=et(()=>f(n))),i&&mt(i,()=>{i=null})))};Ft(()=>{u=!1,t(c),u||l(null,null)},o)}function st(e,t){return t}function Gi(e,t,r,n){for(var i=[],a=t.length,s=0;s<a;s++)Er(t[s].e,i,!0);var o=a>0&&i.length===0&&r!==null;if(o){var u=r.parentNode;gi(u),u.append(r),n.clear(),Pe(e,t[0].prev,t[a-1].next)}fn(i,()=>{for(var c=0;c<a;c++){var l=t[c];o||(n.delete(l.k),Pe(e,l.prev,l.next)),we(l.e,!o)}})}function ot(e,t,r,n,i,a=null){var s=e,o={flags:t,items:new Map,first:null},u=(t&Gr)!==0;if(u){var c=e;s=c.appendChild(zt())}var l=null,d=!1;Ft(()=>{var f=r(),v=vr(f)?f:f==null?[]:_r(f),g=v.length;if(!(d&&g===0)){d=g===0;{var y=z;Ji(v,o,s,i,t,(y.f&me)!==0,n)}a!==null&&(g===0?l?xt(l):l=et(()=>a(s)):l!==null&&mt(l,()=>{l=null})),r()}})}function Ji(e,t,r,n,i,a,s,o){var B,E,A,K;var u=(i&ai)!==0,c=(i&(pr|yr))!==0,l=e.length,d=t.items,f=t.first,v=f,g,y=null,C,x=[],b=[],w,N,p,m;if(u)for(m=0;m<l;m+=1)w=e[m],N=s(w,m),p=d.get(N),p!==void 0&&((B=p.a)==null||B.measure(),(C??(C=new Set)).add(p));for(m=0;m<l;m+=1){if(w=e[m],N=s(w,m),p=d.get(N),p===void 0){var j=v?v.e.nodes_start:r;y=Zi(j,t,y,y===null?t.first:y.next,w,N,m,n,i),d.set(N,y),x=[],b=[],v=y.next;continue}if(c&&Xi(p,w,m,i),p.e.f&me&&(xt(p.e),u&&((E=p.a)==null||E.unfix(),(C??(C=new Set)).delete(p))),p!==v){if(g!==void 0&&g.has(p)){if(x.length<b.length){var P=b[0],D;y=P.prev;var F=x[0],Z=x[x.length-1];for(D=0;D<x.length;D+=1)Lr(x[D],P,r);for(D=0;D<b.length;D+=1)g.delete(b[D]);Pe(t,F.prev,Z.next),Pe(t,y,F),Pe(t,Z,P),v=P,y=Z,m-=1,x=[],b=[]}else g.delete(p),Lr(p,v,r),Pe(t,p.prev,p.next),Pe(t,p,y===null?t.first:y.next),Pe(t,y,p),y=p;continue}for(x=[],b=[];v!==null&&v.k!==N;)(a||!(v.e.f&me))&&(g??(g=new Set)).add(v),b.push(v),v=v.next;if(v===null)continue;p=v}x.push(p),y=p,v=p.next}if(v!==null||g!==void 0){for(var G=g===void 0?[]:_r(g);v!==null;)(a||!(v.e.f&me))&&G.push(v),v=v.next;var ee=G.length;if(ee>0){var q=i&Gr&&l===0?r:null;if(u){for(m=0;m<ee;m+=1)(A=G[m].a)==null||A.measure();for(m=0;m<ee;m+=1)(K=G[m].a)==null||K.fix()}Gi(t,G,q,d)}}u&&Mt(()=>{var oe;if(C!==void 0)for(p of C)(oe=p.a)==null||oe.apply()}),R.first=t.first&&t.first.e,R.last=y&&y.e}function Xi(e,t,r,n){n&pr&&ar(e.v,t),n&yr?ar(e.i,r):e.i=r}function Zi(e,t,r,n,i,a,s,o,u,c){var l=(u&pr)!==0,d=(u&si)===0,f=l?d?mr(i):re(i):i,v=u&yr?re(s):s,g={i:v,v:f,k:a,a:null,e:null,prev:r,next:n};try{return g.e=et(()=>o(e,f,v),Qr),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function Lr(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==n;){var s=Ut(a);i.before(a),a=s}}function Pe(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function de(e,t,r,n,i){var o;var a=(o=t.$$slots)==null?void 0:o[r],s=!1;a===!0&&(a=t.children,s=!0),a===void 0||a(e,s?()=>n:n)}function Qi(e,t,r,n,i,a){var s,o,u=null,c=e,l;Ft(()=>{const d=t()||null;var f=Xr;d!==s&&(l&&(d===null?mt(l,()=>{l=null,o=null}):d===o?xt(l):we(l)),d&&d!==o&&(l=et(()=>{u=document.createElementNS(f,d),kt(u,u);{var v=u.appendChild(zt());n(u,v)}R.nodes_end=u,c.before(u)})),s=d,s&&(o=s))},Lt)}function ea(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Wt(e,t,r,n){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ir]=r),r==null?e.removeAttribute(t):typeof r!="string"&&kn(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function zr(e,t,r,n,i=!1,a=!1,s=!1){var o=t||{},u=e.tagName==="OPTION";for(var c in t)c in r||(r[c]=null);var l=kn(e),d=e.__attributes??(e.__attributes={});for(const b in r){let w=r[b];if(u&&b==="value"&&w==null){e.value=e.__value="",o[b]=w;continue}var f=o[b];if(w!==f){o[b]=w;var v=b[0]+b[1];if(v!=="$$"){if(v==="on"){const N={},p="$$"+b;let m=b.slice(2);var g=zi(m);if(ji(m)&&(m=m.slice(0,-7),N.capture=!0),!g&&f){if(w!=null)continue;e.removeEventListener(m,o[p],N),o[p]=null}if(w!=null)if(g)e[`__${m}`]=w,Ie([m]);else{let j=function(P){o[b].call(this,P)};var x=j;o[p]=xn(m,e,j,N)}else g&&(e[`__${m}`]=void 0)}else if(b==="style"&&w!=null)e.style.cssText=w+"";else if(b==="autofocus")Bi(e,!!w);else if(b==="__value"||b==="value"&&w!=null)e.value=e[b]=e.__value=w;else if(b==="selected"&&u)ea(e,w);else{var y=b;i||(y=Fi(y));var C=y==="defaultValue"||y==="defaultChecked";if(w==null&&!a&&!C)if(d[b]=null,y==="value"||y==="checked"){let N=e;if(y==="value"){let p=N.defaultValue;N.removeAttribute(y),N.defaultValue=p}else{let p=N.defaultChecked;N.removeAttribute(y),N.defaultChecked=p}}else e.removeAttribute(b);else C||l.includes(y)&&(a||typeof w!="string")?e[y]=w:typeof w!="function"&&Wt(e,y,w)}b==="style"&&"__styles"in e&&(e.__styles={})}}}return o}var Ur=new Map;function kn(e){var t=Ur.get(e.nodeName);if(t)return t;Ur.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=$r(n);for(var a in r)r[a].set&&t.push(a);n=gr(n)}return t}function ta(e){if(e.loading==="lazy"){var t=e.src;e[ir]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[ir]!=="eager"&&(e.loading="lazy"),e.src=t})}}function J(e,t){var r=e.__className,n=ra(t);(r!==n||Qr)&&(t==null?e.removeAttribute("class"):e.className=n,e.__className=n)}function ra(e){return e??""}function En(e,t,r=t){var n=qt();Vi(e,"input",i=>{var a=i?e.defaultValue:e.value;if(a=Jt(e)?Xt(a):a,r(a),n&&a!==(a=t())){var s=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(o,e.value.length))}}),ze(t)==null&&e.value&&r(Jt(e)?Xt(e.value):e.value),kr(()=>{var i=t();Jt(e)&&i===Xt(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Jt(e){var t=e.type;return t==="number"||t==="range"}function Xt(e){return e===""?null:+e}function Fr(e,t){return e===t||(e==null?void 0:e[De])===t}function Ge(e={},t,r,n){return wr(()=>{var i,a;return kr(()=>{i=a,a=[],ze(()=>{e!==r(...a)&&(t(e,...a),i&&Fr(r(...i),e)&&t(null,...i))})}),()=>{Mt(()=>{a&&Fr(r(...a),e)&&t(null,...a)})}}),e}function na(e=!1){const t=U,r=t.l.u;if(!r)return;let n=()=>Oi(t.s);if(e){let i=0,a={};const s=Se(()=>{let o=!1;const u=t.s;for(const c in u)u[c]!==a[c]&&(a[c]=u[c],o=!0);return o&&i++,i});n=()=>_(s)}r.b.length&&yi(()=>{Mr(t,n),rr(r.b)}),Te(()=>{const i=ze(()=>r.m.map(Wn));return()=>{for(const a of i)typeof a=="function"&&a()}}),r.a.length&&Te(()=>{Mr(t,n),rr(r.a)})}function Mr(e,t){if(e.l.s)for(const r of e.l.s)_(r);t()}function In(e,t,r){if(e==null)return t(void 0),Xe;const n=ze(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}let Nt=!1;function ne(e,t,r){const n=r[t]??(r[t]={store:null,source:mr(void 0),unsubscribe:Xe});if(n.store!==e)if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Xe;else{var i=!0;n.unsubscribe=In(e,a=>{i?n.source.v=a:k(n.source,a)}),i=!1}return _(n.source)}function Ct(){const e={};return on(()=>{for(var t in e)e[t].unsubscribe()}),e}function ia(e){var t=Nt;try{return Nt=!1,[e(),Nt]}finally{Nt=t}}const aa={get(e,t){if(!e.exclude.includes(t))return _(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=ce({get[t](){return e.props[t]}},t,Jr)),e.special[t](r),ur(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),ur(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function ue(e,t){return new Proxy({props:e,exclude:t,special:{},version:re(0)},aa)}const sa={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(ft(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];ft(i)&&(i=i());const a=Re(i,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(ft(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Re(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===De||t===Hr)return!1;for(let r of e.props)if(ft(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){ft(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function be(...e){return new Proxy({props:e},sa)}function qr(e){for(var t=R,r=R;t!==null&&!(t.f&(_e|nt));)t=t.parent;try{return ke(t),e()}finally{ke(r)}}function ce(e,t,r,n){var j;var i=(r&oi)!==0,a=!at||(r&li)!==0,s=(r&ui)!==0,o=(r&ci)!==0,u=!1,c;s?[c,u]=ia(()=>e[t]):c=e[t];var l=De in e||Hr in e,d=((j=Re(e,t))==null?void 0:j.set)??(l&&s&&t in e?P=>e[t]=P:void 0),f=n,v=!0,g=!1,y=()=>(g=!0,v&&(v=!1,o?f=ze(n):f=n),f);c===void 0&&n!==void 0&&(d&&a&&Qn(),c=y(),d&&d(c));var C;if(a)C=()=>{var P=e[t];return P===void 0?y():(v=!0,g=!1,P)};else{var x=qr(()=>(i?Se:hi)(()=>e[t]));x.f|=Kn,C=()=>{var P=_(x);return P!==void 0&&(f=void 0),P===void 0?f:P}}if(!(r&Jr))return C;if(d){var b=e.$$legacy;return function(P,D){return arguments.length>0?((!a||!D||b||u)&&d(D?C():P),P):C()}}var w=!1,N=!1,p=mr(c),m=qr(()=>Se(()=>{var P=C(),D=_(p);return w?(w=!1,N=!0,D):(N=!1,p.v=P)}));return i||(m.equals=br),function(P,D){if(arguments.length>0){const F=D?_(m):a&&s?$(P):P;return m.equals(F)||(w=!0,k(p,F),g&&f!==void 0&&(f=F),ze(()=>_(m))),P}return _(m)}}function lt(e){U===null&&_n(),at&&U.l!==null?la(U).m.push(e):Te(()=>{const t=ze(e);if(typeof t=="function")return t})}function oa(e){U===null&&_n(),lt(()=>()=>ze(e))}function la(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ua="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ua);ii();/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var da=Wi("<svg><!><!></svg>");function pe(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]),n=ue(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ge(t,!1);let i=ce(t,"name",8,void 0),a=ce(t,"color",8,"currentColor"),s=ce(t,"size",8,24),o=ce(t,"strokeWidth",8,2),u=ce(t,"absoluteStrokeWidth",8,!1),c=ce(t,"iconNode",24,()=>[]);const l=(...y)=>y.filter((C,x,b)=>!!C&&b.indexOf(C)===x).join(" ");na();var d=da();let f;var v=h(d);ot(v,1,c,st,(y,C)=>{let x=()=>_(C)[0],b=()=>_(C)[1];var w=se(),N=Y(w);Qi(N,x,!0,(p,m)=>{let j;H(()=>j=zr(p,j,{...b()},void 0,p.namespaceURI===Xr,p.nodeName.includes("-")))}),T(y,w)});var g=I(v);de(g,t,"default",{}),H(()=>f=zr(d,f,{...ca,...n,width:s(),height:s(),stroke:a(),"stroke-width":u()?Number(o())*24/Number(s()):o(),class:l("lucide-icon","lucide",i()?`lucide-${i()}`:"",r.class)},void 0,!0)),T(e,d),he()}function Sn(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"circle-user-round"},()=>r,{iconNode:[["path",{d:"M18 20a6 6 0 0 0-12 0"}],["circle",{cx:"12",cy:"10",r:"4"}],["circle",{cx:"12",cy:"12",r:"10"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function fa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function tt(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function va(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"message-square"},()=>r,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function _a(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function ga(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"paperclip"},()=>r,{iconNode:[["path",{d:"M13.234 20.252 21 12.3"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function ha(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"send"},()=>r,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function ba(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"smile"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function pa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function ya(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Sr(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"x"},()=>r,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(i,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}const Ke=[];function fe(e,t=Xe){let r=null;const n=new Set;function i(o){if(Yr(e,o)&&(e=o,r)){const u=!Ke.length;for(const c of n)c[1](),Ke.push(c,e);if(u){for(let c=0;c<Ke.length;c+=2)Ke[c][0](Ke[c+1]);Ke.length=0}}}function a(o){i(o(e))}function s(o,u=Xe){const c=[o,u];return n.add(c),n.size===1&&(r=t(i,a)||Xe),o(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:i,update:a,subscribe:s}}function Ae(e){let t;return In(e,r=>t=r)(),t}const bt=fe({});function Et(e,t){return`${e}|${t}`}function ma(e){const[t,r]=e.split("|").map(Number);return{displayer:t,other:r}}const fr=fe(new Set),rt=fe({}),pt=fe(new Set),Je=fe({}),_t=fe(new Set),Ot=fe({}),Ht=fe({}),yt=fe({});function xa(e,t){Ht.update(r=>{const n=r[e]||{};return{...r,[e]:{...n,[t]:(n[t]||0)+1}}})}function wa(e,t){Ht.update(r=>{const n=r[e]||{},{[t]:i,...a}=n;return{...r,[e]:a}})}const Ue=fe({});function ka(e){Ue.update(t=>({...t,[e]:{users:[],isLoading:!0,isRefreshing:!1}}))}function Ea(e,t){Ue.update(r=>({...r,[e]:{...r[e],users:t,isLoading:!1,isRefreshing:!1}}))}function Ia(e,t){Ue.update(r=>({...r,[e]:{...r[e],isRefreshing:t}}))}function Sa(e,t){return Ae(Ue)[e].users.some(n=>n.id===t)}const gt=fe({});function Ta(e){const t=e.message;switch(t.response){case"RegistrationSuccess":Ae(pt).has(e.client_id)&&(rt.update(n=>({...n,[e.client_id]:e.server_id})),pt.update(n=>(n.delete(e.client_id),n)));break;case"RegistrationFailure":pt.update(n=>(n.delete(e.client_id),n)),Ot.update(n=>{const{[e.client_id]:i,...a}=n;return a}),gt.update(n=>({...n,[e.client_id]:{message:"Failed to register to server. Please try again.",type:"error"}}));break;case"UnregisterSuccess":Ae(_t).has(e.client_id)&&(Je.update(n=>({...n,[e.client_id]:!1})),rt.update(n=>{const{[e.client_id]:i,...a}=n;return a}),_t.update(n=>(n.delete(e.client_id),n)),Ot.update(n=>{const{[e.client_id]:i,...a}=n;return a}),bt.update(n=>{const i={};for(const a in n){const{displayer:s}=ma(a);s!==e.client_id&&(i[a]=n[a])}return i}),Ht.update(n=>{const{[e.client_id]:i,...a}=n;return a}),yt.update(n=>{const{[e.client_id]:i,...a}=n;return a}));break;case"UnregisterFailure":Ae(_t).has(e.client_id)&&(console.warn(`Failed to unregister client ${e.client_id}`),Je.update(n=>({...n,[e.client_id]:!1})),_t.update(n=>(n.delete(e.client_id),n)));break;case"ActiveUsersList":console.log("ActiveUsersList",t.users);let r=t.users.filter(n=>n.id!==e.client_id);Ea(e.client_id,r);break;case"NewUserRegistered":Ue.update(n=>{const i=n[e.client_id].users;return{...n,[e.client_id]:{...n[e.client_id],users:[...i,t.user]}}}),gt.update(n=>({...n,[e.client_id]:{message:`${t.user.name} joined the server`,type:"success"}}));break;case"UserUnregistered":Ue.update(n=>{const i=n[e.client_id].users.find(s=>s.id===t.id),a=n[e.client_id].users.filter(s=>s.id!==t.id);return i&&gt.update(s=>({...s,[e.client_id]:{message:`${i.name} left the server`,type:"error"}})),{...n,[e.client_id]:{...n[e.client_id],users:a}}}),yt.update(n=>{if(n[e.client_id]===t.id){const{[e.client_id]:i,...a}=n;return a}return n});break;case"PrivateMessage":if(Sa(e.client_id,t.sender_id)){const n=Et(e.client_id,t.sender_id);bt.update(a=>{const s=a[n]||[];return{...a,[n]:[...s,{content:t.message.content,timestamp:t.message.timestamp,sender_id:t.sender_id,receiver_id:e.client_id,server_id:e.server_id}]}}),Ae(yt)[e.client_id]!==t.sender_id&&xa(e.client_id,t.sender_id)}break;case"UserNotFound":console.warn(`User ${t.user_id} not found`);break;case"SendingError":if(t.message.request==="SendPrivateMessage"){const n=t.message,i=Et(n.message.sender_id,n.recipient_id);bt.update(a=>{const s=a[i];if(s)for(let o=s.length-1;o>=0;o--){const u=s[o];if(u.content.type===n.message.content.type&&u.content.data===n.message.content.data&&u.timestamp===n.message.timestamp&&u.sender_id===n.message.sender_id){u.status="failed";break}}return a})}gt.update(n=>({...n,[e.client_id]:{message:t.error,type:"error"}}));break}}let Ne=null,jt=0;const Ca=5,Tr=fe(!1);function Tn(){return Ne&&Ne.close(),Ne=new WebSocket("ws://localhost:7374"),Ne.onopen=function(){console.log("WebSocket connection opened"),Qt(!0)},Ne.onclose=function(){console.log("WebSocket connection closed"),Qt(!1)},Ne.onerror=function(e){console.error("WebSocket error:",e),Qt(!1)},Ne.onmessage=function(e){console.log("WebSocket message received:",e.data);const t=JSON.parse(e.data.toString());console.log("WebSocket message parsed:",t),Ta(t)},Ne}function Zt(){if(jt>=Ca){console.log("Max reconnect attempts reached");return}jt++,Tn()}function Qt(e){Tr.set(e),jt=e?0:jt}async function Br(e,t,r,n){if(!r)return;const i=Ae(rt)[e],a=new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),o={content:{type:n,data:r},timestamp:a,sender_id:e,receiver_id:t,server_id:i,status:"sent"};try{if(!(await fetch("/api/send-to",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Network response was not ok");let c=Et(e,t);return bt.update(l=>{const d=l[c]||[];return{...l,[c]:[...d,o]}}),!0}catch(u){return console.error("Error sending message:",u),!1}}const Na=["image/jpeg","image/png","image/gif","image/webp"];async function er(e){return new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=i=>r(i)})}function tr(e){return Na.includes(e.type)}var Pa=(e,t)=>{e.stopPropagation(),k(t,!_(t))},Aa=(e,t,r)=>{e.stopPropagation(),t(_(r))},Ra=O('<button class="emoji-option p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200"> </button>'),Da=O('<div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-gray-400"><button class="emoji-button hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 bg-white dark:bg-gray-700 rounded-full p-1" aria-label="Insert emoji"><!></button> <div></div></div>');function Oa(e,t){ge(t,!0);let r=W(!1),n;const i=["😂","❤️","😍","🤣","😊","🙏","🥰","😭","😘","👍","🤔","😅","🎉","👏","🥳","🤗","😎","💔","💕","😜"],a=d=>{var f;(f=t.onEmojiSelect)==null||f.call(t,d)},s=d=>{n&&!n.contains(d.target)&&k(r,!1)};lt(()=>(document.addEventListener("click",s),()=>{document.removeEventListener("click",s)}));var o=Da(),u=h(o);u.__click=[Pa,r];var c=h(u);ba(c,{class:"size-5"});var l=I(u,2);ot(l,21,()=>i,st,(d,f)=>{var v=Ra();v.__click=[Aa,a,f];var g=h(v);H(()=>ie(g,_(f))),T(d,v)}),Ge(l,d=>n=d,()=>n),H(()=>J(l,`emoji-dropdown ${(_(r)?"grid":"hidden")??""} select-none absolute bottom-full right-0 mb-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2 grid-cols-5 gap-2`)),T(e,o),he()}Ie(["click"]);var ja=O("<div> </div>"),La=(e,t)=>{var r;return(r=t.onImageClick)==null?void 0:r.call(t,t.message.content.data)},za=O('<div><img alt="Sent img" class="w-full h-auto rounded-xl object-cover cursor-pointer hover:opacity-90 transition-opacity" loading="lazy"></div>'),Ua=O('<div><div><!> <div><span class="text-xs text-gray-500 dark:text-gray-400"> </span> <!></div></div></div>');function Fa(e,t){ge(t,!0);var r=Ua(),n=h(r),i=h(n);{var a=f=>{var v=ja(),g=h(v);H(()=>{J(v,`inline-block rounded-2xl px-4 py-2 ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 text-white rounded-br-none":"bg-blue-500 text-white rounded-br-none")??""} shadow-sm break-words whitespace-pre-wrap overflow-hidden svelte-sjx01p`),ie(g,t.message.content.data)}),T(f,v)},s=f=>{var v=se(),g=Y(v);{var y=C=>{var x=za(),b=h(x);b.__click=[La,t],H(()=>{J(x,`p-1 rounded-xl ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 rounded-br-none":"bg-blue-500 rounded-br-none")??""} shadow-sm`),Wt(b,"src",t.message.content.data)}),Ye("load",b,function(...w){var N;(N=t.onImageLoad)==null||N.apply(this,w)}),ta(b),T(C,x)};M(g,C=>{t.message.content.type==="Image"&&C(y)},!0)}T(f,v)};M(i,f=>{t.message.content.type==="Text"?f(a):f(s,!1)})}var o=I(i,2),u=h(o),c=h(u),l=I(u,2);{var d=f=>{ya(f,{class:"size-3 text-red-500"})};M(l,f=>{t.message.status==="failed"&&f(d)})}H(()=>{J(r,`flex ${(t.isReceived?"justify-start":"justify-end")??""} animate-fadeIn`),J(n,`flex flex-col ${(t.message.content.type==="Text"?"max-w-[70%]":"w-[60%]")??""} gap-0.5`),J(o,`flex items-center gap-1 px-1 ${(t.isReceived?"justify-start":"justify-end")??""}`),ie(c,t.message.timestamp)}),T(e,r),he()}Ie(["click"]);var Ma=O('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10"><div><span> </span> <button class="ml-2 p-1 hover:bg-black/20 rounded-full transition-colors" aria-label="Dismiss"><!></button></div></div>');function Cn(e,t){ge(t,!0);let r=ce(t,"type",3,"error"),n=ce(t,"duration",3,3e3);ce(t,"key",3,0);let i=W(!0),a;Te(()=>(k(i,!0),a&&clearTimeout(a),a=setTimeout(()=>{s()},n()),()=>{a&&clearTimeout(a)}));function s(){var l;k(i,!1),a&&clearTimeout(a),(l=t.onClose)==null||l.call(t)}var o=se(),u=Y(o);{var c=l=>{var d=Ma(),f=h(d),v=h(f),g=h(v),y=I(v,2);y.__click=s;var C=h(y);Sr(C,{class:"size-4"}),H(()=>{J(f,`px-4 py-2 rounded-lg shadow-lg ${(r()==="error"?"bg-red-500":"bg-green-500")??""} text-white flex items-center gap-2`),ie(g,t.message)}),T(l,d)};M(u,l=>{_(i)&&l(c)})}T(e,o),he()}Ie(["click"]);function qa(e,t,r){k(t,null),k(r,null)}function Ba(e,t){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())}var $a=O('<div class="absolute inset-5 backdrop-blur-sm bg-blue-100/70 dark:bg-blue-900/70 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center z-10 pointer-events-none"><p class="text-blue-600 dark:text-blue-400 font-medium">Release here to attach image</p></div>'),Va=O('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),Wa=O('<button class="absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"><!></button>'),Ha=O('<div class="p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="relative inline-block"><img alt="Preview"> <!></div></div>'),Ka=O('<div class="w-full h-[450px] flex flex-col"><div class="p-4 border-b border-gray-100 dark:border-gray-700"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"><!> </h3> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div></div> <div class="relative flex-1 overflow-hidden"><!> <div class="chat-box absolute inset-0 overflow-y-auto space-y-4 p-4 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"></div></div> <!> <div class="p-4 border-t border-gray-100 dark:border-gray-700"><div class="flex gap-2"><input type="file" accept="image/*" class="hidden"> <button class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors" title="Attach image"><!></button> <div class="relative flex-1"><input type="text" class="message-input w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" placeholder="Write a message..."> <!></div> <button class="send-button p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center"><!></button></div></div></div> <!>',1);function Ya(e,t){ge(t,!0);const r=Ct(),n=()=>ne(Ue,"$clientUsers",r),i=()=>ne(bt,"$messages",r);let a=W(void 0),s=W(""),o,u,c=!0,l=W(!1),d=W(""),f=W(0);const v=Se(()=>{var S;return((S=n()[t.clientId])==null?void 0:S.users.find(L=>L.id===t.destinationId))??{id:t.destinationId,name:`Client ${t.destinationId}`}}),g=()=>{o&&(o.scrollTop=o.scrollHeight)};function y(){setTimeout(g,60)}mi(()=>{o&&g()}),Te(()=>{i()[Et(t.clientId,t.destinationId)]&&c&&setTimeout(g,60)}),Te(()=>{c=!0,t.destinationId,setTimeout(g,0)});const C=()=>{if(!o)return;c=Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=1};let x=W(null),b=W(null),w,N=W(!1);async function p(S){var Q;const L=S.target,V=(Q=L.files)==null?void 0:Q[0];V&&tr(V)&&(k(x,$(await er(V))),k(b,$(_(x)))),L.value=""}async function m(S){var V;const L=(V=S.clipboardData)==null?void 0:V.items;if(L){for(const Q of L)if(Q.kind==="file"){const dt=Q.getAsFile();if(dt&&tr(dt)){S.preventDefault(),k(x,$(await er(dt))),k(b,$(_(x)));return}}}}async function j(){if(!(!_(x)&&!_(s).trim()))try{_(x)&&(k(N,!0),await Br(t.clientId,t.destinationId,_(x),"Image"),k(x,null),k(b,null),k(N,!1)),_(s).trim()&&(await Br(t.clientId,t.destinationId,_(s),"Text"),k(s,""),_(a)&&(_(a).value="")),c=!0,setTimeout(()=>{g(),setTimeout(g,50)},60)}catch(S){k(N,!1),console.error(S),k(d,"Failed to send message. Please try again."),ur(f),k(l,!0)}}function P(S){var V;const L=((V=_(a))==null?void 0:V.selectionStart)??_(s).length;k(s,_(s).slice(0,L)+S+_(s).slice(L)),setTimeout(()=>{if(_(a)){const Q=L+S.length;_(a).setSelectionRange(Q,Q),_(a).focus()}},0)}let D=W(!1);function F(S){S.preventDefault(),S.stopPropagation(),k(D,!0)}function Z(S){const L=o.getBoundingClientRect(),V=S.clientX,Q=S.clientY;(V<=L.left||V>=L.right||Q<=L.top||Q>=L.bottom)&&k(D,!1)}async function G(S){var V;S.preventDefault(),k(D,!1);const L=(V=S.dataTransfer)==null?void 0:V.files[0];L&&tr(L)&&(k(x,$(await er(L))),k(b,$(_(x))))}var ee=Ka(),q=Y(ee),B=h(q),E=h(B),A=h(E),K=h(A);Sn(K,{class:"size-5 text-gray-600 dark:text-gray-300"});var oe=I(K),ut=I(A,2),Be=h(ut),Ce=I(B,2),ye=h(Ce);{var Pn=S=>{var L=$a();T(S,L)};M(ye,S=>{_(D)&&S(Pn)})}var $e=I(ye,2);ot($e,5,()=>i()[Et(t.clientId,t.destinationId)]||[],st,(S,L)=>{var V=Se(()=>_(L).sender_id!==t.clientId);Fa(S,{get message(){return _(L)},get isReceived(){return _(V)},get onImageClick(){return t.onImageClick},onImageLoad:y})}),Ge($e,S=>o=S,()=>o),Ge(Ce,S=>u=S,()=>u);var Cr=I(Ce,2);{var An=S=>{var L=Ha(),V=h(L),Q=h(V),dt=I(Q,2);{var Fn=Ve=>{var We=Va(),Gt=h(We);tt(Gt,{class:"size-8 text-blue-500 animate-spin"}),T(Ve,We)},Mn=Ve=>{var We=Wa();We.__click=[qa,x,b];var Gt=h(We);Sr(Gt,{class:"size-4"}),T(Ve,We)};M(dt,Ve=>{_(N)?Ve(Fn):Ve(Mn,!1)})}H(()=>{Wt(Q,"src",_(b)),J(Q,`max-h-48 rounded-lg ${(_(N)?"opacity-50":"")??""}`)}),T(S,L)};M(Cr,S=>{_(b)&&S(An)})}var Rn=I(Cr,2),Dn=h(Rn),Kt=h(Dn);Kt.__change=p,Ge(Kt,S=>w=S,()=>w);var Yt=I(Kt,2);Yt.__click=()=>w.click();var On=h(Yt);ga(On,{class:"size-5"});var Nr=I(Yt,2),ct=h(Nr);ct.__keydown=[Ba,j],Ge(ct,S=>k(a,S),()=>_(a));var jn=I(ct,2);Oa(jn,{get inputElement(){return _(a)},onEmojiSelect:P});var Pr=I(Nr,2);Pr.__click=j;var Ln=h(Pr);ha(Ln,{class:"size-5"});var zn=I(q,2);{var Un=S=>{Cn(S,{get message(){return _(d)},type:"error",onClose:()=>k(l,!1),get key(){return _(f)}})};M(zn,S=>{_(l)&&S(Un)})}H(()=>{ie(oe,` ${_(v).name??""}`),ie(Be,`ID: ${_(v).id??""}`)}),Ye("scroll",$e,C),Ye("dragover",$e,F),Ye("dragleave",$e,Z),Ye("drop",$e,G),Ye("paste",ct,m),En(ct,()=>_(s),S=>k(s,S)),T(e,ee),he()}Ie(["click","change","keydown"]);async function Nn(e){try{const t=Ae(rt)[e];if(!(await fetch(`/api/registered-users?client_id=${e}&server_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to request registered users")}catch(t){console.error("Error requesting registered users:",t)}}var Ga=e=>e.stopPropagation(),Ja=O('<div><div class="relative w-[80%] h-[80%] flex items-center justify-center"><div class="relative w-full h-full flex items-center justify-center"><img alt="Full size" class="rounded-lg shadow-xl min-w-[300px] min-h-[300px] w-auto h-auto max-w-full max-h-full object-contain"> <div class="absolute -top-4 -right-4 flex gap-2"><button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button> <button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button></div></div></div></div>');function Xa(e,t){ge(t,!0);let r=ce(t,"containerClass",3,"");function n(g){g.key==="Escape"&&t.onClose()}function i(){const g=document.createElement("a");g.href=t.src,g.download=`image-${Date.now()}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g)}lt(()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}));var a=Ja();a.__click=function(...g){var y;(y=t.onClose)==null||y.apply(this,g)};var s=h(a);s.__click=[Ga];var o=h(s),u=h(o),c=I(u,2),l=h(c);l.__click=i;var d=h(l);fa(d,{class:"size-5"});var f=I(l,2);f.__click=function(...g){var y;(y=t.onClose)==null||y.apply(this,g)};var v=h(f);Sr(v,{class:"size-5"}),H(()=>{J(a,`absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm ${r()??""}`),Wt(u,"src",t.src)}),T(e,a),he()}Ie(["click"]);async function Za(e,t){Ia(t.clientId,!0),await Nn(t.clientId)}var Qa=O('<div class="flex justify-center py-4"><div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div></div>'),es=(e,t,r)=>t(_(r).id),ts=O('<span class="absolute right-2 top-1/2 -translate-y-1/2 min-w-[20px] h-5 flex items-center justify-center bg-blue-500 text-white text-xs rounded-full px-1.5"> </span>'),rs=O("<button><!> <span> </span> <!></button>"),ns=O('<div class="space-y-2"></div>'),is=O('<div class="relative flex-1"><!> <!></div>'),as=O('<div class="flex items-center justify-center w-full h-[450px]"><p class="text-gray-500 dark:text-gray-400">Select a user to start chatting</p></div>'),ss=O(`<div class="flex w-full"><div class="w-52 bg-white dark:bg-gray-800 border-r border-gray-300 dark:border-gray-700 overflow-hidden"><div class="p-2 border-b border-gray-300 dark:border-gray-700"><button class="w-full px-3 py-2 flex items-center justify-center gap-2 text-sm
                       bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500
                       rounded-lg transition-colors text-gray-800 dark:text-white"><span>Refresh Users</span> <!></button></div> <div class="px-3 py-2"><!></div></div> <!></div>`);function os(e,t){ge(t,!0);const r=Ct(),n=()=>ne(Ue,"$clientUsers",r),i=()=>ne(Ht,"$unreadMessages",r);let a=ce(t,"destinationId",31,()=>-1);lt(()=>{ka(t.clientId),Nn(t.clientId)});let s=W(null);Te(()=>{yt.update(p=>({...p,[t.clientId]:a()})),a()!==-1&&wa(t.clientId,a()),k(s,null)});function o(p){a(p)}var u=ss(),c=h(u),l=h(c),d=h(l);d.__click=[Za,t];var f=I(h(d),2);{var v=p=>{tt(p,{class:"size-4 animate-spin"})};M(f,p=>{var m;(m=n()[t.clientId])!=null&&m.isRefreshing&&p(v)})}var g=I(l,2),y=h(g);{var C=p=>{var m=Qa();T(p,m)},x=p=>{var m=ns();ot(m,5,()=>{var j;return((j=n()[t.clientId])==null?void 0:j.users)||[]},st,(j,P)=>{var D=rs();D.__click=[es,o,P];var F=h(D),Z=Se(()=>`size-5 ${(a()===_(P).id?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300")??""}`);Sn(F,{get class(){return _(Z)}});var G=I(F,2),ee=h(G),q=I(G,2);{var B=E=>{var A=ts(),K=h(A);H(()=>ie(K,i()[t.clientId][_(P).id])),T(E,A)};M(q,E=>{var A;(((A=i()[t.clientId])==null?void 0:A[_(P).id])??0)>0&&E(B)})}H(()=>{J(D,`w-full p-2 rounded cursor-pointer transition-colors flex items-center gap-2 relative
                                   ${(a()===_(P).id?"bg-blue-100 dark:bg-blue-900":"hover:bg-gray-100 dark:hover:bg-gray-700")??""}`),J(G,a()===_(P).id?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-800 dark:text-gray-100"),ie(ee,_(P).name)}),T(j,D)}),T(p,m)};M(y,p=>{var m;(m=n()[t.clientId])!=null&&m.isLoading?p(C):p(x,!1)})}var b=I(c,2);{var w=p=>{var m=is(),j=h(m);Ya(j,{get clientId(){return t.clientId},get destinationId(){return a()},onImageClick:F=>k(s,$(F))});var P=I(j,2);{var D=F=>{Xa(F,{get src(){return _(s)},onClose:()=>k(s,null)})};M(P,F=>{_(s)&&F(D)})}T(p,m)},N=p=>{var m=as();T(p,m)};M(b,p=>{a()!==-1?p(w):p(N,!1)})}T(e,u),he()}Ie(["click"]);function ls(e,t,r,n){e.key==="Enter"&&_(t).trim()?(e.preventDefault(),r()):e.key==="Escape"&&(e.preventDefault(),n())}function us(e,t,r,n){if(_(t).length>0){const i=Math.floor(Math.random()*_(t).length);k(r,$(_(t)[i])),k(n,!0)}}var cs=O('<div class="flex items-center justify-center w-full h-[450px]"><div class="text-center"><!> <p class="text-gray-600 dark:text-gray-300">Registering to server...</p></div></div>'),ds=(e,t,r,n)=>{k(t,$(_(r))),k(n,!0)},fs=O("<button> </button>"),vs=O(`<div class="flex justify-center pt-4"><button class="px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg
                                   transition-all hover:bg-blue-700 dark:hover:bg-blue-600
                                   hover:shadow-md w-full sm:w-auto">Connect to Random Server</button></div>`),_s=O(`<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full"><h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"> </h2> <input type="text" placeholder="Enter your username" class="w-full p-3 mb-4 border rounded-lg dark:bg-gray-700 dark:text-gray-200
                               focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <div class="flex justify-end gap-3"><button class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">Cancel</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors
                                   disabled:opacity-50 disabled:cursor-not-allowed">Join Server</button></div></div></div>`),gs=O(`<div class="flex items-center justify-center flex-col w-full h-[450px] p-6"><div class="w-full max-w-md space-y-6"><div class="flex items-center justify-between"><h2 class="text-xl font-semibold text-gray-700 dark:text-gray-300">Available Servers</h2> <button class="inline-flex items-center justify-center px-3 py-2 rounded-lg
                               bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
                               transition-colors gap-2 text-gray-700 dark:text-gray-300"><span class="text-sm font-medium">Refresh</span> <!></button></div> <div></div> <!></div></div> <!>`,1),hs=O('<div class="flex w-full relative"><!></div>');function bs(e,t){ge(t,!0);const r=Ct(),n=()=>ne(pt,"$pendingRegistrations",r);let i=W($([])),a=W(!1),s=W(-1),o=W(""),u=W(!1),c;async function l(){k(u,!0);try{let x=await fetch(`/api/servers?id=${t.clientId}`);k(i,$(await x.json())),console.log("Servers: ",_(i).join(", "))}catch(x){console.error(x),k(i,$([1,2,3]))}finally{setTimeout(()=>{k(u,!1)},600)}}lt(async()=>{await l()}),Te(()=>{_(a)&&c&&c.focus()});async function d(){try{(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:_(s),username:_(o)})})).ok?(k(a,!1),Ot.update(b=>({...b,[t.clientId]:_(o)})),k(o,""),pt.update(b=>(b.add(t.clientId),b))):t.showToast(`Registration failed for Server ${_(s)}. Please try again.`,"error")}catch(x){console.error(x),t.showToast(`Registration failed for Server ${_(s)}. Please try again.`,"error")}}function f(){k(a,!1),k(o,"")}var v=hs(),g=h(v);{var y=x=>{var b=cs(),w=h(b),N=h(w);tt(N,{class:"size-8 animate-spin mx-auto mb-4 text-blue-500"}),T(x,b)},C=x=>{var b=gs(),w=Y(b),N=h(w),p=h(N),m=I(h(p),2);m.__click=l;var j=I(h(m),2),P=Se(()=>`size-5 ${(_(u)?"animate-spin":"hidden")??""}`);tt(j,{get class(){return _(P)}});var D=I(p,2);ot(D,21,()=>_(i),st,(q,B)=>{var E=fs();E.__click=[ds,s,B,a];var A=h(E);H(()=>{J(E,`flex items-center justify-center px-6 py-3
                                   bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600
                                   text-gray-800 dark:text-gray-200 rounded-lg transition-all
                                   hover:shadow-md border border-gray-300 dark:border-gray-600
                                   ${(_(i).length===1?"text-lg":"")??""}`),ie(A,`Server ${_(B)??""}`)}),T(q,E)});var F=I(D,2);{var Z=q=>{var B=vs(),E=h(B);E.__click=[us,i,s,a],T(q,B)};M(F,q=>{_(i).length>1&&q(Z)})}var G=I(w,2);{var ee=q=>{var B=_s(),E=h(B),A=h(E),K=h(A),oe=I(A,2);oe.__keydown=[ls,o,d,f],Ge(oe,ye=>c=ye,()=>c);var ut=I(oe,2),Be=h(ut);Be.__click=f;var Ce=I(Be,2);Ce.__click=d,H(()=>{ie(K,`Connect to Server ${_(s)??""}`),Ce.disabled=!_(o)}),En(oe,()=>_(o),ye=>k(o,ye)),T(q,B)};M(G,q=>{_(a)&&q(ee)})}H(()=>{m.disabled=_(u),J(D,`grid gap-3 ${(_(i).length===1?"":"sm:grid-cols-2")??""}`)}),T(x,b)};M(g,x=>{n().has(t.clientId)?x(y):x(C,!1)})}T(e,v),he()}Ie(["click","keydown"]);var ps=O('<button class="px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200 flex items-center gap-1 disabled:opacity-75"><!> Disconnect</button> <span class="text-xs text-gray-500 dark:text-gray-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full"> </span>',1),ys=O('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-200 relative"><div class="p-4 border-b border-gray-300 dark:border-gray-700"><div class="flex justify-between items-center"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100"> </h2></div> <div class="flex items-center gap-2"><!> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"> </span></div></div></div> <!> <!></div>');function ms(e,t){ge(t,!0);const r=Ct(),n=()=>ne(yt,"$currentChats",r),i=()=>ne(gt,"$userEvents",r),a=()=>ne(Je,"$isDisconnecting",r),s=()=>ne(rt,"$registrationStatus",r),o=()=>ne(Tr,"$connectionStatus",r),u=()=>ne(Ot,"$clientUsernames",r);let c=Se(()=>n()[t.clientId]??-1),l=W(null);Te(()=>{const E=i()[t.clientId];E&&k(l,$({message:E.message,type:E.type,key:Date.now()}))});function d(E,A){k(l,$({message:E,type:A,key:Date.now()}))}async function f(){if(!a()[t.clientId]){Je.update(E=>({...E,[t.clientId]:!0}));try{if(!(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:s()[t.clientId]})})).ok){Je.update(A=>({...A,[t.clientId]:!1}));return}_t.update(A=>(A.add(t.clientId),A))}catch(E){console.error("Error unregistering:",E),Je.update(A=>({...A,[t.clientId]:!1}))}}}var v=ys(),g=h(v),y=h(g),C=h(y),x=h(C),b=h(x),w=I(b,2),N=I(x,2),p=h(N),m=I(C,2),j=h(m);{var P=E=>{var A=ps(),K=Y(A);K.__click=f;var oe=h(K);{var ut=ye=>{tt(ye,{class:"size-3 animate-spin"})};M(oe,ye=>{a()[t.clientId]&&ye(ut)})}var Be=I(K,2),Ce=h(Be);H(()=>{K.disabled=a()[t.clientId],ie(Ce,`Server ${s()[t.clientId]??""}`)}),T(E,A)};M(j,E=>{s()[t.clientId]&&E(P)})}var D=I(j,2),F=h(D),Z=I(g,2);{var G=E=>{os(E,{get clientId(){return t.clientId},get destinationId(){return _(c)}})},ee=E=>{bs(E,{get clientId(){return t.clientId},showToast:d})};M(Z,E=>{s()[t.clientId]?E(G):E(ee,!1)})}var q=I(Z,2);{var B=E=>{Cn(E,{get message(){return _(l).message},get type(){return _(l).type},onClose:()=>k(l,null),get key(){return _(l).key}})};M(q,E=>{_(l)&&E(B)})}H(()=>{J(b,`status-indicator w-3 h-3 ${(o()?"bg-green-500":"bg-red-500")??""} rounded-full`),J(w,`status-ping w-3 h-3 ${(o()?"bg-green-500 animate-ping":"bg-red-500")??""} rounded-full absolute inset-0`),ie(p,u()[t.clientId]||`Chat ${t.clientId}`),ie(F,`ID: ${t.clientId??""}`)}),T(e,v),he()}Ie(["click"]);function xs(){const e=localStorage.getItem("theme");e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}async function ws(){xs();try{const t=await(await fetch("/api/clients")).json();t.sort(),t.forEach(r=>{fr.set(new Set([...Ae(fr),r]))})}catch(e){console.error("Error loading active_clients:",e)}Tn()}var ks=O('<button class="ml-2 px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors duration-200">Reconnect</button>'),Es=()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")},Is=O('<div class="fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50 transition-opacity duration-500"><div class="text-center flex flex-col gap-4 items-center justify-center"><!> <p class="text-gray-600 dark:text-gray-300">Loading chats...</p></div></div>'),Ss=O('<div class="container mx-auto p-4 lg:p-6"><div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"><div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="flex items-center gap-3"><div class="bg-blue-500 p-2 rounded-lg"><!></div> <div><h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Clients - AP 24/25</h1> <p class="text-sm text-gray-500 dark:text-gray-400">Clients UI for Advanced Programming Project</p></div></div> <div class="flex items-center gap-6"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <span class="text-sm text-gray-600 dark:text-gray-300"> </span> <!></div> <div class="h-8 w-px bg-gray-200 dark:bg-gray-700"></div> <div class="flex items-center gap-3"><!> <button id="theme-toggle" aria-label="Change theme" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><span class="inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-200 translate-x-[2px] dark:translate-x-5"></span></button> <!></div></div></div></div> <div id="chat-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"></div></div> <!>',1);function Ts(e,t){ge(t,!0);const r=Ct(),n=()=>ne(fr,"$displayedChats",r),i=()=>ne(rt,"$registrationStatus",r),a=()=>ne(Tr,"$connectionStatus",r);let s=W(!0);lt(async()=>{await ws(),setTimeout(()=>{k(s,!1)},800),window.addEventListener("beforeunload",o)}),oa(()=>{window.removeEventListener("beforeunload",o),u()});function o(E){u()}function u(){console.error("Unregistering clients..."),n().forEach(E=>{fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:E,server_id:i()[E]})})}),console.warn("Clients unregistered.")}var c=Ss(),l=Y(c),d=h(l),f=h(d),v=h(f),g=h(v),y=h(g);va(y,{class:"size-5 text-white"});var C=I(v,2),x=h(C),b=h(x),w=h(b),N=I(w,2),p=I(b,2),m=h(p),j=I(p,2);{var P=E=>{var A=ks();A.__click=function(...K){Zt==null||Zt.apply(this,K)},T(E,A)};M(j,E=>{a()||E(P)})}var D=I(x,4),F=h(D);pa(F,{class:"size-5 dark:text-gray-200"});var Z=I(F,2);Z.__click=[Es];var G=I(Z,2);_a(G,{class:"size-5 dark:text-gray-200"});var ee=I(d,2);ot(ee,5,n,st,(E,A)=>{ms(E,{get clientId(){return _(A)}})});var q=I(l,2);{var B=E=>{var A=Is(),K=h(A),oe=h(K);tt(oe,{class:"w-16 h-16 text-blue-500 animate-spin mb-4"}),T(E,A)};M(q,E=>{_(s)&&E(B)})}H(()=>{J(w,`w-3 h-3 rounded-full transition-colors duration-200 ${(a()?"bg-green-500":"bg-red-500")??""}`),J(N,`w-3 h-3 absolute inset-0 rounded-full transition-colors duration-200 ${(a()?"bg-green-500 animate-ping":"bg-red-500")??""}`),ie(m,a()?"Online":"Offline")}),T(e,c),he()}Ie(["click"]);Hi(Ts,{target:document.getElementById("app")});
