(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();const Lr=!1;var hr=Array.isArray,Jn=Array.prototype.indexOf,pr=Array.from,Gr=Object.defineProperty,Le=Object.getOwnPropertyDescriptor,Jr=Object.getOwnPropertyDescriptors,Xn=Object.prototype,Zn=Array.prototype,br=Object.getPrototypeOf;function gt(e){return typeof e=="function"}const et=()=>{};function Qn(e){return e()}function ar(e){for(var t=0;t<e.length;t++)e[t]()}const oe=2,Xr=4,Ct=8,yr=16,Se=32,qe=64,Ot=128,Be=256,jt=512,ee=1024,Re=2048,st=4096,xe=8192,lt=16384,ei=32768,$t=65536,ti=1<<17,ri=1<<19,Zr=1<<20,ze=Symbol("$state"),Qr=Symbol("legacy props"),sr=Symbol("");function en(e){return e===this.v}function tn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function mr(e){return!tn(e,this.v)}function ni(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ii(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ai(e){throw new Error("https://svelte.dev/e/effect_orphan")}function si(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function li(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function oi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ui(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ci(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function di(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ot=!1,fi=!1;function vi(){ot=!0}const xr=1,wr=2,rn=4,_i=8,gi=16,hi=1,pi=2,nn=4,bi=8,yi=16,mi=1,xi=2,te=Symbol(),an="http://www.w3.org/2000/svg";function re(e,t){var r={f:0,v:e,reactions:null,equals:en,rv:0,wv:0};return r}function H(e){return wi(re(e))}function kr(e,t=!1){var n;const r=re(e);return t||(r.equals=mr),ot&&F!==null&&F.l!==null&&((n=F.l).s??(n.s=[])).push(r),r}function wi(e){return U!==null&&!Pe&&U.f&oe&&(we===null?Ri([e]):we.push(e)),e}function w(e,t){return U!==null&&!Pe&&Nt()&&U.f&(oe|yr)&&(we===null||!we.includes(e))&&di(),lr(e,t)}function lr(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=kn(),sn(e,Re),Nt()&&j!==null&&j.f&ee&&!(j.f&(Se|qe))&&(Ce===null?Di([e]):Ce.push(e))),t}function sn(e,t){var r=e.reactions;if(r!==null)for(var n=Nt(),i=r.length,a=0;a<i;a++){var s=r[a],l=s.f;l&Re||!n&&s===j||(_e(s,t),l&(ee|Be)&&(l&oe?sn(s,st):Kt(s)))}}let ln=!1;function V(e,t=null,r){if(typeof e!="object"||e===null||ze in e)return e;const n=br(e);if(n!==Xn&&n!==Zn)return e;var i=new Map,a=hr(e),s=re(0);a&&i.set("length",re(e.length));var l;return new Proxy(e,{defineProperty(o,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&oi();var c=i.get(u);return c===void 0?(c=re(f.value),i.set(u,c)):w(c,V(f.value,l)),!0},deleteProperty(o,u){var f=i.get(u);if(f===void 0)u in o&&i.set(u,re(te));else{if(a&&typeof u=="string"){var c=i.get("length"),d=Number(u);Number.isInteger(d)&&d<c.v&&w(c,d)}w(f,te),zr(s)}return!0},get(o,u,f){var g;if(u===ze)return e;var c=i.get(u),d=u in o;if(c===void 0&&(!d||(g=Le(o,u))!=null&&g.writable)&&(c=re(V(d?o[u]:te,l)),i.set(u,c)),c!==void 0){var v=_(c);return v===te?void 0:v}return Reflect.get(o,u,f)},getOwnPropertyDescriptor(o,u){var f=Reflect.getOwnPropertyDescriptor(o,u);if(f&&"value"in f){var c=i.get(u);c&&(f.value=_(c))}else if(f===void 0){var d=i.get(u),v=d==null?void 0:d.v;if(d!==void 0&&v!==te)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(o,u){var v;if(u===ze)return!0;var f=i.get(u),c=f!==void 0&&f.v!==te||Reflect.has(o,u);if(f!==void 0||j!==null&&(!c||(v=Le(o,u))!=null&&v.writable)){f===void 0&&(f=re(c?V(o[u],l):te),i.set(u,f));var d=_(f);if(d===te)return!1}return c},set(o,u,f,c){var m;var d=i.get(u),v=u in o;if(a&&u==="length")for(var g=f;g<d.v;g+=1){var p=i.get(g+"");p!==void 0?w(p,te):g in o&&(p=re(te),i.set(g+"",p))}d===void 0?(!v||(m=Le(o,u))!=null&&m.writable)&&(d=re(void 0),w(d,V(f,l)),i.set(u,d)):(v=d.v!==te,w(d,V(f,l)));var S=Reflect.getOwnPropertyDescriptor(o,u);if(S!=null&&S.set&&S.set.call(c,f),!v){if(a&&typeof u=="string"){var P=i.get("length"),h=Number(u);Number.isInteger(h)&&h>=P.v&&w(P,h+1)}zr(s)}return!0},ownKeys(o){_(s);var u=Reflect.ownKeys(o).filter(d=>{var v=i.get(d);return v===void 0||v.v!==te});for(var[f,c]of i)c.v!==te&&!(f in o)&&u.push(f);return u},setPrototypeOf(){ui()}})}function zr(e,t=1){w(e,e.v+t)}var Ur,on,un;function ki(){if(Ur===void 0){Ur=window;var e=Element.prototype,t=Node.prototype;on=Le(t,"firstChild").get,un=Le(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function qt(e=""){return document.createTextNode(e)}function rt(e){return on.call(e)}function Bt(e){return un.call(e)}function b(e,t){return rt(e)}function G(e,t){{var r=rt(e);return r instanceof Comment&&r.data===""?Bt(r):r}}function E(e,t=1,r=!1){let n=e;for(;t--;)n=Bt(n);return n}function Ei(e){e.textContent=""}function ke(e){var t=oe|Re;j===null?t|=Be:j.f|=Zr;var r=U!==null&&U.f&oe?U:null;const n={children:null,ctx:F,deps:null,equals:en,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??j};return r!==null&&(r.children??(r.children=[])).push(n),n}function Er(e){const t=ke(e);return t.equals=mr,t}function cn(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var n=t[r];n.f&oe?Ir(n):Ee(n)}}}function Ii(e){for(var t=e.parent;t!==null;){if(!(t.f&oe))return t;t=t.parent}return null}function dn(e){var t,r=j;Ie(Ii(e));try{cn(e),t=In(e)}finally{Ie(r)}return t}function fn(e){var t=dn(e),r=($e||e.f&Be)&&e.deps!==null?st:ee;_e(e,r),e.equals(t)||(e.v=t,e.wv=kn())}function Ir(e){cn(e),It(e,0),_e(e,lt),e.v=e.children=e.deps=e.ctx=e.reactions=null}function vn(e){j===null&&U===null&&ai(),U!==null&&U.f&Be&&ii(),Nr&&ni()}function Si(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ve(e,t,r,n=!0){var i=(e&qe)!==0,a=j,s={ctx:F,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|Re,first:null,fn:t,last:null,next:null,parent:i?null:a,prev:null,teardown:null,transitions:null,wv:0};if(r){var l=tt;try{Fr(!0),Pr(s),s.f|=ei}catch(f){throw Ee(s),f}finally{Fr(l)}}else t!==null&&Kt(s);var o=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Zr|Ot))===0;if(!o&&!i&&n&&(a!==null&&Si(s,a),U!==null&&U.f&oe)){var u=U;(u.children??(u.children=[])).push(s)}return s}function _n(e){const t=Ve(Ct,null,!1);return _e(t,ee),t.teardown=e,t}function Ae(e){vn();var t=j!==null&&(j.f&Se)!==0&&F!==null&&!F.m;if(t){var r=F;(r.e??(r.e=[])).push({fn:e,effect:j,reaction:U})}else{var n=Sr(e);return n}}function Ti(e){return vn(),Tr(e)}function Ci(e){const t=Ve(qe,e,!0);return()=>{Ee(t)}}function Ni(e){const t=Ve(qe,e,!0);return(r={})=>new Promise(n=>{r.outro?kt(t,()=>{Ee(t),n(void 0)}):(Ee(t),n(void 0))})}function Sr(e){return Ve(Xr,e,!1)}function Tr(e){return Ve(Ct,e,!0)}function K(e,t=[],r=ke){const n=t.map(r);return Vt(()=>e(...n.map(_)))}function Vt(e,t=0){return Ve(Ct|yr|t,e,!0)}function nt(e,t=!0){return Ve(Ct|Se,e,!0,t)}function gn(e){var t=e.teardown;if(t!==null){const r=Nr,n=U;Mr(!0),Ue(null);try{t.call(null)}finally{Mr(r),Ue(n)}}}function hn(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)Ir(t[r])}}function pn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var n=r.next;Ee(r,t),r=n}}function Pi(e){for(var t=e.first;t!==null;){var r=t.next;t.f&Se||Ee(t),t=r}}function Ee(e,t=!0){var r=!1;if((t||e.f&ri)&&e.nodes_start!==null){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var a=n===i?null:Bt(n);n.remove(),n=a}r=!0}pn(e,t&&!r),hn(e),It(e,0),_e(e,lt);var s=e.transitions;if(s!==null)for(const o of s)o.stop();gn(e);var l=e.parent;l!==null&&l.first!==null&&bn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function bn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function kt(e,t){var r=[];Cr(e,r,!0),yn(r,()=>{Ee(e),t&&t()})}function yn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Cr(e,t,r){if(!(e.f&xe)){if(e.f^=xe,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var n=e.first;n!==null;){var i=n.next,a=(n.f&$t)!==0||(n.f&Se)!==0;Cr(n,t,a?r:!1),n=i}}}function Et(e){mn(e,!0)}function mn(e,t){if(e.f&xe){e.f^=xe,e.f&ee||(e.f^=ee),Pt(e)&&(_e(e,Re),Kt(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&$t)!==0||(r.f&Se)!==0;mn(r,i?t:!1),r=n}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let or=!1,ur=[];function Ai(){or=!1;const e=ur.slice();ur=[],ar(e)}function Wt(e){or||(or=!0,queueMicrotask(Ai)),ur.push(e)}function xn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Dt=!1,Lt=!1,zt=null,tt=!1,Nr=!1;function Fr(e){tt=e}function Mr(e){Nr=e}let cr=[],yt=0;let U=null,Pe=!1;function Ue(e){U=e}let j=null;function Ie(e){j=e}let we=null;function Ri(e){we=e}let ne=null,le=0,Ce=null;function Di(e){Ce=e}let wn=1,Ut=0,$e=!1,F=null;function kn(){return++wn}function Nt(){return!ot||F!==null&&F.l===null}function Pt(e){var u;var t=e.f;if(t&Re)return!0;if(t&st){var r=e.deps,n=(t&Be)!==0;if(r!==null){var i,a,s=(t&jt)!==0,l=n&&j!==null&&!$e,o=r.length;if(s||l){for(i=0;i<o;i++)a=r[i],(s||!((u=a==null?void 0:a.reactions)!=null&&u.includes(e)))&&(a.reactions??(a.reactions=[])).push(e);s&&(e.f^=jt)}for(i=0;i<o;i++)if(a=r[i],Pt(a)&&fn(a),a.wv>e.wv)return!0}(!n||j!==null&&!$e)&&_e(e,ee)}return!1}function Oi(e,t){for(var r=t;r!==null;){if(r.f&Ot)try{r.fn(e);return}catch{r.f^=Ot}r=r.parent}throw Dt=!1,e}function ji(e){return(e.f&lt)===0&&(e.parent===null||(e.parent.f&Ot)===0)}function Ht(e,t,r,n){if(Dt){if(r===null&&(Dt=!1),ji(t))throw e;return}r!==null&&(Dt=!0);{Oi(e,t);return}}function En(e,t,r=0){var n=e.reactions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];a.f&oe?En(a,t,r+1):t===a&&(r===0?_e(a,Re):a.f&ee&&_e(a,st),Kt(a))}}function In(e){var v;var t=ne,r=le,n=Ce,i=U,a=$e,s=we,l=F,o=Pe,u=e.f;ne=null,le=0,Ce=null,U=u&(Se|qe)?null:e,$e=!tt&&(u&Be)!==0,we=null,F=e.ctx,Pe=!1,Ut++;try{var f=(0,e.fn)(),c=e.deps;if(ne!==null){var d;if(It(e,le),c!==null&&le>0)for(c.length=le+ne.length,d=0;d<ne.length;d++)c[le+d]=ne[d];else e.deps=c=ne;if(!$e)for(d=le;d<c.length;d++)((v=c[d]).reactions??(v.reactions=[])).push(e)}else c!==null&&le<c.length&&(It(e,le),c.length=le);if(Nt()&&Ce!==null&&!(e.f&(oe|st|Re)))for(d=0;d<Ce.length;d++)En(Ce[d],e);return i!==null&&Ut++,f}finally{ne=t,le=r,Ce=n,U=i,$e=a,we=s,F=l,Pe=o}}function Li(e,t){let r=t.reactions;if(r!==null){var n=Jn.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&t.f&oe&&(ne===null||!ne.includes(t))&&(_e(t,st),t.f&(Be|jt)||(t.f^=jt),It(t,0))}function It(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Li(e,r[n])}function Pr(e){var t=e.f;if(!(t&lt)){_e(e,ee);var r=j,n=F;j=e;try{t&yr?Pi(e):pn(e),hn(e),gn(e);var i=In(e);e.teardown=typeof i=="function"?i:null,e.wv=wn;var a=e.deps,s;Lr&&fi&&e.f&Re}catch(l){Ht(l,e,r,n||e.ctx)}finally{j=r}}}function zi(){if(yt>1e3){yt=0;try{si()}catch(e){if(zt!==null)Ht(e,zt,null);else throw e}}yt++}function Ui(e){var t=e.length;if(t!==0){zi();var r=tt;tt=!0;try{for(var n=0;n<t;n++){var i=e[n];i.f&ee||(i.f^=ee);var a=[];Sn(i,a),Fi(a)}}finally{tt=r}}}function Fi(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var n=e[r];if(!(n.f&(lt|xe)))try{Pt(n)&&(Pr(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?bn(n):n.fn=null))}catch(i){Ht(i,n,null,n.ctx)}}}function Mi(){if(Lt=!1,yt>1001)return;const e=cr;cr=[],Ui(e),Lt||(yt=0,zt=null)}function Kt(e){Lt||(Lt=!0,queueMicrotask(Mi)),zt=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(qe|Se)){if(!(r&ee))return;t.f^=ee}}cr.push(t)}function Sn(e,t){var r=e.first,n=[];e:for(;r!==null;){var i=r.f,a=(i&Se)!==0,s=a&&(i&ee)!==0,l=r.next;if(!s&&!(i&xe))if(i&Ct){if(a)r.f^=ee;else try{Pt(r)&&Pr(r)}catch(c){Ht(c,r,null,r.ctx)}var o=r.first;if(o!==null){r=o;continue}}else i&Xr&&n.push(r);if(l===null){let c=r.parent;for(;c!==null;){if(e===c)break e;var u=c.next;if(u!==null){r=u;continue e}c=c.parent}}r=l}for(var f=0;f<n.length;f++)o=n[f],t.push(o),Sn(o,t)}function _(e){var f;var t=e.f,r=(t&oe)!==0;if(r&&t&lt){var n=dn(e);return Ir(e),n}if(U!==null&&!Pe){we!==null&&we.includes(e)&&ci();var i=U.deps;e.rv<Ut&&(e.rv=Ut,ne===null&&i!==null&&i[le]===e?le++:ne===null?ne=[e]:ne.push(e))}else if(r&&e.deps===null)for(var a=e,s=a.parent,l=a;s!==null;)if(s.f&oe){var o=s;l=o,s=o.parent}else{var u=s;(f=u.deriveds)!=null&&f.includes(l)||(u.deriveds??(u.deriveds=[])).push(l);break}return r&&(a=e,Pt(a)&&fn(a)),e.v}function Fe(e){var t=Pe;try{return Pe=!0,e()}finally{Pe=t}}const $i=-7169;function _e(e,t){e.f=e.f&$i|t}function dr(e,t=1){var r=_(e),n=t===1?r++:r--;return w(e,r),n}function ge(e,t=!1,r){F={p:F,c:null,e:null,m:!1,s:e,x:null,l:null},ot&&!t&&(F.l={s:null,u:null,r1:[],r2:re(!1)})}function he(e){const t=F;if(t!==null){const s=t.e;if(s!==null){var r=j,n=U;t.e=null;try{for(var i=0;i<s.length;i++){var a=s[i];Ie(a.effect),Ue(a.reaction),Sr(a.fn)}}finally{Ie(r),Ue(n)}}F=t.p,t.m=!0}return{}}function qi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ze in e)fr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&ze in r&&fr(r)}}}function fr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{fr(e[n],t)}catch{}const r=br(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Jr(r);for(let i in n){const a=n[i].get;if(a)try{a.call(e)}catch{}}}}}function Bi(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Vi=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Wi(e){return Vi.includes(e)}const Hi={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Ki(e){return e=e.toLowerCase(),Hi[e]??e}const Yi=["touchstart","touchmove"];function Gi(e){return Yi.includes(e)}function Ji(e,t){if(t){const r=document.body;e.autofocus=!0,Wt(()=>{document.activeElement===r&&e.focus()})}}let $r=!1;function Xi(){$r||($r=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Tn(e){var t=U,r=j;Ue(null),Ie(null);try{return e()}finally{Ue(t),Ie(r)}}function Zi(e,t,r,n=r){e.addEventListener(t,()=>Tn(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),Xi()}const Cn=new Set,vr=new Set;function Nn(e,t,r,n={}){function i(a){if(n.capture||ht.call(t,a),!a.cancelBubble)return Tn(()=>r==null?void 0:r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Wt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Xe(e,t,r,n,i){var a={capture:n,passive:i},s=Nn(e,t,r,a);(t===document.body||t===window||t===document)&&_n(()=>{t.removeEventListener(e,s,a)})}function Te(e){for(var t=0;t<e.length;t++)Cn.add(e[t]);for(var r of vr)r(e)}function ht(e){var h;var t=this,r=t.ownerDocument,n=e.type,i=((h=e.composedPath)==null?void 0:h.call(e))||[],a=i[0]||e.target,s=0,l=e.__root;if(l){var o=i.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;o<=u&&(s=o)}if(a=i[s]||e.target,a!==t){Gr(e,"currentTarget",{configurable:!0,get(){return a||r}});var f=U,c=j;Ue(null),Ie(null);try{for(var d,v=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var p=a["__"+n];if(p!==void 0&&!a.disabled)if(hr(p)){var[S,...P]=p;S.apply(a,[e,...P])}else p.call(a,e)}catch(m){d?v.push(m):d=m}if(e.cancelBubble||g===t||g===null)break;a=g}if(d){for(let m of v)queueMicrotask(()=>{throw m});throw d}}finally{e.__root=t,delete e.currentTarget,Ue(f),Ie(c)}}}function Pn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function St(e,t){var r=j;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function O(e,t){var r=(t&mi)!==0,n=(t&xi)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=Pn(a?e:"<!>"+e),r||(i=rt(i)));var s=n?document.importNode(i,!0):i.cloneNode(!0);if(r){var l=rt(s),o=s.lastChild;St(l,o)}else St(s,s);return s}}function Qi(e,t,r="svg"){var n=!e.startsWith("<!>"),i=`<${r}>${n?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var s=Pn(i),l=rt(s);a=rt(l)}var o=a.cloneNode(!0);return St(o,o),o}}function se(){var e=document.createDocumentFragment(),t=document.createComment(""),r=qt();return e.append(t,r),St(t,r),e}function T(e,t){e!==null&&e.before(t)}function ae(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function ea(e,t){return ta(e,t)}const Ge=new Map;function ta(e,{target:t,anchor:r,props:n={},events:i,context:a,intro:s=!0}){ki();var l=new Set,o=c=>{for(var d=0;d<c.length;d++){var v=c[d];if(!l.has(v)){l.add(v);var g=Gi(v);t.addEventListener(v,ht,{passive:g});var p=Ge.get(v);p===void 0?(document.addEventListener(v,ht,{passive:g}),Ge.set(v,1)):Ge.set(v,p+1)}}};o(pr(Cn)),vr.add(o);var u=void 0,f=Ni(()=>{var c=r??t.appendChild(qt());return nt(()=>{if(a){ge({});var d=F;d.c=a}i&&(n.$$events=i),u=e(c,n)||{},a&&he()}),()=>{var g;for(var d of l){t.removeEventListener(d,ht);var v=Ge.get(d);--v===0?(document.removeEventListener(d,ht),Ge.delete(d)):Ge.set(d,v)}vr.delete(o),c!==r&&((g=c.parentNode)==null||g.removeChild(c))}});return ra.set(u,f),u}let ra=new WeakMap;function M(e,t,r=!1){var n=e,i=null,a=null,s=te,l=r?$t:0,o=!1;const u=(c,d=!0)=>{o=!0,f(d,c)},f=(c,d)=>{s!==(s=c)&&(s?(i?Et(i):d&&(i=nt(()=>d(n))),a&&kt(a,()=>{a=null})):(a?Et(a):d&&(a=nt(()=>d(n))),i&&kt(i,()=>{i=null})))};Vt(()=>{o=!1,t(u),o||f(null,null)},l)}function ut(e,t){return t}function na(e,t,r,n){for(var i=[],a=t.length,s=0;s<a;s++)Cr(t[s].e,i,!0);var l=a>0&&i.length===0&&r!==null;if(l){var o=r.parentNode;Ei(o),o.append(r),n.clear(),je(e,t[0].prev,t[a-1].next)}yn(i,()=>{for(var u=0;u<a;u++){var f=t[u];l||(n.delete(f.k),je(e,f.prev,f.next)),Ee(f.e,!l)}})}function ct(e,t,r,n,i,a=null){var s=e,l={flags:t,items:new Map,first:null},o=(t&rn)!==0;if(o){var u=e;s=u.appendChild(qt())}var f=null,c=!1,d=Er(()=>{var v=r();return hr(v)?v:v==null?[]:pr(v)});Vt(()=>{var v=_(d),g=v.length;if(!(c&&g===0)){c=g===0;{var p=U;ia(v,l,s,i,t,(p.f&xe)!==0,n,r)}a!==null&&(g===0?f?Et(f):f=nt(()=>a(s)):f!==null&&kt(f,()=>{f=null})),_(d)}})}function ia(e,t,r,n,i,a,s,l){var q,B,k,R;var o=(i&_i)!==0,u=(i&(xr|wr))!==0,f=e.length,c=t.items,d=t.first,v=d,g,p=null,S,P=[],h=[],m,C,x,y;if(o)for(y=0;y<f;y+=1)m=e[y],C=s(m,y),x=c.get(C),x!==void 0&&((q=x.a)==null||q.measure(),(S??(S=new Set)).add(x));for(y=0;y<f;y+=1){if(m=e[y],C=s(m,y),x=c.get(C),x===void 0){var A=v?v.e.nodes_start:r;p=sa(A,t,p,p===null?t.first:p.next,m,C,y,n,i,l),c.set(C,p),P=[],h=[],v=p.next;continue}if(u&&aa(x,m,y,i),x.e.f&xe&&(Et(x.e),o&&((B=x.a)==null||B.unfix(),(S??(S=new Set)).delete(x))),x!==v){if(g!==void 0&&g.has(x)){if(P.length<h.length){var N=h[0],D;p=N.prev;var z=P[0],$=P[P.length-1];for(D=0;D<P.length;D+=1)qr(P[D],N,r);for(D=0;D<h.length;D+=1)g.delete(h[D]);je(t,z.prev,$.next),je(t,p,z),je(t,$,N),v=N,p=$,y-=1,P=[],h=[]}else g.delete(x),qr(x,v,r),je(t,x.prev,x.next),je(t,x,p===null?t.first:p.next),je(t,p,x),p=x;continue}for(P=[],h=[];v!==null&&v.k!==C;)(a||!(v.e.f&xe))&&(g??(g=new Set)).add(v),h.push(v),v=v.next;if(v===null)continue;x=v}P.push(x),p=x,v=x.next}if(v!==null||g!==void 0){for(var J=g===void 0?[]:pr(g);v!==null;)(a||!(v.e.f&xe))&&J.push(v),v=v.next;var Z=J.length;if(Z>0){var ce=i&rn&&f===0?r:null;if(o){for(y=0;y<Z;y+=1)(k=J[y].a)==null||k.measure();for(y=0;y<Z;y+=1)(R=J[y].a)==null||R.fix()}na(t,J,ce,c)}}o&&Wt(()=>{var Y;if(S!==void 0)for(x of S)(Y=x.a)==null||Y.apply()}),j.first=t.first&&t.first.e,j.last=p&&p.e}function aa(e,t,r,n){n&xr&&lr(e.v,t),n&wr?lr(e.i,r):e.i=r}function sa(e,t,r,n,i,a,s,l,o,u){var f=(o&xr)!==0,c=(o&gi)===0,d=f?c?kr(i):re(i):i,v=o&wr?re(s):s,g={i:v,v:d,k:a,a:null,e:null,prev:r,next:n};try{return g.e=nt(()=>l(e,d,v,u),ln),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function qr(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==n;){var s=Bt(a);i.before(a),a=s}}function je(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function fe(e,t,r,n,i){var l;var a=(l=t.$$slots)==null?void 0:l[r],s=!1;a===!0&&(a=t.children,s=!0),a===void 0||a(e,s?()=>n:n)}function la(e,t,r,n,i,a){var s,l,o=null,u=e,f;Vt(()=>{const c=t()||null;var d=an;c!==s&&(f&&(c===null?kt(f,()=>{f=null,l=null}):c===l?Et(f):Ee(f)),c&&c!==l&&(f=nt(()=>{o=document.createElementNS(d,c),St(o,o);{var v=o.appendChild(qt());n(o,v)}j.nodes_end=o,u.before(o)})),s=c,s&&(l=s))},$t)}function An(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=An(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function oa(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=An(e))&&(n&&(n+=" "),n+=t);return n}function ua(e){return typeof e=="object"?oa(e):e??""}function ca(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Yt(e,t,r,n){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[sr]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Rn(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Br(e,t,r,n,i=!1,a=!1,s=!1){var l=t||{},o=e.tagName==="OPTION";for(var u in t)u in r||(r[u]=null);r.class&&(r.class=ua(r.class));var f=Rn(e),c=e.__attributes??(e.__attributes={});for(const h in r){let m=r[h];if(o&&h==="value"&&m==null){e.value=e.__value="",l[h]=m;continue}var d=l[h];if(m!==d){l[h]=m;var v=h[0]+h[1];if(v!=="$$"){if(v==="on"){const C={},x="$$"+h;let y=h.slice(2);var g=Wi(y);if(Bi(y)&&(y=y.slice(0,-7),C.capture=!0),!g&&d){if(m!=null)continue;e.removeEventListener(y,l[x],C),l[x]=null}if(m!=null)if(g)e[`__${y}`]=m,Te([y]);else{let A=function(N){l[h].call(this,N)};var P=A;l[x]=Nn(y,e,A,C)}else g&&(e[`__${y}`]=void 0)}else if(h==="style"&&m!=null)e.style.cssText=m+"";else if(h==="autofocus")Ji(e,!!m);else if(h==="__value"||h==="value"&&m!=null)e.value=e[h]=e.__value=m;else if(h==="selected"&&o)ca(e,m);else{var p=h;i||(p=Ki(p));var S=p==="defaultValue"||p==="defaultChecked";if(m==null&&!a&&!S)if(c[h]=null,p==="value"||p==="checked"){let C=e;if(p==="value"){let x=C.defaultValue;C.removeAttribute(p),C.defaultValue=x}else{let x=C.defaultChecked;C.removeAttribute(p),C.defaultChecked=x}}else e.removeAttribute(h);else S||f.includes(p)&&(a||typeof m!="string")?e[p]=m:typeof m!="function"&&Yt(e,p,m)}h==="style"&&"__styles"in e&&(e.__styles={})}}}return l}var Vr=new Map;function Rn(e){var t=Vr.get(e.nodeName);if(t)return t;Vr.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=Jr(n);for(var a in r)r[a].set&&t.push(a);n=br(n)}return t}function da(e){if(e.loading==="lazy"){var t=e.src;e[sr]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[sr]!=="eager"&&(e.loading="lazy"),e.src=t})}}function X(e,t,r){var n=e.__className,i=fa(t);(n!==i||ln)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function fa(e,t){return(e??"")+""}function Dn(e,t,r=t){var n=Nt();Zi(e,"input",i=>{var a=i?e.defaultValue:e.value;if(a=Qt(e)?er(a):a,r(a),n&&a!==(a=t())){var s=e.selectionStart,l=e.selectionEnd;e.value=a??"",l!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(l,e.value.length))}}),Fe(t)==null&&e.value&&r(Qt(e)?er(e.value):e.value),Tr(()=>{var i=t();Qt(e)&&i===er(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Qt(e){var t=e.type;return t==="number"||t==="range"}function er(e){return e===""?null:+e}function Wr(e,t){return e===t||(e==null?void 0:e[ze])===t}function Ze(e={},t,r,n){return Sr(()=>{var i,a;return Tr(()=>{i=a,a=[],Fe(()=>{e!==r(...a)&&(t(e,...a),i&&Wr(r(...i),e)&&t(null,...i))})}),()=>{Wt(()=>{a&&Wr(r(...a),e)&&t(null,...a)})}}),e}function va(e=!1){const t=F,r=t.l.u;if(!r)return;let n=()=>qi(t.s);if(e){let i=0,a={};const s=ke(()=>{let l=!1;const o=t.s;for(const u in o)o[u]!==a[u]&&(a[u]=o[u],l=!0);return l&&i++,i});n=()=>_(s)}r.b.length&&Ti(()=>{Hr(t,n),ar(r.b)}),Ae(()=>{const i=Fe(()=>r.m.map(Qn));return()=>{for(const a of i)typeof a=="function"&&a()}}),r.a.length&&Ae(()=>{Hr(t,n),ar(r.a)})}function Hr(e,t){if(e.l.s)for(const r of e.l.s)_(r);t()}function On(e,t,r){if(e==null)return t(void 0),et;const n=Fe(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Je=[];function ve(e,t=et){let r=null;const n=new Set;function i(l){if(tn(e,l)&&(e=l,r)){const o=!Je.length;for(const u of n)u[1](),Je.push(u,e);if(o){for(let u=0;u<Je.length;u+=2)Je[u][0](Je[u+1]);Je.length=0}}}function a(l){i(l(e))}function s(l,o=et){const u=[l,o];return n.add(u),n.size===1&&(r=t(i,a)||et),l(e),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:i,update:a,subscribe:s}}function Ne(e){let t;return On(e,r=>t=r)(),t}let Rt=!1,_r=Symbol();function ie(e,t,r){const n=r[t]??(r[t]={store:null,source:kr(void 0),unsubscribe:et});if(n.store!==e&&!(_r in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=et;else{var i=!0;n.unsubscribe=On(e,a=>{i?n.source.v=a:w(n.source,a)}),i=!1}return e&&_r in r?Ne(e):_(n.source)}function At(){const e={};function t(){_n(()=>{for(var r in e)e[r].unsubscribe();Gr(e,_r,{enumerable:!1,value:!0})})}return[e,t]}function _a(e){var t=Rt;try{return Rt=!1,[e(),Rt]}finally{Rt=t}}const ga={get(e,t){if(!e.exclude.includes(t))return _(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=de({get[t](){return e.props[t]}},t,nn)),e.special[t](r),dr(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),dr(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function ue(e,t){return new Proxy({props:e,exclude:t,special:{},version:re(0)},ga)}const ha={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(gt(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let i=e.props[n];gt(i)&&(i=i());const a=Le(i,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(gt(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const i=Le(n,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===ze||t===Qr)return!1;for(let r of e.props)if(gt(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){gt(r)&&(r=r());for(const n in r)t.includes(n)||t.push(n)}return t}};function pe(...e){return new Proxy({props:e},ha)}function Kr(e){for(var t=j,r=j;t!==null&&!(t.f&(Se|qe));)t=t.parent;try{return Ie(t),e()}finally{Ie(r)}}function de(e,t,r,n){var A;var i=(r&hi)!==0,a=!ot||(r&pi)!==0,s=(r&bi)!==0,l=(r&yi)!==0,o=!1,u;s?[u,o]=_a(()=>e[t]):u=e[t];var f=ze in e||Qr in e,c=s&&(((A=Le(e,t))==null?void 0:A.set)??(f&&t in e&&(N=>e[t]=N)))||void 0,d=n,v=!0,g=!1,p=()=>(g=!0,v&&(v=!1,l?d=Fe(n):d=n),d);u===void 0&&n!==void 0&&(c&&a&&li(),u=p(),c&&c(u));var S;if(a)S=()=>{var N=e[t];return N===void 0?p():(v=!0,g=!1,N)};else{var P=Kr(()=>(i?ke:Er)(()=>e[t]));P.f|=ti,S=()=>{var N=_(P);return N!==void 0&&(d=void 0),N===void 0?d:N}}if(!(r&nn))return S;if(c){var h=e.$$legacy;return function(N,D){return arguments.length>0?((!a||!D||h||o)&&c(D?S():N),N):S()}}var m=!1,C=!1,x=kr(u),y=Kr(()=>ke(()=>{var N=S(),D=_(x);return m?(m=!1,C=!0,D):(C=!1,x.v=N)}));return i||(y.equals=mr),function(N,D){if(arguments.length>0){const z=D?_(y):a&&s?V(N):N;return y.equals(z)||(m=!0,w(x,z),g&&d!==void 0&&(d=z),Fe(()=>_(y))),N}return _(y)}}function dt(e){F===null&&xn(),ot&&F.l!==null?ba(F).m.push(e):Ae(()=>{const t=Fe(e);if(typeof t=="function")return t})}function pa(e){F===null&&xn(),dt(()=>()=>Fe(e))}function ba(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ya="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ya);vi();/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var xa=Qi("<svg><!><!></svg>");function be(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]),n=ue(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ge(t,!1);let i=de(t,"name",8,void 0),a=de(t,"color",8,"currentColor"),s=de(t,"size",8,24),l=de(t,"strokeWidth",8,2),o=de(t,"absoluteStrokeWidth",8,!1),u=de(t,"iconNode",24,()=>[]);const f=(...p)=>p.filter((S,P,h)=>!!S&&h.indexOf(S)===P).join(" ");va();var c=xa();let d;var v=b(c);ct(v,1,u,ut,(p,S)=>{let P=()=>_(S)[0],h=()=>_(S)[1];var m=se(),C=G(m);la(C,P,!0,(x,y)=>{let A;K(()=>A=Br(x,A,{...h()},void 0,x.namespaceURI===an,x.nodeName.includes("-")))}),T(p,m)});var g=E(v);fe(g,t,"default",{}),K((p,S)=>d=Br(c,d,{...ma,...n,width:s(),height:s(),stroke:a(),"stroke-width":p,class:S},void 0,!0),[()=>o()?Number(l())*24/Number(s()):l(),()=>f("lucide-icon","lucide",i()?`lucide-${i()}`:"",r.class)],Er),T(e,c),he()}function jn(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"circle-user-round"},()=>r,{iconNode:[["path",{d:"M18 20a6 6 0 0 0-12 0"}],["circle",{cx:"12",cy:"10",r:"4"}],["circle",{cx:"12",cy:"12",r:"10"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function wa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function it(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function ka(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"message-square"},()=>r,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Ea(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Ia(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"paperclip"},()=>r,{iconNode:[["path",{d:"M13.234 20.252 21 12.3"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Sa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"send"},()=>r,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Ta(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"smile"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Ca(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Na(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}function Ar(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"x"},()=>r,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(i,a)=>{var s=se(),l=G(s);fe(l,t,"default",{}),T(i,s)},$$slots:{default:!0}}))}const mt=ve({});function Tt(e,t){return`${e}|${t}`}function Pa(e){const[t,r]=e.split("|").map(Number);return{displayer:t,other:r}}const gr=ve(new Set),at=ve({}),xt=ve(new Set),Qe=ve({}),pt=ve(new Set),Ft=ve({}),Gt=ve({}),wt=ve({});function Aa(e,t){Gt.update(r=>{const n=r[e]||{};return{...r,[e]:{...n,[t]:(n[t]||0)+1}}})}function Ra(e,t){Gt.update(r=>{const n=r[e]||{},{[t]:i,...a}=n;return{...r,[e]:a}})}const Me=ve({});function Da(e){Me.update(t=>({...t,[e]:{users:[],isLoading:!0,isRefreshing:!1}}))}function Oa(e,t){Me.update(r=>({...r,[e]:{...r[e],users:t,isLoading:!1,isRefreshing:!1}}))}function ja(e,t){Me.update(r=>({...r,[e]:{...r[e],isRefreshing:t}}))}function La(e,t){return Ne(Me)[e].users.some(n=>n.id===t)}const bt=ve({});function za(e){const t=e.message;switch(t.response){case"RegistrationSuccess":Ne(xt).has(e.client_id)&&(at.update(n=>({...n,[e.client_id]:e.server_id})),xt.update(n=>(n.delete(e.client_id),n)));break;case"RegistrationFailure":xt.update(n=>(n.delete(e.client_id),n)),Ft.update(n=>{const{[e.client_id]:i,...a}=n;return a}),bt.update(n=>({...n,[e.client_id]:{message:"Failed to register to server. Please try again.",type:"error"}}));break;case"UnregisterSuccess":Ne(pt).has(e.client_id)&&(Qe.update(n=>({...n,[e.client_id]:!1})),at.update(n=>{const{[e.client_id]:i,...a}=n;return a}),pt.update(n=>(n.delete(e.client_id),n)),Ft.update(n=>{const{[e.client_id]:i,...a}=n;return a}),mt.update(n=>{const i={};for(const a in n){const{displayer:s}=Pa(a);s!==e.client_id&&(i[a]=n[a])}return i}),Gt.update(n=>{const{[e.client_id]:i,...a}=n;return a}),wt.update(n=>{const{[e.client_id]:i,...a}=n;return a}));break;case"UnregisterFailure":Ne(pt).has(e.client_id)&&(console.warn(`Failed to unregister client ${e.client_id}`),Qe.update(n=>({...n,[e.client_id]:!1})),pt.update(n=>(n.delete(e.client_id),n)));break;case"ActiveUsersList":console.log("ActiveUsersList",t.users);let r=t.users.filter(n=>n.id!==e.client_id);Oa(e.client_id,r);break;case"NewUserRegistered":Me.update(n=>{const i=n[e.client_id].users;return{...n,[e.client_id]:{...n[e.client_id],users:[...i,t.user]}}}),bt.update(n=>({...n,[e.client_id]:{message:`${t.user.name} joined the server`,type:"success"}}));break;case"UserUnregistered":Me.update(n=>{const i=n[e.client_id].users.find(s=>s.id===t.id),a=n[e.client_id].users.filter(s=>s.id!==t.id);return i&&bt.update(s=>({...s,[e.client_id]:{message:`${i.name} left the server`,type:"error"}})),{...n,[e.client_id]:{...n[e.client_id],users:a}}}),wt.update(n=>{if(n[e.client_id]===t.id){const{[e.client_id]:i,...a}=n;return a}return n});break;case"PrivateMessage":if(La(e.client_id,t.sender_id)){const n=Tt(e.client_id,t.sender_id);mt.update(a=>{const s=a[n]||[];return{...a,[n]:[...s,{content:t.message.content,timestamp:t.message.timestamp,sender_id:t.sender_id,receiver_id:e.client_id,server_id:e.server_id}]}}),Ne(wt)[e.client_id]!==t.sender_id&&Aa(e.client_id,t.sender_id)}break;case"UserNotFound":console.warn(`User ${t.user_id} not found`);break;case"SendingError":if(t.message.request==="SendPrivateMessage"){const n=t.message,i=Tt(n.message.sender_id,n.recipient_id);mt.update(a=>{const s=a[i];if(s)for(let l=s.length-1;l>=0;l--){const o=s[l];if(o.content.type===n.message.content.type&&o.content.data===n.message.content.data&&o.timestamp===n.message.timestamp&&o.sender_id===n.message.sender_id){o.status="failed";break}}return a})}bt.update(n=>({...n,[e.client_id]:{message:t.error,type:"error"}}));break}}let Oe=null,Mt=0;const Ua=5,Rr=ve(!1);function Ln(){return Oe&&Oe.close(),Oe=new WebSocket("ws://localhost:7374"),Oe.onopen=function(){console.log("WebSocket connection opened"),rr(!0)},Oe.onclose=function(){console.log("WebSocket connection closed"),rr(!1)},Oe.onerror=function(e){console.error("WebSocket error:",e),rr(!1)},Oe.onmessage=function(e){console.log("WebSocket message received:",e.data);const t=JSON.parse(e.data.toString());console.log("WebSocket message parsed:",t),za(t)},Oe}function tr(){if(Mt>=Ua){console.log("Max reconnect attempts reached");return}Mt++,Ln()}function rr(e){Rr.set(e),Mt=e?0:Mt}async function Yr(e,t,r,n){if(!r)return;const i=Ne(at)[e],a=new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),l={content:{type:n,data:r},timestamp:a,sender_id:e,receiver_id:t,server_id:i,status:"sent"};try{if(!(await fetch("/api/send-to",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Network response was not ok");let u=Tt(e,t);return mt.update(f=>{const c=f[u]||[];return{...f,[u]:[...c,l]}}),!0}catch(o){return console.error("Error sending message:",o),!1}}const Fa=["image/jpeg","image/png","image/gif","image/webp"];async function nr(e){return new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=i=>r(i)})}function ir(e){return Fa.includes(e.type)}var Ma=(e,t)=>{e.stopPropagation(),w(t,!_(t))},$a=(e,t,r)=>{e.stopPropagation(),t(_(r))},qa=O('<button class="emoji-option p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200"> </button>'),Ba=O('<div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-gray-400"><button class="emoji-button hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 bg-white dark:bg-gray-700 rounded-full p-1" aria-label="Insert emoji"><!></button> <div></div></div>');function Va(e,t){ge(t,!0);let r=H(!1),n;const i=["😂","❤️","😍","🤣","😊","🙏","🥰","😭","😘","👍","🤔","😅","🎉","👏","🥳","🤗","😎","💔","💕","😜"],a=c=>{var d;(d=t.onEmojiSelect)==null||d.call(t,c)},s=c=>{n&&!n.contains(c.target)&&w(r,!1)};dt(()=>(document.addEventListener("click",s),()=>{document.removeEventListener("click",s)}));var l=Ba(),o=b(l);o.__click=[Ma,r];var u=b(o);Ta(u,{class:"size-5"});var f=E(o,2);ct(f,21,()=>i,ut,(c,d)=>{var v=qa();v.__click=[$a,a,d];var g=b(v);K(()=>ae(g,_(d))),T(c,v)}),Ze(f,c=>n=c,()=>n),K(()=>X(f,`emoji-dropdown ${(_(r)?"grid":"hidden")??""} select-none absolute bottom-full right-0 mb-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2 grid-cols-5 gap-2`)),T(e,l),he()}Te(["click"]);var Wa=O("<div> </div>"),Ha=(e,t)=>{var r;return(r=t.onImageClick)==null?void 0:r.call(t,t.message.content.data)},Ka=O('<div><img alt="Sent img" class="w-full h-auto rounded-xl object-cover cursor-pointer hover:opacity-90 transition-opacity" loading="lazy"></div>'),Ya=O('<div><div><!> <div><span class="text-xs text-gray-500 dark:text-gray-400"> </span> <!></div></div></div>');function Ga(e,t){ge(t,!0);var r=Ya(),n=b(r),i=b(n);{var a=d=>{var v=Wa(),g=b(v);K(()=>{X(v,`inline-block rounded-2xl px-4 py-2 ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 text-white rounded-br-none":"bg-blue-500 text-white rounded-br-none")??""} shadow-sm break-words whitespace-pre-wrap overflow-hidden svelte-sjx01p`),ae(g,t.message.content.data)}),T(d,v)},s=d=>{var v=se(),g=G(v);{var p=S=>{var P=Ka(),h=b(P);h.__click=[Ha,t],K(()=>{X(P,`p-1 rounded-xl ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 rounded-br-none":"bg-blue-500 rounded-br-none")??""} shadow-sm`),Yt(h,"src",t.message.content.data)}),Xe("load",h,function(...m){var C;(C=t.onImageLoad)==null||C.apply(this,m)}),da(h),T(S,P)};M(g,S=>{t.message.content.type==="Image"&&S(p)},!0)}T(d,v)};M(i,d=>{t.message.content.type==="Text"?d(a):d(s,!1)})}var l=E(i,2),o=b(l),u=b(o),f=E(o,2);{var c=d=>{Na(d,{class:"size-3 text-red-500"})};M(f,d=>{t.message.status==="failed"&&d(c)})}K(()=>{X(r,`flex ${(t.isReceived?"justify-start":"justify-end")??""} animate-fadeIn`),X(n,`flex flex-col ${(t.message.content.type==="Text"?"max-w-[70%]":"w-[60%]")??""} gap-0.5`),X(l,`flex items-center gap-1 px-1 ${(t.isReceived?"justify-start":"justify-end")??""}`),ae(u,t.message.timestamp)}),T(e,r),he()}Te(["click"]);var Ja=O('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10"><div><span> </span> <button class="ml-2 p-1 hover:bg-black/20 rounded-full transition-colors" aria-label="Dismiss"><!></button></div></div>');function zn(e,t){ge(t,!0);let r=de(t,"type",3,"error"),n=de(t,"duration",3,3e3);de(t,"key",3,0);let i=H(!0),a;Ae(()=>(w(i,!0),a&&clearTimeout(a),a=setTimeout(()=>{s()},n()),()=>{a&&clearTimeout(a)}));function s(){var f;w(i,!1),a&&clearTimeout(a),(f=t.onClose)==null||f.call(t)}var l=se(),o=G(l);{var u=f=>{var c=Ja(),d=b(c),v=b(d),g=b(v),p=E(v,2);p.__click=s;var S=b(p);Ar(S,{class:"size-4"}),K(()=>{X(d,`px-4 py-2 rounded-lg shadow-lg ${(r()==="error"?"bg-red-500":"bg-green-500")??""} text-white flex items-center gap-2`),ae(g,t.message)}),T(f,c)};M(o,f=>{_(i)&&f(u)})}T(e,l),he()}Te(["click"]);function Xa(e,t,r){w(t,null),w(r,null)}function Za(e,t){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())}var Qa=O('<div class="absolute inset-5 backdrop-blur-sm bg-blue-100/70 dark:bg-blue-900/70 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center z-10 pointer-events-none"><p class="text-blue-600 dark:text-blue-400 font-medium">Release here to attach image</p></div>'),es=O('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),ts=O('<button class="absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"><!></button>'),rs=O('<div class="p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="relative inline-block"><img alt="Preview"> <!></div></div>'),ns=O('<div class="w-full h-[450px] flex flex-col"><div class="p-4 border-b border-gray-100 dark:border-gray-700"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"><!> </h3> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div></div> <div class="relative flex-1 overflow-hidden"><!> <div class="chat-box absolute inset-0 overflow-y-auto space-y-4 p-4 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"></div></div> <!> <div class="p-4 border-t border-gray-100 dark:border-gray-700"><div class="flex gap-2"><input type="file" accept="image/*" class="hidden"> <button class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors" title="Attach image"><!></button> <div class="relative flex-1"><input type="text" class="message-input w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" placeholder="Write a message..."> <!></div> <button class="send-button p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center"><!></button></div></div></div> <!>',1);function is(e,t){ge(t,!0);const[r,n]=At(),i=()=>ie(Me,"$clientUsers",r),a=()=>ie(mt,"$messages",r);let s=H(void 0),l=H(""),o,u,f=!0,c=H(!1),d=H(""),v=H(0);const g=ke(()=>{var I;return((I=i()[t.clientId])==null?void 0:I.users.find(L=>L.id===t.destinationId))??{id:t.destinationId,name:`Client ${t.destinationId}`}}),p=()=>{o&&(o.scrollTop=o.scrollHeight)};function S(){setTimeout(p,60)}Ci(()=>{o&&p()}),Ae(()=>{a()[Tt(t.clientId,t.destinationId)]&&f&&setTimeout(p,60)}),Ae(()=>{f=!0,t.destinationId,setTimeout(p,0)});const P=()=>{if(!o)return;f=Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=1};let h=H(null),m=H(null),C,x=H(!1);async function y(I){var Q;const L=I.target,W=(Q=L.files)==null?void 0:Q[0];W&&ir(W)&&(w(h,V(await nr(W))),w(m,V(_(h)))),L.value=""}async function A(I){var W;const L=(W=I.clipboardData)==null?void 0:W.items;if(L){for(const Q of L)if(Q.kind==="file"){const _t=Q.getAsFile();if(_t&&ir(_t)){I.preventDefault(),w(h,V(await nr(_t))),w(m,V(_(h)));return}}}}async function N(){if(!(!_(h)&&!_(l).trim()))try{_(h)&&(w(x,!0),await Yr(t.clientId,t.destinationId,_(h),"Image"),w(h,null),w(m,null),w(x,!1)),_(l).trim()&&(await Yr(t.clientId,t.destinationId,_(l),"Text"),w(l,""),_(s)&&(_(s).value="")),f=!0,setTimeout(()=>{p(),setTimeout(p,50)},60)}catch(I){w(x,!1),console.error(I),w(d,"Failed to send message. Please try again."),dr(v),w(c,!0)}}function D(I){var W;const L=((W=_(s))==null?void 0:W.selectionStart)??_(l).length;w(l,_(l).slice(0,L)+I+_(l).slice(L)),setTimeout(()=>{if(_(s)){const Q=L+I.length;_(s).setSelectionRange(Q,Q),_(s).focus()}},0)}let z=H(!1);function $(I){I.preventDefault(),I.stopPropagation(),w(z,!0)}function J(I){const L=o.getBoundingClientRect(),W=I.clientX,Q=I.clientY;(W<=L.left||W>=L.right||Q<=L.top||Q>=L.bottom)&&w(z,!1)}async function Z(I){var W;I.preventDefault(),w(z,!1);const L=(W=I.dataTransfer)==null?void 0:W.files[0];L&&ir(L)&&(w(h,V(await nr(L))),w(m,V(_(h))))}var ce=ns(),q=G(ce),B=b(q),k=b(B),R=b(k),Y=b(R);jn(Y,{class:"size-5 text-gray-600 dark:text-gray-300"});var ye=E(Y),ft=E(R,2),We=b(ft),De=E(B,2),me=b(De);{var Fn=I=>{var L=Qa();T(I,L)};M(me,I=>{_(z)&&I(Fn)})}var He=E(me,2);ct(He,5,()=>a()[Tt(t.clientId,t.destinationId)]||[],ut,(I,L)=>{const W=ke(()=>_(L).sender_id!==t.clientId);Ga(I,{get message(){return _(L)},get isReceived(){return _(W)},get onImageClick(){return t.onImageClick},onImageLoad:S})}),Ze(He,I=>o=I,()=>o),Ze(De,I=>u=I,()=>u);var Dr=E(De,2);{var Mn=I=>{var L=rs(),W=b(L),Q=b(W),_t=E(Q,2);{var Yn=Ke=>{var Ye=es(),Zt=b(Ye);it(Zt,{class:"size-8 text-blue-500 animate-spin"}),T(Ke,Ye)},Gn=Ke=>{var Ye=ts();Ye.__click=[Xa,h,m];var Zt=b(Ye);Ar(Zt,{class:"size-4"}),T(Ke,Ye)};M(_t,Ke=>{_(x)?Ke(Yn):Ke(Gn,!1)})}K(()=>{Yt(Q,"src",_(m)),X(Q,`max-h-48 rounded-lg ${(_(x)?"opacity-50":"")??""}`)}),T(I,L)};M(Dr,I=>{_(m)&&I(Mn)})}var $n=E(Dr,2),qn=b($n),Jt=b(qn);Jt.__change=y,Ze(Jt,I=>C=I,()=>C);var Xt=E(Jt,2);Xt.__click=()=>C.click();var Bn=b(Xt);Ia(Bn,{class:"size-5"});var Or=E(Xt,2),vt=b(Or);vt.__keydown=[Za,N],Ze(vt,I=>w(s,I),()=>_(s));var Vn=E(vt,2);Va(Vn,{get inputElement(){return _(s)},onEmojiSelect:D});var jr=E(Or,2);jr.__click=N;var Wn=b(jr);Sa(Wn,{class:"size-5"});var Hn=E(q,2);{var Kn=I=>{zn(I,{get message(){return _(d)},type:"error",onClose:()=>w(c,!1),get key(){return _(v)}})};M(Hn,I=>{_(c)&&I(Kn)})}K(()=>{ae(ye,` ${_(g).name??""}`),ae(We,`ID: ${_(g).id??""}`)}),Xe("scroll",He,P),Xe("dragover",He,$),Xe("dragleave",He,J),Xe("drop",He,Z),Xe("paste",vt,A),Dn(vt,()=>_(l),I=>w(l,I)),T(e,ce),he(),n()}Te(["click","change","keydown"]);async function Un(e){try{const t=Ne(at)[e];if(!(await fetch(`/api/registered-users?client_id=${e}&server_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to request registered users")}catch(t){console.error("Error requesting registered users:",t)}}var as=e=>e.stopPropagation(),ss=O('<div><div class="relative w-[80%] h-[80%] flex items-center justify-center"><div class="relative w-full h-full flex items-center justify-center"><img alt="Full size" class="rounded-lg shadow-xl min-w-[300px] min-h-[300px] w-auto h-auto max-w-full max-h-full object-contain"> <div class="absolute -top-4 -right-4 flex gap-2"><button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button> <button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button></div></div></div></div>');function ls(e,t){ge(t,!0);let r=de(t,"containerClass",3,"");function n(g){g.key==="Escape"&&t.onClose()}function i(){const g=document.createElement("a");g.href=t.src,g.download=`image-${Date.now()}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g)}dt(()=>(document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}));var a=ss();a.__click=function(...g){var p;(p=t.onClose)==null||p.apply(this,g)};var s=b(a);s.__click=[as];var l=b(s),o=b(l),u=E(o,2),f=b(u);f.__click=i;var c=b(f);wa(c,{class:"size-5"});var d=E(f,2);d.__click=function(...g){var p;(p=t.onClose)==null||p.apply(this,g)};var v=b(d);Ar(v,{class:"size-5"}),K(()=>{X(a,`absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm ${r()??""}`),Yt(o,"src",t.src)}),T(e,a),he()}Te(["click"]);async function os(e,t){ja(t.clientId,!0),await Un(t.clientId)}var us=O('<div class="flex justify-center py-4"><div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div></div>'),cs=(e,t,r)=>t(_(r).id),ds=O('<span class="absolute right-2 top-1/2 -translate-y-1/2 min-w-[20px] h-5 flex items-center justify-center bg-blue-500 text-white text-xs rounded-full px-1.5"> </span>'),fs=O("<button><!> <span> </span> <!></button>"),vs=O('<div class="space-y-2"></div>'),_s=O('<div class="relative flex-1"><!> <!></div>'),gs=O('<div class="flex items-center justify-center w-full h-[450px]"><p class="text-gray-500 dark:text-gray-400">Select a user to start chatting</p></div>'),hs=O(`<div class="flex w-full"><div class="w-52 bg-white dark:bg-gray-800 border-r border-gray-300 dark:border-gray-700 overflow-hidden"><div class="p-2 border-b border-gray-300 dark:border-gray-700"><button class="w-full px-3 py-2 flex items-center justify-center gap-2 text-sm
                       bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500
                       rounded-lg transition-colors text-gray-800 dark:text-white"><span>Refresh Users</span> <!></button></div> <div class="px-3 py-2"><!></div></div> <!></div>`);function ps(e,t){ge(t,!0);const[r,n]=At(),i=()=>ie(Me,"$clientUsers",r),a=()=>ie(Gt,"$unreadMessages",r);let s=de(t,"destinationId",31,()=>-1);dt(()=>{Da(t.clientId),Un(t.clientId)});let l=H(null);Ae(()=>{wt.update(y=>({...y,[t.clientId]:s()})),s()!==-1&&Ra(t.clientId,s()),w(l,null)});function o(y){s(y)}var u=hs(),f=b(u),c=b(f),d=b(c);d.__click=[os,t];var v=E(b(d),2);{var g=y=>{it(y,{class:"size-4 animate-spin"})};M(v,y=>{var A;(A=i()[t.clientId])!=null&&A.isRefreshing&&y(g)})}var p=E(c,2),S=b(p);{var P=y=>{var A=us();T(y,A)},h=y=>{var A=vs();ct(A,5,()=>{var N;return((N=i()[t.clientId])==null?void 0:N.users)||[]},ut,(N,D)=>{var z=fs();z.__click=[cs,o,D];var $=b(z);const J=ke(()=>s()===_(D).id?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300");jn($,{get class(){return`size-5 ${_(J)??""}`}});var Z=E($,2),ce=b(Z),q=E(Z,2);{var B=k=>{var R=ds(),Y=b(R);K(()=>ae(Y,a()[t.clientId][_(D).id])),T(k,R)};M(q,k=>{var R;(((R=a()[t.clientId])==null?void 0:R[_(D).id])??0)>0&&k(B)})}K(()=>{X(z,`w-full p-2 rounded cursor-pointer transition-colors flex items-center gap-2 relative
                                   ${(s()===_(D).id?"bg-blue-100 dark:bg-blue-900":"hover:bg-gray-100 dark:hover:bg-gray-700")??""}`),X(Z,s()===_(D).id?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-800 dark:text-gray-100"),ae(ce,_(D).name)}),T(N,z)}),T(y,A)};M(S,y=>{var A;(A=i()[t.clientId])!=null&&A.isLoading?y(P):y(h,!1)})}var m=E(f,2);{var C=y=>{var A=_s(),N=b(A);is(N,{get clientId(){return t.clientId},get destinationId(){return s()},onImageClick:$=>w(l,V($))});var D=E(N,2);{var z=$=>{ls($,{get src(){return _(l)},onClose:()=>w(l,null)})};M(D,$=>{_(l)&&$(z)})}T(y,A)},x=y=>{var A=gs();T(y,A)};M(m,y=>{s()!==-1?y(C):y(x,!1)})}T(e,u),he(),n()}Te(["click"]);function bs(e,t,r,n){e.key==="Enter"&&_(t).trim()?(e.preventDefault(),r()):e.key==="Escape"&&(e.preventDefault(),n())}function ys(e,t,r,n){if(_(t).length>0){const i=Math.floor(Math.random()*_(t).length);w(r,V(_(t)[i])),w(n,!0)}}var ms=O('<div class="flex items-center justify-center w-full h-[450px]"><div class="text-center"><!> <p class="text-gray-600 dark:text-gray-300">Registering to server...</p></div></div>'),xs=(e,t,r,n)=>{w(t,V(_(r))),w(n,!0)},ws=O("<button> </button>"),ks=O(`<div class="flex justify-center pt-4"><button class="px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg
                                   transition-all hover:bg-blue-700 dark:hover:bg-blue-600
                                   hover:shadow-md w-full sm:w-auto">Connect to Random Server</button></div>`),Es=O(`<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full"><h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"> </h2> <input type="text" placeholder="Enter your username" class="w-full p-3 mb-4 border rounded-lg dark:bg-gray-700 dark:text-gray-200
                               focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <div class="flex justify-end gap-3"><button class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">Cancel</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors
                                   disabled:opacity-50 disabled:cursor-not-allowed">Join Server</button></div></div></div>`),Is=O(`<div class="flex items-center justify-center flex-col w-full h-[450px] p-6"><div class="w-full max-w-md space-y-6"><div class="flex items-center justify-between"><h2 class="text-xl font-semibold text-gray-700 dark:text-gray-300">Available Servers</h2> <button class="inline-flex items-center justify-center px-3 py-2 rounded-lg
                               bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
                               transition-colors gap-2 text-gray-700 dark:text-gray-300"><span class="text-sm font-medium">Refresh</span> <!></button></div> <div></div> <!></div></div> <!>`,1),Ss=O('<div class="flex w-full relative"><!></div>');function Ts(e,t){ge(t,!0);const[r,n]=At(),i=()=>ie(xt,"$pendingRegistrations",r);let a=H(V([])),s=H(!1),l=H(-1),o=H(""),u=H(!1),f;async function c(){w(u,!0);try{let h=await fetch(`/api/servers?id=${t.clientId}`);w(a,V(await h.json())),console.log("Servers: ",_(a).join(", "))}catch(h){console.error(h),w(a,V([1,2,3]))}finally{setTimeout(()=>{w(u,!1)},600)}}dt(async()=>{await c()}),Ae(()=>{_(s)&&f&&f.focus()});async function d(){try{(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:_(l),username:_(o)})})).ok?(w(s,!1),Ft.update(m=>({...m,[t.clientId]:_(o)})),w(o,""),xt.update(m=>(m.add(t.clientId),m))):t.showToast(`Registration failed for Server ${_(l)}. Please try again.`,"error")}catch(h){console.error(h),t.showToast(`Registration failed for Server ${_(l)}. Please try again.`,"error")}}function v(){w(s,!1),w(o,"")}var g=Ss(),p=b(g);{var S=h=>{var m=ms(),C=b(m),x=b(C);it(x,{class:"size-8 animate-spin mx-auto mb-4 text-blue-500"}),T(h,m)},P=h=>{var m=Is(),C=G(m),x=b(C),y=b(x),A=E(b(y),2);A.__click=c;var N=E(b(A),2);const D=ke(()=>_(u)?"animate-spin":"hidden");it(N,{get class(){return`size-5 ${_(D)??""}`}});var z=E(y,2);ct(z,21,()=>_(a),ut,(q,B)=>{var k=ws();k.__click=[xs,l,B,s];var R=b(k);K(()=>{X(k,`flex items-center justify-center px-6 py-3
                                   bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600
                                   text-gray-800 dark:text-gray-200 rounded-lg transition-all
                                   hover:shadow-md border border-gray-300 dark:border-gray-600
                                   ${(_(a).length===1?"text-lg":"")??""}`),ae(R,`Server ${_(B)??""}`)}),T(q,k)});var $=E(z,2);{var J=q=>{var B=ks(),k=b(B);k.__click=[ys,a,l,s],T(q,B)};M($,q=>{_(a).length>1&&q(J)})}var Z=E(C,2);{var ce=q=>{var B=Es(),k=b(B),R=b(k),Y=b(R),ye=E(R,2);ye.__keydown=[bs,o,d,v],Ze(ye,me=>f=me,()=>f);var ft=E(ye,2),We=b(ft);We.__click=v;var De=E(We,2);De.__click=d,K(()=>{ae(Y,`Connect to Server ${_(l)??""}`),De.disabled=!_(o)}),Dn(ye,()=>_(o),me=>w(o,me)),T(q,B)};M(Z,q=>{_(s)&&q(ce)})}K(()=>{A.disabled=_(u),X(z,`grid gap-3 ${(_(a).length===1?"":"sm:grid-cols-2")??""}`)}),T(h,m)};M(p,h=>{i().has(t.clientId)?h(S):h(P,!1)})}T(e,g),he(),n()}Te(["click","keydown"]);var Cs=O('<button class="px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200 flex items-center gap-1 disabled:opacity-75"><!> Disconnect</button> <span class="text-xs text-gray-500 dark:text-gray-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full"> </span>',1),Ns=O('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-200 relative"><div class="p-4 border-b border-gray-300 dark:border-gray-700"><div class="flex justify-between items-center"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100"> </h2></div> <div class="flex items-center gap-2"><!> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"> </span></div></div></div> <!> <!></div>');function Ps(e,t){ge(t,!0);const[r,n]=At(),i=()=>ie(wt,"$currentChats",r),a=()=>ie(bt,"$userEvents",r),s=()=>ie(Qe,"$isDisconnecting",r),l=()=>ie(at,"$registrationStatus",r),o=()=>ie(Rr,"$connectionStatus",r),u=()=>ie(Ft,"$clientUsernames",r);let f=ke(()=>i()[t.clientId]??-1),c=H(null);Ae(()=>{const k=a()[t.clientId];k&&w(c,V({message:k.message,type:k.type,key:Date.now()}))});function d(k,R){w(c,V({message:k,type:R,key:Date.now()}))}async function v(){if(!s()[t.clientId]){Qe.update(k=>({...k,[t.clientId]:!0}));try{if(!(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:l()[t.clientId]})})).ok){Qe.update(R=>({...R,[t.clientId]:!1}));return}pt.update(R=>(R.add(t.clientId),R))}catch(k){console.error("Error unregistering:",k),Qe.update(R=>({...R,[t.clientId]:!1}))}}}var g=Ns(),p=b(g),S=b(p),P=b(S),h=b(P),m=b(h),C=E(m,2),x=E(h,2),y=b(x),A=E(P,2),N=b(A);{var D=k=>{var R=Cs(),Y=G(R);Y.__click=v;var ye=b(Y);{var ft=me=>{it(me,{class:"size-3 animate-spin"})};M(ye,me=>{s()[t.clientId]&&me(ft)})}var We=E(Y,2),De=b(We);K(()=>{Y.disabled=s()[t.clientId],ae(De,`Server ${l()[t.clientId]??""}`)}),T(k,R)};M(N,k=>{l()[t.clientId]&&k(D)})}var z=E(N,2),$=b(z),J=E(p,2);{var Z=k=>{ps(k,{get clientId(){return t.clientId},get destinationId(){return _(f)}})},ce=k=>{Ts(k,{get clientId(){return t.clientId},showToast:d})};M(J,k=>{l()[t.clientId]?k(Z):k(ce,!1)})}var q=E(J,2);{var B=k=>{zn(k,{get message(){return _(c).message},get type(){return _(c).type},onClose:()=>w(c,null),get key(){return _(c).key}})};M(q,k=>{_(c)&&k(B)})}K(()=>{X(m,`status-indicator w-3 h-3 ${(o()?"bg-green-500":"bg-red-500")??""} rounded-full`),X(C,`status-ping w-3 h-3 ${(o()?"bg-green-500 animate-ping":"bg-red-500")??""} rounded-full absolute inset-0`),ae(y,u()[t.clientId]||`Chat ${t.clientId}`),ae($,`ID: ${t.clientId??""}`)}),T(e,g),he(),n()}Te(["click"]);function As(){const e=localStorage.getItem("theme");e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}async function Rs(){As();try{const t=await(await fetch("/api/clients")).json();t.sort(),t.forEach(r=>{gr.set(new Set([...Ne(gr),r]))})}catch(e){console.error("Error loading active_clients:",e)}Ln()}var Ds=O('<button class="ml-2 px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors duration-200">Reconnect</button>'),Os=()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")},js=O('<div class="fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50 transition-opacity duration-500"><div class="text-center flex flex-col gap-4 items-center justify-center"><!> <p class="text-gray-600 dark:text-gray-300">Loading chats...</p></div></div>'),Ls=O('<div class="container mx-auto p-4 lg:p-6"><div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"><div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="flex items-center gap-3"><div class="bg-blue-500 p-2 rounded-lg"><!></div> <div><h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Clients - AP 24/25</h1> <p class="text-sm text-gray-500 dark:text-gray-400">Clients UI for Advanced Programming Project</p></div></div> <div class="flex items-center gap-6"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <span class="text-sm text-gray-600 dark:text-gray-300"> </span> <!></div> <div class="h-8 w-px bg-gray-200 dark:bg-gray-700"></div> <div class="flex items-center gap-3"><!> <button id="theme-toggle" aria-label="Change theme" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><span class="inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-200 translate-x-[2px] dark:translate-x-5"></span></button> <!></div></div></div></div> <div id="chat-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"></div></div> <!>',1);function zs(e,t){ge(t,!0);const[r,n]=At(),i=()=>ie(gr,"$displayedChats",r),a=()=>ie(at,"$registrationStatus",r),s=()=>ie(Rr,"$connectionStatus",r);let l=H(!0);dt(async()=>{await Rs(),setTimeout(()=>{w(l,!1)},800),window.addEventListener("beforeunload",o)}),pa(()=>{window.removeEventListener("beforeunload",o),u()});function o(k){u()}function u(){console.error("Unregistering clients..."),i().forEach(k=>{fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:k,server_id:a()[k]})})}),console.warn("Clients unregistered.")}var f=Ls(),c=G(f),d=b(c),v=b(d),g=b(v),p=b(g),S=b(p);ka(S,{class:"size-5 text-white"});var P=E(g,2),h=b(P),m=b(h),C=b(m),x=E(C,2),y=E(m,2),A=b(y),N=E(y,2);{var D=k=>{var R=Ds();R.__click=function(...Y){tr==null||tr.apply(this,Y)},T(k,R)};M(N,k=>{s()||k(D)})}var z=E(h,4),$=b(z);Ca($,{class:"size-5 dark:text-gray-200"});var J=E($,2);J.__click=[Os];var Z=E(J,2);Ea(Z,{class:"size-5 dark:text-gray-200"});var ce=E(d,2);ct(ce,5,i,ut,(k,R)=>{Ps(k,{get clientId(){return _(R)}})});var q=E(c,2);{var B=k=>{var R=js(),Y=b(R),ye=b(Y);it(ye,{class:"w-16 h-16 text-blue-500 animate-spin mb-4"}),T(k,R)};M(q,k=>{_(l)&&k(B)})}K(()=>{X(C,`w-3 h-3 rounded-full transition-colors duration-200 ${(s()?"bg-green-500":"bg-red-500")??""}`),X(x,`w-3 h-3 absolute inset-0 rounded-full transition-colors duration-200 ${(s()?"bg-green-500 animate-ping":"bg-red-500")??""}`),ae(A,s()?"Online":"Offline")}),T(e,f),he(),n()}Te(["click"]);ea(zs,{target:document.getElementById("app")});
