(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const qn=!1;var vr=Array.isArray,_r=Array.from,Bn=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,Vr=Object.getOwnPropertyDescriptors,Vn=Object.prototype,Wn=Array.prototype,gr=Object.getPrototypeOf;function _t(e){return typeof e=="function"}const Ze=()=>{};function $n(e){return e()}function rr(e){for(var t=0;t<e.length;t++)e[t]()}const ve=2,Wr=4,It=8,hr=16,_e=32,at=64,nr=128,Me=256,At=512,ae=1024,je=2048,St=4096,me=8192,st=16384,Hn=32768,Lt=65536,Kn=1<<17,Yn=1<<19,$r=1<<20,De=Symbol("$state"),Hr=Symbol("legacy props"),ir=Symbol("");function Kr(e){return e===this.v}function Yr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function br(e){return!Yr(e,this.v)}function Gn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Jn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Zn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qn(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ei(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ti(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ri(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ni(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ot=!1;function ii(){ot=!0}const pr=1,yr=2,Gr=4,ai=8,si=16,oi=1,li=2,Jr=4,ui=8,ci=16,di=1,fi=2,te=Symbol(),Xr="http://www.w3.org/2000/svg";function re(e,t){var r={f:0,v:e,reactions:null,equals:Kr,version:0};return r}function $(e){return vi(re(e))}function mr(e,t=!1){var i;const r=re(e);return t||(r.equals=br),ot&&U!==null&&U.l!==null&&((i=U.l).s??(i.s=[])).push(r),r}function vi(e){return z!==null&&z.f&ve&&(xe===null?Ei([e]):xe.push(e)),e}function k(e,t){return z!==null&&qt()&&z.f&(ve|hr)&&(xe===null||!xe.includes(e))&&ni(),ar(e,t)}function ar(e,t){return e.equals(t)||(e.v=t,e.version=hn(),Zr(e,je),qt()&&R!==null&&R.f&ae&&!(R.f&_e)&&(X!==null&&X.includes(e)?(Ee(R,je),Wt(R)):Oe===null?Ii([e]):Oe.push(e))),t}function Zr(e,t){var r=e.reactions;if(r!==null)for(var i=qt(),n=r.length,a=0;a<n;a++){var s=r[a],o=s.f;o&je||!i&&s===R||(Ee(s,t),o&(ae|Me)&&(o&ve?Zr(s,St):Wt(s)))}}let Qr=!1;function V(e,t=null,r){if(typeof e!="object"||e===null||De in e)return e;const i=gr(e);if(i!==Vn&&i!==Wn)return e;var n=new Map,a=vr(e),s=re(0);a&&n.set("length",re(e.length));var o;return new Proxy(e,{defineProperty(c,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ei();var d=n.get(l);return d===void 0?(d=re(u.value),n.set(l,d)):k(d,V(u.value,o)),!0},deleteProperty(c,l){var u=n.get(l);if(u===void 0)l in c&&n.set(l,re(te));else{if(a&&typeof l=="string"){var d=n.get("length"),f=Number(l);Number.isInteger(f)&&f<d.v&&k(d,f)}k(u,te),Ar(s)}return!0},get(c,l,u){var g;if(l===De)return e;var d=n.get(l),f=l in c;if(d===void 0&&(!f||(g=Re(c,l))!=null&&g.writable)&&(d=re(V(f?c[l]:te,o)),n.set(l,d)),d!==void 0){var v=_(d);return v===te?void 0:v}return Reflect.get(c,l,u)},getOwnPropertyDescriptor(c,l){var u=Reflect.getOwnPropertyDescriptor(c,l);if(u&&"value"in u){var d=n.get(l);d&&(u.value=_(d))}else if(u===void 0){var f=n.get(l),v=f==null?void 0:f.v;if(f!==void 0&&v!==te)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(c,l){var v;if(l===De)return!0;var u=n.get(l),d=u!==void 0&&u.v!==te||Reflect.has(c,l);if(u!==void 0||R!==null&&(!d||(v=Re(c,l))!=null&&v.writable)){u===void 0&&(u=re(d?V(c[l],o):te),n.set(l,u));var f=_(u);if(f===te)return!1}return d},set(c,l,u,d){var w;var f=n.get(l),v=l in c;if(a&&l==="length")for(var g=u;g<f.v;g+=1){var y=n.get(g+"");y!==void 0?k(y,te):g in c&&(y=re(te),n.set(g+"",y))}f===void 0?(!v||(w=Re(c,l))!=null&&w.writable)&&(f=re(void 0),k(f,V(u,o)),n.set(l,f)):(v=f.v!==te,k(f,V(u,o)));var C=Reflect.getOwnPropertyDescriptor(c,l);if(C!=null&&C.set&&C.set.call(d,u),!v){if(a&&typeof l=="string"){var x=n.get("length"),b=Number(l);Number.isInteger(b)&&b>=x.v&&k(x,b+1)}Ar(s)}return!0},ownKeys(c){_(s);var l=Reflect.ownKeys(c).filter(f=>{var v=n.get(f);return v===void 0||v.v!==te});for(var[u,d]of n)d.v!==te&&!(u in c)&&l.push(u);return l},setPrototypeOf(){ti()}})}function Ar(e,t=1){k(e,e.v+t)}var Rr,en,tn;function _i(){if(Rr===void 0){Rr=window;var e=Element.prototype,t=Node.prototype;en=Re(t,"firstChild").get,tn=Re(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function zt(e=""){return document.createTextNode(e)}function tt(e){return en.call(e)}function Ut(e){return tn.call(e)}function h(e,t){return tt(e)}function Y(e,t){{var r=tt(e);return r instanceof Comment&&r.data===""?Ut(r):r}}function I(e,t=1,r=!1){let i=e;for(;t--;)i=Ut(i);return i}function gi(e){e.textContent=""}function Se(e){var t=ve|je;R===null?t|=Me:R.f|=$r;var r=z!==null&&z.f&ve?z:null;const i={children:null,ctx:U,deps:null,equals:Kr,f:t,fn:e,reactions:null,v:null,version:0,parent:r??R};return r!==null&&(r.children??(r.children=[])).push(i),i}function hi(e){const t=Se(e);return t.equals=br,t}function rn(e){var t=e.children;if(t!==null){e.children=null;for(var r=0;r<t.length;r+=1){var i=t[r];i.f&ve?xr(i):we(i)}}}function bi(e){for(var t=e.parent;t!==null;){if(!(t.f&ve))return t;t=t.parent}return null}function nn(e){var t,r=R;ke(bi(e));try{rn(e),t=bn(e)}finally{ke(r)}return t}function an(e){var t=nn(e),r=(Fe||e.f&Me)&&e.deps!==null?St:ae;Ee(e,r),e.equals(t)||(e.v=t,e.version=hn())}function xr(e){rn(e),wt(e,0),Ee(e,st),e.v=e.children=e.deps=e.ctx=e.reactions=null}function sn(e){R===null&&z===null&&Xn(),z!==null&&z.f&Me&&Jn(),Ir&&Gn()}function pi(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function qe(e,t,r,i=!0){var n=(e&at)!==0,a=R,s={ctx:U,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|je,first:null,fn:t,last:null,next:null,parent:n?null:a,prev:null,teardown:null,transitions:null,version:0};if(r){var o=Qe;try{Dr(!0),Vt(s),s.f|=Hn}catch(u){throw we(s),u}finally{Dr(o)}}else t!==null&&Wt(s);var c=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&$r)===0;if(!c&&!n&&i&&(a!==null&&pi(s,a),z!==null&&z.f&ve)){var l=z;(l.children??(l.children=[])).push(s)}return s}function on(e){const t=qe(It,null,!1);return Ee(t,ae),t.teardown=e,t}function Te(e){sn();var t=R!==null&&(R.f&_e)!==0&&U!==null&&!U.m;if(t){var r=U;(r.e??(r.e=[])).push({fn:e,effect:R,reaction:z})}else{var i=wr(e);return i}}function yi(e){return sn(),kr(e)}function mi(e){const t=qe(at,e,!0);return()=>{we(t)}}function xi(e){const t=qe(at,e,!0);return(r={})=>new Promise(i=>{r.outro?mt(t,()=>{we(t),i(void 0)}):(we(t),i(void 0))})}function wr(e){return qe(Wr,e,!1)}function kr(e){return qe(It,e,!0)}function H(e){return Ft(e)}function Ft(e,t=0){return qe(It|hr|t,e,!0)}function rt(e,t=!0){return qe(It|_e,e,!0,t)}function ln(e){var t=e.teardown;if(t!==null){const r=Ir,i=z;Or(!0),Le(null);try{t.call(null)}finally{Or(r),Le(i)}}}function un(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var r=0;r<t.length;r+=1)xr(t[r])}}function cn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var i=r.next;we(r,t),r=i}}function wi(e){for(var t=e.first;t!==null;){var r=t.next;t.f&_e||we(t),t=r}}function we(e,t=!0){var r=!1;if((t||e.f&Yn)&&e.nodes_start!==null){for(var i=e.nodes_start,n=e.nodes_end;i!==null;){var a=i===n?null:Ut(i);i.remove(),i=a}r=!0}cn(e,t&&!r),un(e),wt(e,0),Ee(e,st);var s=e.transitions;if(s!==null)for(const c of s)c.stop();ln(e);var o=e.parent;o!==null&&o.first!==null&&dn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function dn(e){var t=e.parent,r=e.prev,i=e.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=r))}function mt(e,t){var r=[];Er(e,r,!0),fn(r,()=>{we(e),t&&t()})}function fn(e,t){var r=e.length;if(r>0){var i=()=>--r||t();for(var n of e)n.out(i)}else t()}function Er(e,t,r){if(!(e.f&me)){if(e.f^=me,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var i=e.first;i!==null;){var n=i.next,a=(i.f&Lt)!==0||(i.f&_e)!==0;Er(i,t,a?r:!1),i=n}}}function xt(e){vn(e,!0)}function vn(e,t){if(e.f&me){Tt(e)&&Vt(e),e.f^=me;for(var r=e.first;r!==null;){var i=r.next,n=(r.f&Lt)!==0||(r.f&_e)!==0;vn(r,n?t:!1),r=i}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let sr=!1,or=[];function ki(){sr=!1;const e=or.slice();or=[],rr(e)}function Mt(e){sr||(sr=!0,queueMicrotask(ki)),or.push(e)}function _n(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Pt=!1,Rt=!1,Dt=null,Qe=!1,Ir=!1;function Dr(e){Qe=e}function Or(e){Ir=e}let lr=[],bt=0;let z=null;function Le(e){z=e}let R=null;function ke(e){R=e}let xe=null;function Ei(e){xe=e}let X=null,le=0,Oe=null;function Ii(e){Oe=e}let gn=1,Fe=!1,U=null;function hn(){return++gn}function qt(){return!ot||U!==null&&U.l===null}function Tt(e){var s,o;var t=e.f;if(t&je)return!0;if(t&St){var r=e.deps,i=(t&Me)!==0;if(r!==null){var n;if(t&At){for(n=0;n<r.length;n++)((s=r[n]).reactions??(s.reactions=[])).push(e);e.f^=At}for(n=0;n<r.length;n++){var a=r[n];if(Tt(a)&&an(a),i&&R!==null&&!Fe&&!((o=a==null?void 0:a.reactions)!=null&&o.includes(e))&&(a.reactions??(a.reactions=[])).push(e),a.version>e.version)return!0}}(!i||R!==null&&!Fe)&&Ee(e,ae)}return!1}function Si(e,t){for(var r=t;r!==null;){if(r.f&nr)try{r.fn(e);return}catch{r.f^=nr}r=r.parent}throw Pt=!1,e}function Ti(e){return(e.f&st)===0&&(e.parent===null||(e.parent.f&nr)===0)}function Bt(e,t,r,i){if(Pt){if(r===null&&(Pt=!1),Ti(t))throw e;return}r!==null&&(Pt=!0);{Si(e,t);return}}function bn(e){var f;var t=X,r=le,i=Oe,n=z,a=Fe,s=xe,o=U,c=e.f;X=null,le=0,Oe=null,z=c&(_e|at)?null:e,Fe=!Qe&&(c&Me)!==0,xe=null,U=e.ctx;try{var l=(0,e.fn)(),u=e.deps;if(X!==null){var d;if(wt(e,le),u!==null&&le>0)for(u.length=le+X.length,d=0;d<X.length;d++)u[le+d]=X[d];else e.deps=u=X;if(!Fe)for(d=le;d<u.length;d++)((f=u[d]).reactions??(f.reactions=[])).push(e)}else u!==null&&le<u.length&&(wt(e,le),u.length=le);return l}finally{X=t,le=r,Oe=i,z=n,Fe=a,xe=s,U=o}}function Ci(e,t){let r=t.reactions;if(r!==null){var i=r.indexOf(e);if(i!==-1){var n=r.length-1;n===0?r=t.reactions=null:(r[i]=r[n],r.pop())}}r===null&&t.f&ve&&(X===null||!X.includes(t))&&(Ee(t,St),t.f&(Me|At)||(t.f^=At),wt(t,0))}function wt(e,t){var r=e.deps;if(r!==null)for(var i=t;i<r.length;i++)Ci(e,r[i])}function Vt(e){var t=e.f;if(!(t&st)){Ee(e,ae);var r=R,i=U;R=e;try{t&hr?wi(e):cn(e),un(e),ln(e);var n=bn(e);e.teardown=typeof n=="function"?n:null,e.version=gn}catch(a){Bt(a,e,r,i||e.ctx)}finally{R=r}}}function Ni(){if(bt>1e3){bt=0;try{Zn()}catch(e){if(Dt!==null)Bt(e,Dt,null);else throw e}}bt++}function Pi(e){var t=e.length;if(t!==0){Ni();var r=Qe;Qe=!0;try{for(var i=0;i<t;i++){var n=e[i];n.f&ae||(n.f^=ae);var a=[];pn(n,a),Ai(a)}}finally{Qe=r}}}function Ai(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var i=e[r];if(!(i.f&(st|me)))try{Tt(i)&&(Vt(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?dn(i):i.fn=null))}catch(n){Bt(n,i,null,i.ctx)}}}function Ri(){if(Rt=!1,bt>1001)return;const e=lr;lr=[],Pi(e),Rt||(bt=0,Dt=null)}function Wt(e){Rt||(Rt=!0,queueMicrotask(Ri)),Dt=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(at|_e)){if(!(r&ae))return;t.f^=ae}}lr.push(t)}function pn(e,t){var r=e.first,i=[];e:for(;r!==null;){var n=r.f,a=(n&_e)!==0,s=a&&(n&ae)!==0,o=r.next;if(!s&&!(n&me))if(n&It){if(a)r.f^=ae;else try{Tt(r)&&Vt(r)}catch(d){Bt(d,r,null,r.ctx)}var c=r.first;if(c!==null){r=c;continue}}else n&Wr&&i.push(r);if(o===null){let d=r.parent;for(;d!==null;){if(e===d)break e;var l=d.next;if(l!==null){r=l;continue e}d=d.parent}}r=o}for(var u=0;u<i.length;u++)c=i[u],t.push(c),pn(c,t)}function _(e){var u;var t=e.f,r=(t&ve)!==0;if(r&&t&st){var i=nn(e);return xr(e),i}if(z!==null){xe!==null&&xe.includes(e)&&ri();var n=z.deps;X===null&&n!==null&&n[le]===e?le++:X===null?X=[e]:X.push(e),Oe!==null&&R!==null&&R.f&ae&&!(R.f&_e)&&Oe.includes(e)&&(Ee(R,je),Wt(R))}else if(r&&e.deps===null)for(var a=e,s=a.parent,o=a;s!==null;)if(s.f&ve){var c=s;o=c,s=c.parent}else{var l=s;(u=l.deriveds)!=null&&u.includes(o)||(l.deriveds??(l.deriveds=[])).push(o);break}return r&&(a=e,Tt(a)&&an(a)),e.v}function ze(e){const t=z;try{return z=null,e()}finally{z=t}}const Di=~(je|St|ae);function Ee(e,t){e.f=e.f&Di|t}function ur(e,t=1){var r=_(e),i=t===1?r++:r--;return k(e,r),i}function ge(e,t=!1,r){U={p:U,c:null,e:null,m:!1,s:e,x:null,l:null},ot&&!t&&(U.l={s:null,u:null,r1:[],r2:re(!1)})}function he(e){const t=U;if(t!==null){const s=t.e;if(s!==null){var r=R,i=z;t.e=null;try{for(var n=0;n<s.length;n++){var a=s[n];ke(a.effect),Le(a.reaction),wr(a.fn)}}finally{ke(r),Le(i)}}U=t.p,t.m=!0}return{}}function Oi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(De in e)cr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&De in r&&cr(r)}}}function cr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{cr(e[i],t)}catch{}const r=gr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=Vr(r);for(let n in i){const a=i[n].get;if(a)try{a.call(e)}catch{}}}}}function ji(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Li=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function zi(e){return Li.includes(e)}const Ui={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Fi(e){return e=e.toLowerCase(),Ui[e]??e}const Mi=["touchstart","touchmove"];function qi(e){return Mi.includes(e)}function Bi(e,t){if(t){const r=document.body;e.autofocus=!0,Mt(()=>{document.activeElement===r&&e.focus()})}}let jr=!1;function Vi(){jr||(jr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function yn(e){var t=z,r=R;Le(null),ke(null);try{return e()}finally{Le(t),ke(r)}}function Wi(e,t,r,i=r){e.addEventListener(t,()=>yn(r));const n=e.__on_r;n?e.__on_r=()=>{n(),i(!0)}:e.__on_r=()=>i(!0),Vi()}const mn=new Set,dr=new Set;function xn(e,t,r,i){function n(a){if(i.capture||gt.call(t,a),!a.cancelBubble)return yn(()=>r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Mt(()=>{t.addEventListener(e,n,i)}):t.addEventListener(e,n,i),n}function Ye(e,t,r,i,n){var a={capture:i,passive:n},s=xn(e,t,r,a);(t===document.body||t===window||t===document)&&on(()=>{t.removeEventListener(e,s,a)})}function Ie(e){for(var t=0;t<e.length;t++)mn.add(e[t]);for(var r of dr)r(e)}function gt(e){var b;var t=this,r=t.ownerDocument,i=e.type,n=((b=e.composedPath)==null?void 0:b.call(e))||[],a=n[0]||e.target,s=0,o=e.__root;if(o){var c=n.indexOf(o);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var l=n.indexOf(t);if(l===-1)return;c<=l&&(s=c)}if(a=n[s]||e.target,a!==t){Bn(e,"currentTarget",{configurable:!0,get(){return a||r}});var u=z,d=R;Le(null),ke(null);try{for(var f,v=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+i];if(y!==void 0&&!a.disabled)if(vr(y)){var[C,...x]=y;C.apply(a,[e,...x])}else y.call(a,e)}catch(w){f?v.push(w):f=w}if(e.cancelBubble||g===t||g===null)break;a=g}if(f){for(let w of v)queueMicrotask(()=>{throw w});throw f}}finally{e.__root=t,delete e.currentTarget,Le(u),ke(d)}}}function wn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function kt(e,t){var r=R;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function O(e,t){var r=(t&di)!==0,i=(t&fi)!==0,n,a=!e.startsWith("<!>");return()=>{n===void 0&&(n=wn(a?e:"<!>"+e),r||(n=tt(n)));var s=i?document.importNode(n,!0):n.cloneNode(!0);if(r){var o=tt(s),c=s.lastChild;kt(o,c)}else kt(s,s);return s}}function $i(e,t,r="svg"){var i=!e.startsWith("<!>"),n=`<${r}>${i?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var s=wn(n),o=tt(s);a=tt(o)}var c=a.cloneNode(!0);return kt(c,c),c}}function se(){var e=document.createDocumentFragment(),t=document.createComment(""),r=zt();return e.append(t,r),kt(t,r),e}function T(e,t){e!==null&&e.before(t)}function ie(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function Hi(e,t){return Ki(e,t)}const He=new Map;function Ki(e,{target:t,anchor:r,props:i={},events:n,context:a,intro:s=!0}){_i();var o=new Set,c=d=>{for(var f=0;f<d.length;f++){var v=d[f];if(!o.has(v)){o.add(v);var g=qi(v);t.addEventListener(v,gt,{passive:g});var y=He.get(v);y===void 0?(document.addEventListener(v,gt,{passive:g}),He.set(v,1)):He.set(v,y+1)}}};c(_r(mn)),dr.add(c);var l=void 0,u=xi(()=>{var d=r??t.appendChild(zt());return rt(()=>{if(a){ge({});var f=U;f.c=a}n&&(i.$$events=n),l=e(d,i)||{},a&&he()}),()=>{var g;for(var f of o){t.removeEventListener(f,gt);var v=He.get(f);--v===0?(document.removeEventListener(f,gt),He.delete(f)):He.set(f,v)}dr.delete(c),d!==r&&((g=d.parentNode)==null||g.removeChild(d))}});return Yi.set(l,u),l}let Yi=new WeakMap;function M(e,t,r=!1){var i=e,n=null,a=null,s=te,o=r?Lt:0,c=!1;const l=(d,f=!0)=>{c=!0,u(f,d)},u=(d,f)=>{s!==(s=d)&&(s?(n?xt(n):f&&(n=rt(()=>f(i))),a&&mt(a,()=>{a=null})):(a?xt(a):f&&(a=rt(()=>f(i))),n&&mt(n,()=>{n=null})))};Ft(()=>{c=!1,t(l),c||u(null,null)},o)}function lt(e,t){return t}function Gi(e,t,r,i){for(var n=[],a=t.length,s=0;s<a;s++)Er(t[s].e,n,!0);var o=a>0&&n.length===0&&r!==null;if(o){var c=r.parentNode;gi(c),c.append(r),i.clear(),Pe(e,t[0].prev,t[a-1].next)}fn(n,()=>{for(var l=0;l<a;l++){var u=t[l];o||(i.delete(u.k),Pe(e,u.prev,u.next)),we(u.e,!o)}})}function ut(e,t,r,i,n,a=null){var s=e,o={flags:t,items:new Map,first:null},c=(t&Gr)!==0;if(c){var l=e;s=l.appendChild(zt())}var u=null,d=!1;Ft(()=>{var f=r(),v=vr(f)?f:f==null?[]:_r(f),g=v.length;if(!(d&&g===0)){d=g===0;{var y=z;Ji(v,o,s,n,t,(y.f&me)!==0,i)}a!==null&&(g===0?u?xt(u):u=rt(()=>a(s)):u!==null&&mt(u,()=>{u=null})),r()}})}function Ji(e,t,r,i,n,a,s,o){var B,E,A,K;var c=(n&ai)!==0,l=(n&(pr|yr))!==0,u=e.length,d=t.items,f=t.first,v=f,g,y=null,C,x=[],b=[],w,N,p,m;if(c)for(m=0;m<u;m+=1)w=e[m],N=s(w,m),p=d.get(N),p!==void 0&&((B=p.a)==null||B.measure(),(C??(C=new Set)).add(p));for(m=0;m<u;m+=1){if(w=e[m],N=s(w,m),p=d.get(N),p===void 0){var j=v?v.e.nodes_start:r;y=Zi(j,t,y,y===null?t.first:y.next,w,N,m,i,n),d.set(N,y),x=[],b=[],v=y.next;continue}if(l&&Xi(p,w,m,n),p.e.f&me&&(xt(p.e),c&&((E=p.a)==null||E.unfix(),(C??(C=new Set)).delete(p))),p!==v){if(g!==void 0&&g.has(p)){if(x.length<b.length){var P=b[0],D;y=P.prev;var F=x[0],Z=x[x.length-1];for(D=0;D<x.length;D+=1)Lr(x[D],P,r);for(D=0;D<b.length;D+=1)g.delete(b[D]);Pe(t,F.prev,Z.next),Pe(t,y,F),Pe(t,Z,P),v=P,y=Z,m-=1,x=[],b=[]}else g.delete(p),Lr(p,v,r),Pe(t,p.prev,p.next),Pe(t,p,y===null?t.first:y.next),Pe(t,y,p),y=p;continue}for(x=[],b=[];v!==null&&v.k!==N;)(a||!(v.e.f&me))&&(g??(g=new Set)).add(v),b.push(v),v=v.next;if(v===null)continue;p=v}x.push(p),y=p,v=p.next}if(v!==null||g!==void 0){for(var G=g===void 0?[]:_r(g);v!==null;)(a||!(v.e.f&me))&&G.push(v),v=v.next;var ee=G.length;if(ee>0){var q=n&Gr&&u===0?r:null;if(c){for(m=0;m<ee;m+=1)(A=G[m].a)==null||A.measure();for(m=0;m<ee;m+=1)(K=G[m].a)==null||K.fix()}Gi(t,G,q,d)}}c&&Mt(()=>{var oe;if(C!==void 0)for(p of C)(oe=p.a)==null||oe.apply()}),R.first=t.first&&t.first.e,R.last=y&&y.e}function Xi(e,t,r,i){i&pr&&ar(e.v,t),i&yr?ar(e.i,r):e.i=r}function Zi(e,t,r,i,n,a,s,o,c,l){var u=(c&pr)!==0,d=(c&si)===0,f=u?d?mr(n):re(n):n,v=c&yr?re(s):s,g={i:v,v:f,k:a,a:null,e:null,prev:r,next:i};try{return g.e=rt(()=>o(e,f,v),Qr),g.e.prev=r&&r.e,g.e.next=i&&i.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function Lr(e,t,r){for(var i=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==i;){var s=Ut(a);n.before(a),a=s}}function Pe(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function de(e,t,r,i,n){var o;var a=(o=t.$$slots)==null?void 0:o[r],s=!1;a===!0&&(a=t.children,s=!0),a===void 0||a(e,s?()=>i:i)}function Qi(e,t,r,i,n,a){var s,o,c=null,l=e,u;Ft(()=>{const d=t()||null;var f=Xr;d!==s&&(u&&(d===null?mt(u,()=>{u=null,o=null}):d===o?xt(u):we(u)),d&&d!==o&&(u=rt(()=>{c=document.createElementNS(f,d),kt(c,c);{var v=c.appendChild(zt());i(c,v)}R.nodes_end=c,l.before(c)})),s=d,s&&(o=s))},Lt)}function ea(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function $t(e,t,r,i){var n=e.__attributes??(e.__attributes={});n[t]!==(n[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[ir]=r),r==null?e.removeAttribute(t):typeof r!="string"&&kn(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function zr(e,t,r,i,n=!1,a=!1,s=!1){var o=t||{},c=e.tagName==="OPTION";for(var l in t)l in r||(r[l]=null);var u=kn(e),d=e.__attributes??(e.__attributes={});for(const b in r){let w=r[b];if(c&&b==="value"&&w==null){e.value=e.__value="",o[b]=w;continue}var f=o[b];if(w!==f){o[b]=w;var v=b[0]+b[1];if(v!=="$$"){if(v==="on"){const N={},p="$$"+b;let m=b.slice(2);var g=zi(m);if(ji(m)&&(m=m.slice(0,-7),N.capture=!0),!g&&f){if(w!=null)continue;e.removeEventListener(m,o[p],N),o[p]=null}if(w!=null)if(g)e[`__${m}`]=w,Ie([m]);else{let j=function(P){o[b].call(this,P)};var x=j;o[p]=xn(m,e,j,N)}else g&&(e[`__${m}`]=void 0)}else if(b==="style"&&w!=null)e.style.cssText=w+"";else if(b==="autofocus")Bi(e,!!w);else if(b==="__value"||b==="value"&&w!=null)e.value=e[b]=e.__value=w;else if(b==="selected"&&c)ea(e,w);else{var y=b;n||(y=Fi(y));var C=y==="defaultValue"||y==="defaultChecked";if(w==null&&!a&&!C)if(d[b]=null,y==="value"||y==="checked"){let N=e;if(y==="value"){let p=N.defaultValue;N.removeAttribute(y),N.defaultValue=p}else{let p=N.defaultChecked;N.removeAttribute(y),N.defaultChecked=p}}else e.removeAttribute(b);else C||u.includes(y)&&(a||typeof w!="string")?e[y]=w:typeof w!="function"&&$t(e,y,w)}b==="style"&&"__styles"in e&&(e.__styles={})}}}return o}var Ur=new Map;function kn(e){var t=Ur.get(e.nodeName);if(t)return t;Ur.set(e.nodeName,t=[]);for(var r,i=e,n=Element.prototype;n!==i;){r=Vr(i);for(var a in r)r[a].set&&t.push(a);i=gr(i)}return t}function ta(e){if(e.loading==="lazy"){var t=e.src;e[ir]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[ir]!=="eager"&&(e.loading="lazy"),e.src=t})}}function J(e,t){var r=e.__className,i=ra(t);(r!==i||Qr)&&(t==null?e.removeAttribute("class"):e.className=i,e.__className=i)}function ra(e){return e??""}function En(e,t,r=t){var i=qt();Wi(e,"input",n=>{var a=n?e.defaultValue:e.value;if(a=Jt(e)?Xt(a):a,r(a),i&&a!==(a=t())){var s=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(o,e.value.length))}}),ze(t)==null&&e.value&&r(Jt(e)?Xt(e.value):e.value),kr(()=>{var n=t();Jt(e)&&n===Xt(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Jt(e){var t=e.type;return t==="number"||t==="range"}function Xt(e){return e===""?null:+e}function Fr(e,t){return e===t||(e==null?void 0:e[De])===t}function Ge(e={},t,r,i){return wr(()=>{var n,a;return kr(()=>{n=a,a=[],ze(()=>{e!==r(...a)&&(t(e,...a),n&&Fr(r(...n),e)&&t(null,...n))})}),()=>{Mt(()=>{a&&Fr(r(...a),e)&&t(null,...a)})}}),e}function na(e=!1){const t=U,r=t.l.u;if(!r)return;let i=()=>Oi(t.s);if(e){let n=0,a={};const s=Se(()=>{let o=!1;const c=t.s;for(const l in c)c[l]!==a[l]&&(a[l]=c[l],o=!0);return o&&n++,n});i=()=>_(s)}r.b.length&&yi(()=>{Mr(t,i),rr(r.b)}),Te(()=>{const n=ze(()=>r.m.map($n));return()=>{for(const a of n)typeof a=="function"&&a()}}),r.a.length&&Te(()=>{Mr(t,i),rr(r.a)})}function Mr(e,t){if(e.l.s)for(const r of e.l.s)_(r);t()}function In(e,t,r){if(e==null)return t(void 0),Ze;const i=ze(()=>e.subscribe(t,r));return i.unsubscribe?()=>i.unsubscribe():i}let Nt=!1;function ne(e,t,r){const i=r[t]??(r[t]={store:null,source:mr(void 0),unsubscribe:Ze});if(i.store!==e)if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=Ze;else{var n=!0;i.unsubscribe=In(e,a=>{n?i.source.v=a:k(i.source,a)}),n=!1}return _(i.source)}function Ct(){const e={};return on(()=>{for(var t in e)e[t].unsubscribe()}),e}function ia(e){var t=Nt;try{return Nt=!1,[e(),Nt]}finally{Nt=t}}const aa={get(e,t){if(!e.exclude.includes(t))return _(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=ce({get[t](){return e.props[t]}},t,Jr)),e.special[t](r),ur(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),ur(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function ue(e,t){return new Proxy({props:e,exclude:t,special:{},version:re(0)},aa)}const sa={get(e,t){let r=e.props.length;for(;r--;){let i=e.props[r];if(_t(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,r){let i=e.props.length;for(;i--;){let n=e.props[i];_t(n)&&(n=n());const a=Re(n,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let i=e.props[r];if(_t(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const n=Re(i,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(e,t){if(t===De||t===Hr)return!1;for(let r of e.props)if(_t(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){_t(r)&&(r=r());for(const i in r)t.includes(i)||t.push(i)}return t}};function be(...e){return new Proxy({props:e},sa)}function qr(e){for(var t=R,r=R;t!==null&&!(t.f&(_e|at));)t=t.parent;try{return ke(t),e()}finally{ke(r)}}function ce(e,t,r,i){var j;var n=(r&oi)!==0,a=!ot||(r&li)!==0,s=(r&ui)!==0,o=(r&ci)!==0,c=!1,l;s?[l,c]=ia(()=>e[t]):l=e[t];var u=De in e||Hr in e,d=((j=Re(e,t))==null?void 0:j.set)??(u&&s&&t in e?P=>e[t]=P:void 0),f=i,v=!0,g=!1,y=()=>(g=!0,v&&(v=!1,o?f=ze(i):f=i),f);l===void 0&&i!==void 0&&(d&&a&&Qn(),l=y(),d&&d(l));var C;if(a)C=()=>{var P=e[t];return P===void 0?y():(v=!0,g=!1,P)};else{var x=qr(()=>(n?Se:hi)(()=>e[t]));x.f|=Kn,C=()=>{var P=_(x);return P!==void 0&&(f=void 0),P===void 0?f:P}}if(!(r&Jr))return C;if(d){var b=e.$$legacy;return function(P,D){return arguments.length>0?((!a||!D||b||c)&&d(D?C():P),P):C()}}var w=!1,N=!1,p=mr(l),m=qr(()=>Se(()=>{var P=C(),D=_(p);return w?(w=!1,N=!0,D):(N=!1,p.v=P)}));return n||(m.equals=br),function(P,D){if(arguments.length>0){const F=D?_(m):a&&s?V(P):P;return m.equals(F)||(w=!0,k(p,F),g&&f!==void 0&&(f=F),ze(()=>_(m))),P}return _(m)}}function ct(e){U===null&&_n(),ot&&U.l!==null?la(U).m.push(e):Te(()=>{const t=ze(e);if(typeof t=="function")return t})}function oa(e){U===null&&_n(),ct(()=>()=>ze(e))}function la(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ua="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ua);ii();/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var da=$i("<svg><!><!></svg>");function pe(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]),i=ue(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ge(t,!1);let n=ce(t,"name",8,void 0),a=ce(t,"color",8,"currentColor"),s=ce(t,"size",8,24),o=ce(t,"strokeWidth",8,2),c=ce(t,"absoluteStrokeWidth",8,!1),l=ce(t,"iconNode",24,()=>[]);const u=(...y)=>y.filter((C,x,b)=>!!C&&b.indexOf(C)===x).join(" ");na();var d=da();let f;var v=h(d);ut(v,1,l,lt,(y,C)=>{let x=()=>_(C)[0],b=()=>_(C)[1];var w=se(),N=Y(w);Qi(N,x,!0,(p,m)=>{let j;H(()=>j=zr(p,j,{...b()},void 0,p.namespaceURI===Xr,p.nodeName.includes("-")))}),T(y,w)});var g=I(v);de(g,t,"default",{}),H(()=>f=zr(d,f,{...ca,...i,width:s(),height:s(),stroke:a(),"stroke-width":c()?Number(o())*24/Number(s()):o(),class:u("lucide-icon","lucide",n()?`lucide-${n()}`:"",r.class)},void 0,!0)),T(e,d),he()}function Sn(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"circle-user-round"},()=>r,{iconNode:[["path",{d:"M18 20a6 6 0 0 0-12 0"}],["circle",{cx:"12",cy:"10",r:"4"}],["circle",{cx:"12",cy:"12",r:"10"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function fa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function nt(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function va(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"message-square"},()=>r,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function _a(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function ga(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"paperclip"},()=>r,{iconNode:[["path",{d:"M13.234 20.252 21 12.3"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function ha(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"send"},()=>r,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function ba(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"smile"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function pa(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function ya(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Sr(e,t){const r=ue(t,["children","$$slots","$$events","$$legacy"]);pe(e,be({name:"x"},()=>r,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(n,a)=>{var s=se(),o=Y(s);de(o,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}const Ke=[];function fe(e,t=Ze){let r=null;const i=new Set;function n(o){if(Yr(e,o)&&(e=o,r)){const c=!Ke.length;for(const l of i)l[1](),Ke.push(l,e);if(c){for(let l=0;l<Ke.length;l+=2)Ke[l][0](Ke[l+1]);Ke.length=0}}}function a(o){n(o(e))}function s(o,c=Ze){const l=[o,c];return i.add(l),i.size===1&&(r=t(n,a)||Ze),o(e),()=>{i.delete(l),i.size===0&&r&&(r(),r=null)}}return{set:n,update:a,subscribe:s}}function Ae(e){let t;return In(e,r=>t=r)(),t}const pt=fe({});function Et(e,t){return`${e}|${t}`}function ma(e){const[t,r]=e.split("|").map(Number);return{displayer:t,other:r}}const fr=fe(new Set),it=fe({}),et=fe(new Set),Je=fe({}),Xe=fe(new Set),Ot=fe({}),Ht=fe({}),yt=fe({});function xa(e,t){Ht.update(r=>{const i=r[e]||{};return{...r,[e]:{...i,[t]:(i[t]||0)+1}}})}function wa(e,t){Ht.update(r=>{const i=r[e]||{},{[t]:n,...a}=i;return{...r,[e]:a}})}const Ue=fe({});function ka(e){Ue.update(t=>({...t,[e]:{users:[],isLoading:!0,isRefreshing:!1}}))}function Ea(e,t){Ue.update(r=>({...r,[e]:{...r[e],users:t,isLoading:!1,isRefreshing:!1}}))}function Ia(e,t){Ue.update(r=>({...r,[e]:{...r[e],isRefreshing:t}}))}function Sa(e,t){return Ae(Ue)[e].users.some(i=>i.id===t)}const ht=fe({});function Ta(e){const t=e.message;switch(t.response){case"RegistrationSuccess":Ae(et).has(e.client_id)&&(it.update(n=>({...n,[e.client_id]:e.server_id})),et.update(n=>(n.delete(e.client_id),n)));break;case"RegistrationFailure":et.update(n=>(n.delete(e.client_id),n)),Ot.update(n=>{const{[e.client_id]:a,...s}=n;return s}),ht.update(n=>({...n,[e.client_id]:{message:"Failed to register to server. Please try again.",type:"error"}}));break;case"UnregisterSuccess":Ae(Xe).has(e.client_id)&&(Je.update(n=>({...n,[e.client_id]:!1})),it.update(n=>{const{[e.client_id]:a,...s}=n;return s}),Xe.update(n=>(n.delete(e.client_id),n)),Ot.update(n=>{const{[e.client_id]:a,...s}=n;return s}),pt.update(n=>{const a={};for(const s in n){const{displayer:o}=ma(s);o!==e.client_id&&(a[s]=n[s])}return a}),Ht.update(n=>{const{[e.client_id]:a,...s}=n;return s}),yt.update(n=>{const{[e.client_id]:a,...s}=n;return s}));break;case"UnregisterFailure":Ae(Xe).has(e.client_id)&&(console.warn(`Failed to unregister client ${e.client_id}`),Je.update(n=>({...n,[e.client_id]:!1})),Xe.update(n=>(n.delete(e.client_id),n)));break;case"ActiveUsersList":console.log("ActiveUsersList",t.users);let r=t.users.filter(n=>n.id!==e.client_id);Ea(e.client_id,r);break;case"NewUserRegistered":const i={id:t.id,name:t.name};Ue.update(n=>{var s;const a=((s=n[e.client_id])==null?void 0:s.users)??[];return{...n,[e.client_id]:{...n[e.client_id],users:[...a,i]}}}),ht.update(n=>({...n,[e.client_id]:{message:`${t.name} joined the server`,type:"success"}}));break;case"UserUnregistered":Ue.update(n=>{const a=n[e.client_id].users.find(o=>o.id===t.id),s=n[e.client_id].users.filter(o=>o.id!==t.id);return a&&ht.update(o=>({...o,[e.client_id]:{message:`${a.name} left the server`,type:"error"}})),{...n,[e.client_id]:{...n[e.client_id],users:s}}}),yt.update(n=>{if(n[e.client_id]===t.id){const{[e.client_id]:a,...s}=n;return s}return n});break;case"PrivateMessage":if(Sa(e.client_id,t.sender_id)){const n=Et(e.client_id,t.sender_id);pt.update(s=>{const o=s[n]||[];return{...s,[n]:[...o,{content:t.message.content,timestamp:t.message.timestamp,sender_id:t.sender_id,receiver_id:e.client_id,server_id:e.server_id}]}}),Ae(yt)[e.client_id]!==t.sender_id&&xa(e.client_id,t.sender_id)}break;case"UserNotFound":console.warn(`User ${t.user_id} not found`);break;case"SendingError":if(t.message.request==="SendPrivateMessage"){const n=t.message,a=Et(n.message.sender_id,n.recipient_id);pt.update(s=>{const o=s[a];if(o)for(let c=o.length-1;c>=0;c--){const l=o[c];if(l.content.type===n.message.content.type&&l.content.data===n.message.content.data&&l.timestamp===n.message.timestamp&&l.sender_id===n.message.sender_id){l.status="failed";break}}return s})}ht.update(n=>({...n,[e.client_id]:{message:t.error,type:"error"}}));break}}let Ne=null,jt=0;const Ca=5,Tr=fe(!1);function Tn(){return Ne&&Ne.close(),Ne=new WebSocket("ws://localhost:7374"),Ne.onopen=function(){console.log("WebSocket connection opened"),Qt(!0)},Ne.onclose=function(){console.log("WebSocket connection closed"),Qt(!1)},Ne.onerror=function(e){console.error("WebSocket error:",e),Qt(!1)},Ne.onmessage=function(e){console.log("WebSocket message received:",e.data);const t=JSON.parse(e.data.toString());console.log("WebSocket message parsed:",t),Ta(t)},Ne}function Zt(){if(jt>=Ca){console.log("Max reconnect attempts reached");return}jt++,Tn()}function Qt(e){Tr.set(e),jt=e?0:jt}async function Br(e,t,r,i){if(!r)return;const n=Ae(it)[e],a=new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),o={content:{type:i,data:r},timestamp:a,sender_id:e,receiver_id:t,server_id:n,status:"sent"};try{if(!(await fetch("/api/send-to",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Network response was not ok");let l=Et(e,t);return pt.update(u=>{const d=u[l]||[];return{...u,[l]:[...d,o]}}),!0}catch(c){return console.error("Error sending message:",c),!1}}const Na=["image/jpeg","image/png","image/gif","image/webp"];async function er(e){return new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=n=>r(n)})}function tr(e){return Na.includes(e.type)}var Pa=(e,t)=>{e.stopPropagation(),k(t,!_(t))},Aa=(e,t,r)=>{e.stopPropagation(),t(_(r))},Ra=O('<button class="emoji-option p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200"> </button>'),Da=O('<div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-gray-400"><button class="emoji-button hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 bg-white dark:bg-gray-700 rounded-full p-1" aria-label="Insert emoji"><!></button> <div></div></div>');function Oa(e,t){ge(t,!0);let r=$(!1),i;const n=["😂","❤️","😍","🤣","😊","🙏","🥰","😭","😘","👍","🤔","😅","🎉","👏","🥳","🤗","😎","💔","💕","😜"],a=d=>{var f;(f=t.onEmojiSelect)==null||f.call(t,d)},s=d=>{i&&!i.contains(d.target)&&k(r,!1)};ct(()=>(document.addEventListener("click",s),()=>{document.removeEventListener("click",s)}));var o=Da(),c=h(o);c.__click=[Pa,r];var l=h(c);ba(l,{class:"size-5"});var u=I(c,2);ut(u,21,()=>n,lt,(d,f)=>{var v=Ra();v.__click=[Aa,a,f];var g=h(v);H(()=>ie(g,_(f))),T(d,v)}),Ge(u,d=>i=d,()=>i),H(()=>J(u,`emoji-dropdown ${(_(r)?"grid":"hidden")??""} select-none absolute bottom-full right-0 mb-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2 grid-cols-5 gap-2`)),T(e,o),he()}Ie(["click"]);var ja=O("<div> </div>"),La=(e,t)=>{var r;return(r=t.onImageClick)==null?void 0:r.call(t,t.message.content.data)},za=O('<div><img alt="Sent img" class="w-full h-auto rounded-xl object-cover cursor-pointer hover:opacity-90 transition-opacity" loading="lazy"></div>'),Ua=O('<div><div><!> <div><span class="text-xs text-gray-500 dark:text-gray-400"> </span> <!></div></div></div>');function Fa(e,t){ge(t,!0);var r=Ua(),i=h(r),n=h(i);{var a=f=>{var v=ja(),g=h(v);H(()=>{J(v,`inline-block rounded-2xl px-4 py-2 ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 text-white rounded-br-none":"bg-blue-500 text-white rounded-br-none")??""} shadow-sm break-words whitespace-pre-wrap overflow-hidden svelte-sjx01p`),ie(g,t.message.content.data)}),T(f,v)},s=f=>{var v=se(),g=Y(v);{var y=C=>{var x=za(),b=h(x);b.__click=[La,t],H(()=>{J(x,`p-1 rounded-xl ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 rounded-br-none":"bg-blue-500 rounded-br-none")??""} shadow-sm`),$t(b,"src",t.message.content.data)}),Ye("load",b,function(...w){var N;(N=t.onImageLoad)==null||N.apply(this,w)}),ta(b),T(C,x)};M(g,C=>{t.message.content.type==="Image"&&C(y)},!0)}T(f,v)};M(n,f=>{t.message.content.type==="Text"?f(a):f(s,!1)})}var o=I(n,2),c=h(o),l=h(c),u=I(c,2);{var d=f=>{ya(f,{class:"size-3 text-red-500"})};M(u,f=>{t.message.status==="failed"&&f(d)})}H(()=>{J(r,`flex ${(t.isReceived?"justify-start":"justify-end")??""} animate-fadeIn`),J(i,`flex flex-col ${(t.message.content.type==="Text"?"max-w-[70%]":"w-[60%]")??""} gap-0.5`),J(o,`flex items-center gap-1 px-1 ${(t.isReceived?"justify-start":"justify-end")??""}`),ie(l,t.message.timestamp)}),T(e,r),he()}Ie(["click"]);var Ma=O('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10"><div><span> </span> <button class="ml-2 p-1 hover:bg-black/20 rounded-full transition-colors" aria-label="Dismiss"><!></button></div></div>');function Cn(e,t){ge(t,!0);let r=ce(t,"type",3,"error"),i=ce(t,"duration",3,3e3);ce(t,"key",3,0);let n=$(!0),a;Te(()=>(k(n,!0),a&&clearTimeout(a),a=setTimeout(()=>{s()},i()),()=>{a&&clearTimeout(a)}));function s(){var u;k(n,!1),a&&clearTimeout(a),(u=t.onClose)==null||u.call(t)}var o=se(),c=Y(o);{var l=u=>{var d=Ma(),f=h(d),v=h(f),g=h(v),y=I(v,2);y.__click=s;var C=h(y);Sr(C,{class:"size-4"}),H(()=>{J(f,`px-4 py-2 rounded-lg shadow-lg ${(r()==="error"?"bg-red-500":"bg-green-500")??""} text-white flex items-center gap-2`),ie(g,t.message)}),T(u,d)};M(c,u=>{_(n)&&u(l)})}T(e,o),he()}Ie(["click"]);function qa(e,t,r){k(t,null),k(r,null)}function Ba(e,t){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())}var Va=O('<div class="absolute inset-5 backdrop-blur-sm bg-blue-100/70 dark:bg-blue-900/70 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center z-10 pointer-events-none"><p class="text-blue-600 dark:text-blue-400 font-medium">Release here to attach image</p></div>'),Wa=O('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),$a=O('<button class="absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"><!></button>'),Ha=O('<div class="p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="relative inline-block"><img alt="Preview"> <!></div></div>'),Ka=O('<div class="w-full h-[450px] flex flex-col"><div class="p-4 border-b border-gray-100 dark:border-gray-700"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"><!> </h3> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div></div> <div class="relative flex-1 overflow-hidden"><!> <div class="chat-box absolute inset-0 overflow-y-auto space-y-4 p-4 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"></div></div> <!> <div class="p-4 border-t border-gray-100 dark:border-gray-700"><div class="flex gap-2"><input type="file" accept="image/*" class="hidden"> <button class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors" title="Attach image"><!></button> <div class="relative flex-1"><input type="text" class="message-input w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" placeholder="Write a message..."> <!></div> <button class="send-button p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center"><!></button></div></div></div> <!>',1);function Ya(e,t){ge(t,!0);const r=Ct(),i=()=>ne(Ue,"$clientUsers",r),n=()=>ne(pt,"$messages",r);let a=$(void 0),s=$(""),o,c,l=!0,u=$(!1),d=$(""),f=$(0);const v=Se(()=>{var S;return((S=i()[t.clientId])==null?void 0:S.users.find(L=>L.id===t.destinationId))??{id:t.destinationId,name:`Client ${t.destinationId}`}}),g=()=>{o&&(o.scrollTop=o.scrollHeight)};function y(){setTimeout(g,60)}mi(()=>{o&&g()}),Te(()=>{n()[Et(t.clientId,t.destinationId)]&&l&&setTimeout(g,60)}),Te(()=>{l=!0,t.destinationId,setTimeout(g,0)});const C=()=>{if(!o)return;l=Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=1};let x=$(null),b=$(null),w,N=$(!1);async function p(S){var Q;const L=S.target,W=(Q=L.files)==null?void 0:Q[0];W&&tr(W)&&(k(x,V(await er(W))),k(b,V(_(x)))),L.value=""}async function m(S){var W;const L=(W=S.clipboardData)==null?void 0:W.items;if(L){for(const Q of L)if(Q.kind==="file"){const vt=Q.getAsFile();if(vt&&tr(vt)){S.preventDefault(),k(x,V(await er(vt))),k(b,V(_(x)));return}}}}async function j(){if(!(!_(x)&&!_(s).trim()))try{_(x)&&(k(N,!0),await Br(t.clientId,t.destinationId,_(x),"Image"),k(x,null),k(b,null),k(N,!1)),_(s).trim()&&(await Br(t.clientId,t.destinationId,_(s),"Text"),k(s,""),_(a)&&(_(a).value="")),l=!0,setTimeout(()=>{g(),setTimeout(g,50)},60)}catch(S){k(N,!1),console.error(S),k(d,"Failed to send message. Please try again."),ur(f),k(u,!0)}}function P(S){var W;const L=((W=_(a))==null?void 0:W.selectionStart)??_(s).length;k(s,_(s).slice(0,L)+S+_(s).slice(L)),setTimeout(()=>{if(_(a)){const Q=L+S.length;_(a).setSelectionRange(Q,Q),_(a).focus()}},0)}let D=$(!1);function F(S){S.preventDefault(),S.stopPropagation(),k(D,!0)}function Z(S){const L=o.getBoundingClientRect(),W=S.clientX,Q=S.clientY;(W<=L.left||W>=L.right||Q<=L.top||Q>=L.bottom)&&k(D,!1)}async function G(S){var W;S.preventDefault(),k(D,!1);const L=(W=S.dataTransfer)==null?void 0:W.files[0];L&&tr(L)&&(k(x,V(await er(L))),k(b,V(_(x))))}var ee=Ka(),q=Y(ee),B=h(q),E=h(B),A=h(E),K=h(A);Sn(K,{class:"size-5 text-gray-600 dark:text-gray-300"});var oe=I(K),dt=I(A,2),Be=h(dt),Ce=I(B,2),ye=h(Ce);{var Pn=S=>{var L=Va();T(S,L)};M(ye,S=>{_(D)&&S(Pn)})}var Ve=I(ye,2);ut(Ve,5,()=>n()[Et(t.clientId,t.destinationId)]||[],lt,(S,L)=>{var W=Se(()=>_(L).sender_id!==t.clientId);Fa(S,{get message(){return _(L)},get isReceived(){return _(W)},get onImageClick(){return t.onImageClick},onImageLoad:y})}),Ge(Ve,S=>o=S,()=>o),Ge(Ce,S=>c=S,()=>c);var Cr=I(Ce,2);{var An=S=>{var L=Ha(),W=h(L),Q=h(W),vt=I(Q,2);{var Fn=We=>{var $e=Wa(),Gt=h($e);nt(Gt,{class:"size-8 text-blue-500 animate-spin"}),T(We,$e)},Mn=We=>{var $e=$a();$e.__click=[qa,x,b];var Gt=h($e);Sr(Gt,{class:"size-4"}),T(We,$e)};M(vt,We=>{_(N)?We(Fn):We(Mn,!1)})}H(()=>{$t(Q,"src",_(b)),J(Q,`max-h-48 rounded-lg ${(_(N)?"opacity-50":"")??""}`)}),T(S,L)};M(Cr,S=>{_(b)&&S(An)})}var Rn=I(Cr,2),Dn=h(Rn),Kt=h(Dn);Kt.__change=p,Ge(Kt,S=>w=S,()=>w);var Yt=I(Kt,2);Yt.__click=()=>w.click();var On=h(Yt);ga(On,{class:"size-5"});var Nr=I(Yt,2),ft=h(Nr);ft.__keydown=[Ba,j],Ge(ft,S=>k(a,S),()=>_(a));var jn=I(ft,2);Oa(jn,{get inputElement(){return _(a)},onEmojiSelect:P});var Pr=I(Nr,2);Pr.__click=j;var Ln=h(Pr);ha(Ln,{class:"size-5"});var zn=I(q,2);{var Un=S=>{Cn(S,{get message(){return _(d)},type:"error",onClose:()=>k(u,!1),get key(){return _(f)}})};M(zn,S=>{_(u)&&S(Un)})}H(()=>{ie(oe,` ${_(v).name??""}`),ie(Be,`ID: ${_(v).id??""}`)}),Ye("scroll",Ve,C),Ye("dragover",Ve,F),Ye("dragleave",Ve,Z),Ye("drop",Ve,G),Ye("paste",ft,m),En(ft,()=>_(s),S=>k(s,S)),T(e,ee),he()}Ie(["click","change","keydown"]);async function Nn(e){try{const t=Ae(it)[e];if(!(await fetch(`/api/registered-users?client_id=${e}&server_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to request registered users")}catch(t){console.error("Error requesting registered users:",t)}}var Ga=e=>e.stopPropagation(),Ja=O('<div><div class="relative w-[80%] h-[80%] flex items-center justify-center"><div class="relative w-full h-full flex items-center justify-center"><img alt="Full size" class="rounded-lg shadow-xl min-w-[300px] min-h-[300px] w-auto h-auto max-w-full max-h-full object-contain"> <div class="absolute -top-4 -right-4 flex gap-2"><button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button> <button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button></div></div></div></div>');function Xa(e,t){ge(t,!0);let r=ce(t,"containerClass",3,"");function i(g){g.key==="Escape"&&t.onClose()}function n(){const g=document.createElement("a");g.href=t.src,g.download=`image-${Date.now()}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g)}ct(()=>(document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}));var a=Ja();a.__click=function(...g){var y;(y=t.onClose)==null||y.apply(this,g)};var s=h(a);s.__click=[Ga];var o=h(s),c=h(o),l=I(c,2),u=h(l);u.__click=n;var d=h(u);fa(d,{class:"size-5"});var f=I(u,2);f.__click=function(...g){var y;(y=t.onClose)==null||y.apply(this,g)};var v=h(f);Sr(v,{class:"size-5"}),H(()=>{J(a,`absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm ${r()??""}`),$t(c,"src",t.src)}),T(e,a),he()}Ie(["click"]);async function Za(e,t){Ia(t.clientId,!0),await Nn(t.clientId)}var Qa=O('<div class="flex justify-center py-4"><div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div></div>'),es=(e,t,r)=>t(_(r).id),ts=O('<span class="absolute right-2 top-1/2 -translate-y-1/2 min-w-[20px] h-5 flex items-center justify-center bg-blue-500 text-white text-xs rounded-full px-1.5"> </span>'),rs=O("<button><!> <span> </span> <!></button>"),ns=O('<div class="space-y-2"></div>'),is=O('<div class="relative flex-1"><!> <!></div>'),as=O('<div class="flex items-center justify-center w-full h-[450px]"><p class="text-gray-500 dark:text-gray-400">Select a user to start chatting</p></div>'),ss=O(`<div class="flex w-full"><div class="w-52 bg-white dark:bg-gray-800 border-r border-gray-300 dark:border-gray-700 overflow-hidden"><div class="p-2 border-b border-gray-300 dark:border-gray-700"><button class="w-full px-3 py-2 flex items-center justify-center gap-2 text-sm
                       bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500
                       rounded-lg transition-colors text-gray-800 dark:text-white"><span>Refresh Users</span> <!></button></div> <div class="px-3 py-2"><!></div></div> <!></div>`);function os(e,t){ge(t,!0);const r=Ct(),i=()=>ne(Ue,"$clientUsers",r),n=()=>ne(Ht,"$unreadMessages",r);let a=ce(t,"destinationId",31,()=>-1);ct(()=>{ka(t.clientId),Nn(t.clientId)});let s=$(null);Te(()=>{yt.update(p=>({...p,[t.clientId]:a()})),a()!==-1&&wa(t.clientId,a()),k(s,null)});function o(p){a(p)}var c=ss(),l=h(c),u=h(l),d=h(u);d.__click=[Za,t];var f=I(h(d),2);{var v=p=>{nt(p,{class:"size-4 animate-spin"})};M(f,p=>{var m;(m=i()[t.clientId])!=null&&m.isRefreshing&&p(v)})}var g=I(u,2),y=h(g);{var C=p=>{var m=Qa();T(p,m)},x=p=>{var m=ns();ut(m,5,()=>{var j;return((j=i()[t.clientId])==null?void 0:j.users)||[]},lt,(j,P)=>{var D=rs();D.__click=[es,o,P];var F=h(D),Z=Se(()=>`size-5 ${(a()===_(P).id?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300")??""}`);Sn(F,{get class(){return _(Z)}});var G=I(F,2),ee=h(G),q=I(G,2);{var B=E=>{var A=ts(),K=h(A);H(()=>ie(K,n()[t.clientId][_(P).id])),T(E,A)};M(q,E=>{var A;(((A=n()[t.clientId])==null?void 0:A[_(P).id])??0)>0&&E(B)})}H(()=>{J(D,`w-full p-2 rounded cursor-pointer transition-colors flex items-center gap-2 relative
                                   ${(a()===_(P).id?"bg-blue-100 dark:bg-blue-900":"hover:bg-gray-100 dark:hover:bg-gray-700")??""}`),J(G,a()===_(P).id?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-800 dark:text-gray-100"),ie(ee,_(P).name)}),T(j,D)}),T(p,m)};M(y,p=>{var m;(m=i()[t.clientId])!=null&&m.isLoading?p(C):p(x,!1)})}var b=I(l,2);{var w=p=>{var m=is(),j=h(m);Ya(j,{get clientId(){return t.clientId},get destinationId(){return a()},onImageClick:F=>k(s,V(F))});var P=I(j,2);{var D=F=>{Xa(F,{get src(){return _(s)},onClose:()=>k(s,null)})};M(P,F=>{_(s)&&F(D)})}T(p,m)},N=p=>{var m=as();T(p,m)};M(b,p=>{a()!==-1?p(w):p(N,!1)})}T(e,c),he()}Ie(["click"]);function ls(e,t,r,i){e.key==="Enter"&&_(t).trim()?(e.preventDefault(),r()):e.key==="Escape"&&(e.preventDefault(),i())}function us(e,t,r,i){if(_(t).length>0){const n=Math.floor(Math.random()*_(t).length);k(r,V(_(t)[n])),k(i,!0)}}var cs=O('<div class="flex items-center justify-center w-full h-[450px]"><div class="text-center"><!> <p class="text-gray-600 dark:text-gray-300">Registering to server...</p></div></div>'),ds=(e,t,r,i)=>{k(t,V(_(r))),k(i,!0)},fs=O("<button> </button>"),vs=O(`<div class="flex justify-center pt-4"><button class="px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg
                                   transition-all hover:bg-blue-700 dark:hover:bg-blue-600
                                   hover:shadow-md w-full sm:w-auto">Connect to Random Server</button></div>`),_s=O(`<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full"><h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"> </h2> <input type="text" placeholder="Enter your username" class="w-full p-3 mb-4 border rounded-lg dark:bg-gray-700 dark:text-gray-200
                               focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <div class="flex justify-end gap-3"><button class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">Cancel</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors
                                   disabled:opacity-50 disabled:cursor-not-allowed">Join Server</button></div></div></div>`),gs=O(`<div class="flex items-center justify-center flex-col w-full h-[450px] p-6"><div class="w-full max-w-md space-y-6"><div class="flex items-center justify-between"><h2 class="text-xl font-semibold text-gray-700 dark:text-gray-300">Available Servers</h2> <button class="inline-flex items-center justify-center px-3 py-2 rounded-lg
                               bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
                               transition-colors gap-2 text-gray-700 dark:text-gray-300"><span class="text-sm font-medium">Refresh</span> <!></button></div> <div></div> <!></div></div> <!>`,1),hs=O('<div class="flex w-full relative"><!></div>');function bs(e,t){ge(t,!0);const r=Ct(),i=()=>ne(et,"$pendingRegistrations",r);let n=$(V([])),a=$(!1),s=$(-1),o=$(""),c=$(!1),l;async function u(){k(c,!0);try{let x=await fetch(`/api/servers?id=${t.clientId}`);k(n,V(await x.json())),console.log("Servers: ",_(n).join(", "))}catch(x){console.error(x),k(n,V([1,2,3]))}finally{setTimeout(()=>{k(c,!1)},600)}}ct(async()=>{await u()}),Te(()=>{_(a)&&l&&l.focus()});async function d(){try{et.update(b=>(b.add(t.clientId),b)),(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:_(s),username:_(o)})})).ok?(k(a,!1),Ot.update(b=>({...b,[t.clientId]:_(o)})),k(o,"")):(et.update(b=>(b.delete(t.clientId),b)),t.showToast(`Registration failed for Server ${_(s)}. Please try again.`,"error"))}catch(x){console.error(x),t.showToast(`Registration failed for Server ${_(s)}. Please try again.`,"error")}}function f(){k(a,!1),k(o,"")}var v=hs(),g=h(v);{var y=x=>{var b=cs(),w=h(b),N=h(w);nt(N,{class:"size-8 animate-spin mx-auto mb-4 text-blue-500"}),T(x,b)},C=x=>{var b=gs(),w=Y(b),N=h(w),p=h(N),m=I(h(p),2);m.__click=u;var j=I(h(m),2),P=Se(()=>`size-5 ${(_(c)?"animate-spin":"hidden")??""}`);nt(j,{get class(){return _(P)}});var D=I(p,2);ut(D,21,()=>_(n),lt,(q,B)=>{var E=fs();E.__click=[ds,s,B,a];var A=h(E);H(()=>{J(E,`flex items-center justify-center px-6 py-3
                                   bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600
                                   text-gray-800 dark:text-gray-200 rounded-lg transition-all
                                   hover:shadow-md border border-gray-300 dark:border-gray-600
                                   ${(_(n).length===1?"text-lg":"")??""}`),ie(A,`Server ${_(B)??""}`)}),T(q,E)});var F=I(D,2);{var Z=q=>{var B=vs(),E=h(B);E.__click=[us,n,s,a],T(q,B)};M(F,q=>{_(n).length>1&&q(Z)})}var G=I(w,2);{var ee=q=>{var B=_s(),E=h(B),A=h(E),K=h(A),oe=I(A,2);oe.__keydown=[ls,o,d,f],Ge(oe,ye=>l=ye,()=>l);var dt=I(oe,2),Be=h(dt);Be.__click=f;var Ce=I(Be,2);Ce.__click=d,H(()=>{ie(K,`Connect to Server ${_(s)??""}`),Ce.disabled=!_(o)}),En(oe,()=>_(o),ye=>k(o,ye)),T(q,B)};M(G,q=>{_(a)&&q(ee)})}H(()=>{m.disabled=_(c),J(D,`grid gap-3 ${(_(n).length===1?"":"sm:grid-cols-2")??""}`)}),T(x,b)};M(g,x=>{i().has(t.clientId)?x(y):x(C,!1)})}T(e,v),he()}Ie(["click","keydown"]);var ps=O('<button class="px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200 flex items-center gap-1 disabled:opacity-75"><!> Disconnect</button> <span class="text-xs text-gray-500 dark:text-gray-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full"> </span>',1),ys=O('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-200 relative"><div class="p-4 border-b border-gray-300 dark:border-gray-700"><div class="flex justify-between items-center"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100"> </h2></div> <div class="flex items-center gap-2"><!> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"> </span></div></div></div> <!> <!></div>');function ms(e,t){ge(t,!0);const r=Ct(),i=()=>ne(yt,"$currentChats",r),n=()=>ne(ht,"$userEvents",r),a=()=>ne(Je,"$isDisconnecting",r),s=()=>ne(it,"$registrationStatus",r),o=()=>ne(Tr,"$connectionStatus",r),c=()=>ne(Ot,"$clientUsernames",r);let l=Se(()=>i()[t.clientId]??-1),u=$(null);Te(()=>{const E=n()[t.clientId];E&&k(u,V({message:E.message,type:E.type,key:Date.now()}))});function d(E,A){k(u,V({message:E,type:A,key:Date.now()}))}async function f(){if(!a()[t.clientId]){Je.update(E=>({...E,[t.clientId]:!0}));try{if(Xe.update(A=>(A.add(t.clientId),A)),!(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:s()[t.clientId]})})).ok){Je.update(A=>({...A,[t.clientId]:!1})),Xe.update(A=>(A.delete(t.clientId),A));return}}catch(E){console.error("Error unregistering:",E),Je.update(A=>({...A,[t.clientId]:!1}))}}}var v=ys(),g=h(v),y=h(g),C=h(y),x=h(C),b=h(x),w=I(b,2),N=I(x,2),p=h(N),m=I(C,2),j=h(m);{var P=E=>{var A=ps(),K=Y(A);K.__click=f;var oe=h(K);{var dt=ye=>{nt(ye,{class:"size-3 animate-spin"})};M(oe,ye=>{a()[t.clientId]&&ye(dt)})}var Be=I(K,2),Ce=h(Be);H(()=>{K.disabled=a()[t.clientId],ie(Ce,`Server ${s()[t.clientId]??""}`)}),T(E,A)};M(j,E=>{s()[t.clientId]&&E(P)})}var D=I(j,2),F=h(D),Z=I(g,2);{var G=E=>{os(E,{get clientId(){return t.clientId},get destinationId(){return _(l)}})},ee=E=>{bs(E,{get clientId(){return t.clientId},showToast:d})};M(Z,E=>{s()[t.clientId]?E(G):E(ee,!1)})}var q=I(Z,2);{var B=E=>{Cn(E,{get message(){return _(u).message},get type(){return _(u).type},onClose:()=>k(u,null),get key(){return _(u).key}})};M(q,E=>{_(u)&&E(B)})}H(()=>{J(b,`status-indicator w-3 h-3 ${(o()?"bg-green-500":"bg-red-500")??""} rounded-full`),J(w,`status-ping w-3 h-3 ${(o()?"bg-green-500 animate-ping":"bg-red-500")??""} rounded-full absolute inset-0`),ie(p,c()[t.clientId]||`Chat ${t.clientId}`),ie(F,`ID: ${t.clientId??""}`)}),T(e,v),he()}Ie(["click"]);function xs(){const e=localStorage.getItem("theme");e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}async function ws(){xs();try{const t=await(await fetch("/api/clients")).json();t.sort(),t.forEach(r=>{fr.set(new Set([...Ae(fr),r]))})}catch(e){console.error("Error loading active_clients:",e)}Tn()}var ks=O('<button class="ml-2 px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors duration-200">Reconnect</button>'),Es=()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")},Is=O('<div class="fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50 transition-opacity duration-500"><div class="text-center flex flex-col gap-4 items-center justify-center"><!> <p class="text-gray-600 dark:text-gray-300">Loading chats...</p></div></div>'),Ss=O('<div class="container mx-auto p-4 lg:p-6"><div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"><div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="flex items-center gap-3"><div class="bg-blue-500 p-2 rounded-lg"><!></div> <div><h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Clients - AP 24/25</h1> <p class="text-sm text-gray-500 dark:text-gray-400">Clients UI for Advanced Programming Project</p></div></div> <div class="flex items-center gap-6"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <span class="text-sm text-gray-600 dark:text-gray-300"> </span> <!></div> <div class="h-8 w-px bg-gray-200 dark:bg-gray-700"></div> <div class="flex items-center gap-3"><!> <button id="theme-toggle" aria-label="Change theme" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><span class="inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-200 translate-x-[2px] dark:translate-x-5"></span></button> <!></div></div></div></div> <div id="chat-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"></div></div> <!>',1);function Ts(e,t){ge(t,!0);const r=Ct(),i=()=>ne(fr,"$displayedChats",r),n=()=>ne(it,"$registrationStatus",r),a=()=>ne(Tr,"$connectionStatus",r);let s=$(!0);ct(async()=>{await ws(),setTimeout(()=>{k(s,!1)},800),window.addEventListener("beforeunload",o)}),oa(()=>{window.removeEventListener("beforeunload",o),c()});function o(E){c()}function c(){console.error("Unregistering clients..."),i().forEach(E=>{fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:E,server_id:n()[E]})})}),console.warn("Clients unregistered.")}var l=Ss(),u=Y(l),d=h(u),f=h(d),v=h(f),g=h(v),y=h(g);va(y,{class:"size-5 text-white"});var C=I(v,2),x=h(C),b=h(x),w=h(b),N=I(w,2),p=I(b,2),m=h(p),j=I(p,2);{var P=E=>{var A=ks();A.__click=function(...K){Zt==null||Zt.apply(this,K)},T(E,A)};M(j,E=>{a()||E(P)})}var D=I(x,4),F=h(D);pa(F,{class:"size-5 dark:text-gray-200"});var Z=I(F,2);Z.__click=[Es];var G=I(Z,2);_a(G,{class:"size-5 dark:text-gray-200"});var ee=I(d,2);ut(ee,5,i,lt,(E,A)=>{ms(E,{get clientId(){return _(A)}})});var q=I(u,2);{var B=E=>{var A=Is(),K=h(A),oe=h(K);nt(oe,{class:"w-16 h-16 text-blue-500 animate-spin mb-4"}),T(E,A)};M(q,E=>{_(s)&&E(B)})}H(()=>{J(w,`w-3 h-3 rounded-full transition-colors duration-200 ${(a()?"bg-green-500":"bg-red-500")??""}`),J(N,`w-3 h-3 absolute inset-0 rounded-full transition-colors duration-200 ${(a()?"bg-green-500 animate-ping":"bg-red-500")??""}`),ie(m,a()?"Online":"Offline")}),T(e,l),he()}Ie(["click"]);Hi(Ts,{target:document.getElementById("app")});
