(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const Lr=!1;var hr=Array.isArray,Gn=Array.prototype.indexOf,pr=Array.from,Jr=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,Xr=Object.getOwnPropertyDescriptors,Jn=Object.prototype,Xn=Array.prototype,br=Object.getPrototypeOf;function bt(e){return typeof e=="function"}const rt=()=>{};function Zn(e){return e()}function ar(e){for(var t=0;t<e.length;t++)e[t]()}const ve=2,Zr=4,Ct=8,yr=16,Te=32,Be=64,Ot=128,ke=256,jt=512,ee=1024,De=2048,ut=4096,xe=8192,ct=16384,Qn=32768,qt=65536,ei=1<<17,ti=1<<19,Qr=1<<20,Ue=Symbol("$state"),en=Symbol("legacy props"),sr=Symbol("");function tn(e){return e===this.v}function rn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function mr(e){return!rn(e,this.v)}function ri(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ni(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ii(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ai(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function si(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function li(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function oi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ui(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function ci(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let dt=!1,di=!1;function fi(){dt=!0}const xr=1,wr=2,nn=4,vi=8,_i=16,gi=1,hi=2,an=4,pi=8,bi=16,yi=1,mi=2,te=Symbol(),sn="http://www.w3.org/2000/svg";function ln(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let F=null;function zr(e){F=e}function ge(e,t=!1,r){F={p:F,c:null,e:null,m:!1,s:e,x:null,l:null},dt&&!t&&(F.l={s:null,u:null,r1:[],r2:re(!1)})}function he(e){const t=F;if(t!==null){const s=t.e;if(s!==null){var r=O,i=U;t.e=null;try{for(var n=0;n<s.length;n++){var a=s[n];Se(a.effect),Fe(a.reaction),Sr(a.fn)}}finally{Se(r),Fe(i)}}F=t.p,t.m=!0}return{}}function re(e,t){var r={f:0,v:e,reactions:null,equals:tn,rv:0,wv:0};return r}function H(e){return xi(re(e))}function kr(e,t=!1){var i;const r=re(e);return t||(r.equals=mr),dt&&F!==null&&F.l!==null&&((i=F.l).s??(i.s=[])).push(r),r}function xi(e){return U!==null&&!Ae&&U.f&ve&&(we===null?Ri([e]):we.push(e)),e}function w(e,t){return U!==null&&!Ae&&Nt()&&U.f&(ve|yr)&&(we===null||!we.includes(e))&&ci(),lr(e,t)}function lr(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=wn(),on(e,De),Nt()&&O!==null&&O.f&ee&&!(O.f&(Te|Be))&&(Ne===null?Di([e]):Ne.push(e))),t}function on(e,t){var r=e.reactions;if(r!==null)for(var i=Nt(),n=r.length,a=0;a<n;a++){var s=r[a],l=s.f;l&De||!i&&s===O||(_e(s,t),l&(ee|ke)&&(l&ve?on(s,ut):Kt(s)))}}let un=!1;function V(e,t=null,r){if(typeof e!="object"||e===null||Ue in e)return e;const i=br(e);if(i!==Jn&&i!==Xn)return e;var n=new Map,a=hr(e),s=re(0);a&&n.set("length",re(e.length));var l;return new Proxy(e,{defineProperty(o,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&li();var c=n.get(u);return c===void 0?(c=re(f.value),n.set(u,c)):w(c,V(f.value,l)),!0},deleteProperty(o,u){var f=n.get(u);if(f===void 0)u in o&&n.set(u,re(te));else{if(a&&typeof u=="string"){var c=n.get("length"),d=Number(u);Number.isInteger(d)&&d<c.v&&w(c,d)}w(f,te),Ur(s)}return!0},get(o,u,f){var g;if(u===Ue)return e;var c=n.get(u),d=u in o;if(c===void 0&&(!d||(g=ze(o,u))!=null&&g.writable)&&(c=re(V(d?o[u]:te,l)),n.set(u,c)),c!==void 0){var v=_(c);return v===te?void 0:v}return Reflect.get(o,u,f)},getOwnPropertyDescriptor(o,u){var f=Reflect.getOwnPropertyDescriptor(o,u);if(f&&"value"in f){var c=n.get(u);c&&(f.value=_(c))}else if(f===void 0){var d=n.get(u),v=d==null?void 0:d.v;if(d!==void 0&&v!==te)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(o,u){var v;if(u===Ue)return!0;var f=n.get(u),c=f!==void 0&&f.v!==te||Reflect.has(o,u);if(f!==void 0||O!==null&&(!c||(v=ze(o,u))!=null&&v.writable)){f===void 0&&(f=re(c?V(o[u],l):te),n.set(u,f));var d=_(f);if(d===te)return!1}return c},set(o,u,f,c){var y;var d=n.get(u),v=u in o;if(a&&u==="length")for(var g=f;g<d.v;g+=1){var p=n.get(g+"");p!==void 0?w(p,te):g in o&&(p=re(te),n.set(g+"",p))}d===void 0?(!v||(y=ze(o,u))!=null&&y.writable)&&(d=re(void 0),w(d,V(f,l)),n.set(u,d)):(v=d.v!==te,w(d,V(f,l)));var S=Reflect.getOwnPropertyDescriptor(o,u);if(S!=null&&S.set&&S.set.call(c,f),!v){if(a&&typeof u=="string"){var A=n.get("length"),h=Number(u);Number.isInteger(h)&&h>=A.v&&w(A,h+1)}Ur(s)}return!0},ownKeys(o){_(s);var u=Reflect.ownKeys(o).filter(d=>{var v=n.get(d);return v===void 0||v.v!==te});for(var[f,c]of n)c.v!==te&&!(f in o)&&u.push(f);return u},setPrototypeOf(){oi()}})}function Ur(e,t=1){w(e,e.v+t)}var Fr,cn,dn;function wi(){if(Fr===void 0){Fr=window;var e=Element.prototype,t=Node.prototype;cn=ze(t,"firstChild").get,dn=ze(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function $t(e=""){return document.createTextNode(e)}function at(e){return cn.call(e)}function Bt(e){return dn.call(e)}function b(e,t){return at(e)}function G(e,t){{var r=at(e);return r instanceof Comment&&r.data===""?Bt(r):r}}function E(e,t=1,r=!1){let i=e;for(;t--;)i=Bt(i);return i}function ki(e){e.textContent=""}function Ee(e){var t=ve|De,r=U!==null&&U.f&ve?U:null;return O===null||r!==null&&r.f&ke?t|=ke:O.f|=Qr,{ctx:F,deps:null,effects:null,equals:tn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:r??O}}function Er(e){const t=Ee(e);return t.equals=mr,t}function Ir(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Ie(t[r])}}function Ei(e){for(var t=e.parent;t!==null;){if(!(t.f&ve))return t;t=t.parent}return null}function fn(e){var t,r=O;Se(Ei(e));try{Ir(e),t=En(e)}finally{Se(r)}return t}function vn(e){var t=fn(e),r=($e||e.f&ke)&&e.deps!==null?ut:ee;_e(e,r),e.equals(t)||(e.v=t,e.wv=wn())}function Ii(e){Ir(e),It(e,0),_e(e,ct),e.v=e.deps=e.ctx=e.reactions=null}function _n(e){O===null&&U===null&&ii(),U!==null&&U.f&ke&&O===null&&ni(),Nr&&ri()}function Si(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ve(e,t,r,i=!0){var n=(e&Be)!==0,a=O,s={ctx:F,deps:null,nodes_start:null,nodes_end:null,f:e|De,first:null,fn:t,last:null,next:null,parent:n?null:a,prev:null,teardown:null,transitions:null,wv:0};if(r){var l=nt;try{Mr(!0),Pr(s),s.f|=Qn}catch(f){throw Ie(s),f}finally{Mr(l)}}else t!==null&&Kt(s);var o=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Qr|Ot))===0;if(!o&&!n&&i&&(a!==null&&Si(s,a),U!==null&&U.f&ve)){var u=U;(u.effects??(u.effects=[])).push(s)}return s}function gn(e){const t=Ve(Ct,null,!1);return _e(t,ee),t.teardown=e,t}function Re(e){_n();var t=O!==null&&(O.f&Te)!==0&&F!==null&&!F.m;if(t){var r=F;(r.e??(r.e=[])).push({fn:e,effect:O,reaction:U})}else{var i=Sr(e);return i}}function Ti(e){return _n(),Tr(e)}function Ci(e){const t=Ve(Be,e,!0);return()=>{Ie(t)}}function Ni(e){const t=Ve(Be,e,!0);return(r={})=>new Promise(i=>{r.outro?kt(t,()=>{Ie(t),i(void 0)}):(Ie(t),i(void 0))})}function Sr(e){return Ve(Zr,e,!1)}function Tr(e){return Ve(Ct,e,!0)}function K(e,t=[],r=Ee){const i=t.map(r);return Vt(()=>e(...i.map(_)))}function Vt(e,t=0){return Ve(Ct|yr|t,e,!0)}function st(e,t=!0){return Ve(Ct|Te,e,!0,t)}function hn(e){var t=e.teardown;if(t!==null){const r=Nr,i=U;qr(!0),Fe(null);try{t.call(null)}finally{qr(r),Fe(i)}}}function pn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){var i=r.next;Ie(r,t),r=i}}function Pi(e){for(var t=e.first;t!==null;){var r=t.next;t.f&Te||Ie(t),t=r}}function Ie(e,t=!0){var r=!1;if((t||e.f&ti)&&e.nodes_start!==null){for(var i=e.nodes_start,n=e.nodes_end;i!==null;){var a=i===n?null:Bt(i);i.remove(),i=a}r=!0}pn(e,t&&!r),It(e,0),_e(e,ct);var s=e.transitions;if(s!==null)for(const o of s)o.stop();hn(e);var l=e.parent;l!==null&&l.first!==null&&bn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function bn(e){var t=e.parent,r=e.prev,i=e.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=r))}function kt(e,t){var r=[];Cr(e,r,!0),yn(r,()=>{Ie(e),t&&t()})}function yn(e,t){var r=e.length;if(r>0){var i=()=>--r||t();for(var n of e)n.out(i)}else t()}function Cr(e,t,r){if(!(e.f&xe)){if(e.f^=xe,e.transitions!==null)for(const s of e.transitions)(s.is_global||r)&&t.push(s);for(var i=e.first;i!==null;){var n=i.next,a=(i.f&qt)!==0||(i.f&Te)!==0;Cr(i,t,a?r:!1),i=n}}}function Et(e){mn(e,!0)}function mn(e,t){if(e.f&xe){e.f^=xe,e.f&ee||(e.f^=ee),Pt(e)&&(_e(e,De),Kt(e));for(var r=e.first;r!==null;){var i=r.next,n=(r.f&qt)!==0||(r.f&Te)!==0;mn(r,n?t:!1),r=i}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let or=!1,ur=[];function Ai(){or=!1;const e=ur.slice();ur=[],ar(e)}function Wt(e){or||(or=!0,queueMicrotask(Ai)),ur.push(e)}let Dt=!1,Lt=!1,zt=null,nt=!1,Nr=!1;function Mr(e){nt=e}function qr(e){Nr=e}let cr=[],mt=0;let U=null,Ae=!1;function Fe(e){U=e}let O=null;function Se(e){O=e}let we=null;function Ri(e){we=e}let ne=null,le=0,Ne=null;function Di(e){Ne=e}let xn=1,Ut=0,$e=!1;function wn(){return++xn}function Nt(){return!dt||F!==null&&F.l===null}function Pt(e){var u;var t=e.f;if(t&De)return!0;if(t&ut){var r=e.deps,i=(t&ke)!==0;if(r!==null){var n,a,s=(t&jt)!==0,l=i&&O!==null&&!$e,o=r.length;if(s||l){for(n=0;n<o;n++)a=r[n],(s||!((u=a==null?void 0:a.reactions)!=null&&u.includes(e)))&&(a.reactions??(a.reactions=[])).push(e);s&&(e.f^=jt)}for(n=0;n<o;n++)if(a=r[n],Pt(a)&&vn(a),a.wv>e.wv)return!0}(!i||O!==null&&!$e)&&_e(e,ee)}return!1}function Oi(e,t){for(var r=t;r!==null;){if(r.f&Ot)try{r.fn(e);return}catch{r.f^=Ot}r=r.parent}throw Dt=!1,e}function ji(e){return(e.f&ct)===0&&(e.parent===null||(e.parent.f&Ot)===0)}function Ht(e,t,r,i){if(Dt){if(r===null&&(Dt=!1),ji(t))throw e;return}r!==null&&(Dt=!0);{Oi(e,t);return}}function kn(e,t,r=0){var i=e.reactions;if(i!==null)for(var n=0;n<i.length;n++){var a=i[n];a.f&ve?kn(a,t,r+1):t===a&&(r===0?_e(a,De):a.f&ee&&_e(a,ut),Kt(a))}}function En(e){var v;var t=ne,r=le,i=Ne,n=U,a=$e,s=we,l=F,o=Ae,u=e.f;ne=null,le=0,Ne=null,U=u&(Te|Be)?null:e,$e=(u&ke)!==0&&(!nt||(n===null||o)&&e.parent!==null),we=null,zr(e.ctx),Ae=!1,Ut++;try{var f=(0,e.fn)(),c=e.deps;if(ne!==null){var d;if(It(e,le),c!==null&&le>0)for(c.length=le+ne.length,d=0;d<ne.length;d++)c[le+d]=ne[d];else e.deps=c=ne;if(!$e)for(d=le;d<c.length;d++)((v=c[d]).reactions??(v.reactions=[])).push(e)}else c!==null&&le<c.length&&(It(e,le),c.length=le);if(Nt()&&Ne!==null&&!(e.f&(ve|ut|De)))for(d=0;d<Ne.length;d++)kn(Ne[d],e);return n!==null&&Ut++,f}finally{ne=t,le=r,Ne=i,U=n,$e=a,we=s,zr(l),Ae=o}}function Li(e,t){let r=t.reactions;if(r!==null){var i=Gn.call(r,e);if(i!==-1){var n=r.length-1;n===0?r=t.reactions=null:(r[i]=r[n],r.pop())}}r===null&&t.f&ve&&(ne===null||!ne.includes(t))&&(_e(t,ut),t.f&(ke|jt)||(t.f^=jt),Ir(t),It(t,0))}function It(e,t){var r=e.deps;if(r!==null)for(var i=t;i<r.length;i++)Li(e,r[i])}function Pr(e){var t=e.f;if(!(t&ct)){_e(e,ee);var r=O,i=F;O=e;try{t&yr?Pi(e):pn(e),hn(e);var n=En(e);e.teardown=typeof n=="function"?n:null,e.wv=xn;var a=e.deps,s;Lr&&di&&e.f&De}catch(l){Ht(l,e,r,i||e.ctx)}finally{O=r}}}function zi(){if(mt>1e3){mt=0;try{ai()}catch(e){if(zt!==null)Ht(e,zt,null);else throw e}}mt++}function Ui(e){var t=e.length;if(t!==0){zi();var r=nt;nt=!0;try{for(var i=0;i<t;i++){var n=e[i];n.f&ee||(n.f^=ee);var a=[];In(n,a),Fi(a)}}finally{nt=r}}}function Fi(e){var t=e.length;if(t!==0)for(var r=0;r<t;r++){var i=e[r];if(!(i.f&(ct|xe)))try{Pt(i)&&(Pr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?bn(i):i.fn=null))}catch(n){Ht(n,i,null,i.ctx)}}}function Mi(){if(Lt=!1,mt>1001)return;const e=cr;cr=[],Ui(e),Lt||(mt=0,zt=null)}function Kt(e){Lt||(Lt=!0,queueMicrotask(Mi)),zt=e;for(var t=e;t.parent!==null;){t=t.parent;var r=t.f;if(r&(Be|Te)){if(!(r&ee))return;t.f^=ee}}cr.push(t)}function In(e,t){var r=e.first,i=[];e:for(;r!==null;){var n=r.f,a=(n&Te)!==0,s=a&&(n&ee)!==0,l=r.next;if(!s&&!(n&xe))if(n&Ct){if(a)r.f^=ee;else try{Pt(r)&&Pr(r)}catch(c){Ht(c,r,null,r.ctx)}var o=r.first;if(o!==null){r=o;continue}}else n&Zr&&i.push(r);if(l===null){let c=r.parent;for(;c!==null;){if(e===c)break e;var u=c.next;if(u!==null){r=u;continue e}c=c.parent}}r=l}for(var f=0;f<i.length;f++)o=i[f],t.push(o),In(o,t)}function _(e){var t=e.f,r=(t&ve)!==0;if(r&&t&ct){var i=fn(e);return Ii(e),i}if(U!==null&&!Ae){we!==null&&we.includes(e)&&ui();var n=U.deps;e.rv<Ut&&(e.rv=Ut,ne===null&&n!==null&&n[le]===e?le++:ne===null?ne=[e]:ne.push(e))}else if(r&&e.deps===null&&e.effects===null){var a=e,s=a.parent;s!==null&&(s.f&ke||(a.f^=ke))}return r&&(a=e,Pt(a)&&vn(a)),e.v}function Me(e){var t=Ae;try{return Ae=!0,e()}finally{Ae=t}}const qi=-7169;function _e(e,t){e.f=e.f&qi|t}function dr(e,t=1){var r=_(e),i=t===1?r++:r--;return w(e,r),i}function $i(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ue in e)fr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&Ue in r&&fr(r)}}}function fr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{fr(e[i],t)}catch{}const r=br(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=Xr(r);for(let n in i){const a=i[n].get;if(a)try{a.call(e)}catch{}}}}}function Bi(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Vi=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Wi(e){return Vi.includes(e)}const Hi={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Ki(e){return e=e.toLowerCase(),Hi[e]??e}const Yi=["touchstart","touchmove"];function Gi(e){return Yi.includes(e)}function Ji(e,t){if(t){const r=document.body;e.autofocus=!0,Wt(()=>{document.activeElement===r&&e.focus()})}}let $r=!1;function Xi(){$r||($r=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function Sn(e){var t=U,r=O;Fe(null),Se(null);try{return e()}finally{Fe(t),Se(r)}}function Zi(e,t,r,i=r){e.addEventListener(t,()=>Sn(r));const n=e.__on_r;n?e.__on_r=()=>{n(),i(!0)}:e.__on_r=()=>i(!0),Xi()}const Tn=new Set,vr=new Set;function Cn(e,t,r,i={}){function n(a){if(i.capture||yt.call(t,a),!a.cancelBubble)return Sn(()=>r==null?void 0:r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Wt(()=>{t.addEventListener(e,n,i)}):t.addEventListener(e,n,i),n}function Xe(e,t,r,i,n){var a={capture:i,passive:n},s=Cn(e,t,r,a);(t===document.body||t===window||t===document)&&gn(()=>{t.removeEventListener(e,s,a)})}function Ce(e){for(var t=0;t<e.length;t++)Tn.add(e[t]);for(var r of vr)r(e)}function yt(e){var h;var t=this,r=t.ownerDocument,i=e.type,n=((h=e.composedPath)==null?void 0:h.call(e))||[],a=n[0]||e.target,s=0,l=e.__root;if(l){var o=n.indexOf(l);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=n.indexOf(t);if(u===-1)return;o<=u&&(s=o)}if(a=n[s]||e.target,a!==t){Jr(e,"currentTarget",{configurable:!0,get(){return a||r}});var f=U,c=O;Fe(null),Se(null);try{for(var d,v=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var p=a["__"+i];if(p!==void 0&&!a.disabled)if(hr(p)){var[S,...A]=p;S.apply(a,[e,...A])}else p.call(a,e)}catch(y){d?v.push(y):d=y}if(e.cancelBubble||g===t||g===null)break;a=g}if(d){for(let y of v)queueMicrotask(()=>{throw y});throw d}}finally{e.__root=t,delete e.currentTarget,Fe(f),Se(c)}}}function Nn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function St(e,t){var r=O;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function j(e,t){var r=(t&yi)!==0,i=(t&mi)!==0,n,a=!e.startsWith("<!>");return()=>{n===void 0&&(n=Nn(a?e:"<!>"+e),r||(n=at(n)));var s=i?document.importNode(n,!0):n.cloneNode(!0);if(r){var l=at(s),o=s.lastChild;St(l,o)}else St(s,s);return s}}function Qi(e,t,r="svg"){var i=!e.startsWith("<!>"),n=`<${r}>${i?e:"<!>"+e}</${r}>`,a;return()=>{if(!a){var s=Nn(n),l=at(s);a=at(l)}var o=a.cloneNode(!0);return St(o,o),o}}function se(){var e=document.createDocumentFragment(),t=document.createComment(""),r=$t();return e.append(t,r),St(t,r),e}function T(e,t){e!==null&&e.before(t)}function ae(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r==null?"":r+"")}function ea(e,t){return ta(e,t)}const Ge=new Map;function ta(e,{target:t,anchor:r,props:i={},events:n,context:a,intro:s=!0}){wi();var l=new Set,o=c=>{for(var d=0;d<c.length;d++){var v=c[d];if(!l.has(v)){l.add(v);var g=Gi(v);t.addEventListener(v,yt,{passive:g});var p=Ge.get(v);p===void 0?(document.addEventListener(v,yt,{passive:g}),Ge.set(v,1)):Ge.set(v,p+1)}}};o(pr(Tn)),vr.add(o);var u=void 0,f=Ni(()=>{var c=r??t.appendChild($t());return st(()=>{if(a){ge({});var d=F;d.c=a}n&&(i.$$events=n),u=e(c,i)||{},a&&he()}),()=>{var g;for(var d of l){t.removeEventListener(d,yt);var v=Ge.get(d);--v===0?(document.removeEventListener(d,yt),Ge.delete(d)):Ge.set(d,v)}vr.delete(o),c!==r&&((g=c.parentNode)==null||g.removeChild(c))}});return ra.set(u,f),u}let ra=new WeakMap;function M(e,t,r=!1){var i=e,n=null,a=null,s=te,l=r?qt:0,o=!1;const u=(c,d=!0)=>{o=!0,f(d,c)},f=(c,d)=>{s!==(s=c)&&(s?(n?Et(n):d&&(n=st(()=>d(i))),a&&kt(a,()=>{a=null})):(a?Et(a):d&&(a=st(()=>d(i))),n&&kt(n,()=>{n=null})))};Vt(()=>{o=!1,t(u),o||f(null,null)},l)}function ft(e,t){return t}function na(e,t,r,i){for(var n=[],a=t.length,s=0;s<a;s++)Cr(t[s].e,n,!0);var l=a>0&&n.length===0&&r!==null;if(l){var o=r.parentNode;ki(o),o.append(r),i.clear(),Le(e,t[0].prev,t[a-1].next)}yn(n,()=>{for(var u=0;u<a;u++){var f=t[u];l||(i.delete(f.k),Le(e,f.prev,f.next)),Ie(f.e,!l)}})}function vt(e,t,r,i,n,a=null){var s=e,l={flags:t,items:new Map,first:null},o=(t&nn)!==0;if(o){var u=e;s=u.appendChild($t())}var f=null,c=!1,d=Er(()=>{var v=r();return hr(v)?v:v==null?[]:pr(v)});Vt(()=>{var v=_(d),g=v.length;if(!(c&&g===0)){c=g===0;{var p=U;ia(v,l,s,n,t,(p.f&xe)!==0,i,r)}a!==null&&(g===0?f?Et(f):f=st(()=>a(s)):f!==null&&kt(f,()=>{f=null})),_(d)}})}function ia(e,t,r,i,n,a,s,l){var $,B,k,P;var o=(n&vi)!==0,u=(n&(xr|wr))!==0,f=e.length,c=t.items,d=t.first,v=d,g,p=null,S,A=[],h=[],y,C,x,m;if(o)for(m=0;m<f;m+=1)y=e[m],C=s(y,m),x=c.get(C),x!==void 0&&(($=x.a)==null||$.measure(),(S??(S=new Set)).add(x));for(m=0;m<f;m+=1){if(y=e[m],C=s(y,m),x=c.get(C),x===void 0){var R=v?v.e.nodes_start:r;p=sa(R,t,p,p===null?t.first:p.next,y,C,m,i,n,l),c.set(C,p),A=[],h=[],v=p.next;continue}if(u&&aa(x,y,m,n),x.e.f&xe&&(Et(x.e),o&&((B=x.a)==null||B.unfix(),(S??(S=new Set)).delete(x))),x!==v){if(g!==void 0&&g.has(x)){if(A.length<h.length){var N=h[0],D;p=N.prev;var z=A[0],q=A[A.length-1];for(D=0;D<A.length;D+=1)Br(A[D],N,r);for(D=0;D<h.length;D+=1)g.delete(h[D]);Le(t,z.prev,q.next),Le(t,p,z),Le(t,q,N),v=N,p=q,m-=1,A=[],h=[]}else g.delete(x),Br(x,v,r),Le(t,x.prev,x.next),Le(t,x,p===null?t.first:p.next),Le(t,p,x),p=x;continue}for(A=[],h=[];v!==null&&v.k!==C;)(a||!(v.e.f&xe))&&(g??(g=new Set)).add(v),h.push(v),v=v.next;if(v===null)continue;x=v}A.push(x),p=x,v=x.next}if(v!==null||g!==void 0){for(var J=g===void 0?[]:pr(g);v!==null;)(a||!(v.e.f&xe))&&J.push(v),v=v.next;var Z=J.length;if(Z>0){var ue=n&nn&&f===0?r:null;if(o){for(m=0;m<Z;m+=1)(k=J[m].a)==null||k.measure();for(m=0;m<Z;m+=1)(P=J[m].a)==null||P.fix()}na(t,J,ue,c)}}o&&Wt(()=>{var Y;if(S!==void 0)for(x of S)(Y=x.a)==null||Y.apply()}),O.first=t.first&&t.first.e,O.last=p&&p.e}function aa(e,t,r,i){i&xr&&lr(e.v,t),i&wr?lr(e.i,r):e.i=r}function sa(e,t,r,i,n,a,s,l,o,u){var f=(o&xr)!==0,c=(o&_i)===0,d=f?c?kr(n):re(n):n,v=o&wr?re(s):s,g={i:v,v:d,k:a,a:null,e:null,prev:r,next:i};try{return g.e=st(()=>l(e,d,v,u),un),g.e.prev=r&&r.e,g.e.next=i&&i.e,r===null?t.first=g:(r.next=g,r.e.next=g.e),i!==null&&(i.prev=g,i.e.prev=g.e),g}finally{}}function Br(e,t,r){for(var i=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==i;){var s=Bt(a);n.before(a),a=s}}function Le(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function de(e,t,r,i,n){var l;var a=(l=t.$$slots)==null?void 0:l[r],s=!1;a===!0&&(a=t.children,s=!0),a===void 0||a(e,s?()=>i:i)}function la(e,t,r,i,n,a){var s,l,o=null,u=e,f;Vt(()=>{const c=t()||null;var d=sn;c!==s&&(f&&(c===null?kt(f,()=>{f=null,l=null}):c===l?Et(f):Ie(f)),c&&c!==l&&(f=st(()=>{o=document.createElementNS(d,c),St(o,o);{var v=o.appendChild($t());i(o,v)}O.nodes_end=o,u.before(o)})),s=c,s&&(l=s))},qt)}function Pn(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Pn(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function oa(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Pn(e))&&(i&&(i+=" "),i+=t);return i}function ua(e){return typeof e=="object"?oa(e):e??""}function ca(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Yt(e,t,r,i){var n=e.__attributes??(e.__attributes={});n[t]!==(n[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[sr]=r),r==null?e.removeAttribute(t):typeof r!="string"&&An(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Vr(e,t,r,i,n=!1,a=!1,s=!1){var l=t||{},o=e.tagName==="OPTION";for(var u in t)u in r||(r[u]=null);r.class&&(r.class=ua(r.class));var f=An(e),c=e.__attributes??(e.__attributes={});for(const h in r){let y=r[h];if(o&&h==="value"&&y==null){e.value=e.__value="",l[h]=y;continue}var d=l[h];if(y!==d){l[h]=y;var v=h[0]+h[1];if(v!=="$$"){if(v==="on"){const C={},x="$$"+h;let m=h.slice(2);var g=Wi(m);if(Bi(m)&&(m=m.slice(0,-7),C.capture=!0),!g&&d){if(y!=null)continue;e.removeEventListener(m,l[x],C),l[x]=null}if(y!=null)if(g)e[`__${m}`]=y,Ce([m]);else{let R=function(N){l[h].call(this,N)};var A=R;l[x]=Cn(m,e,R,C)}else g&&(e[`__${m}`]=void 0)}else if(h==="style"&&y!=null)e.style.cssText=y+"";else if(h==="autofocus")Ji(e,!!y);else if(h==="__value"||h==="value"&&y!=null)e.value=e[h]=e.__value=y;else if(h==="selected"&&o)ca(e,y);else{var p=h;n||(p=Ki(p));var S=p==="defaultValue"||p==="defaultChecked";if(y==null&&!a&&!S)if(c[h]=null,p==="value"||p==="checked"){let C=e;if(p==="value"){let x=C.defaultValue;C.removeAttribute(p),C.defaultValue=x}else{let x=C.defaultChecked;C.removeAttribute(p),C.defaultChecked=x}}else e.removeAttribute(h);else S||f.includes(p)&&(a||typeof y!="string")?e[p]=y:typeof y!="function"&&Yt(e,p,y)}h==="style"&&"__styles"in e&&(e.__styles={})}}}return l}var Wr=new Map;function An(e){var t=Wr.get(e.nodeName);if(t)return t;Wr.set(e.nodeName,t=[]);for(var r,i=e,n=Element.prototype;n!==i;){r=Xr(i);for(var a in r)r[a].set&&t.push(a);i=br(i)}return t}function da(e){if(e.loading==="lazy"){var t=e.src;e[sr]=null,e.loading="eager",e.removeAttribute("src"),requestAnimationFrame(()=>{e[sr]!=="eager"&&(e.loading="lazy"),e.src=t})}}function X(e,t,r){var i=e.__className,n=fa(t);(i!==n||un)&&(t==null?e.removeAttribute("class"):e.className=n,e.__className=n)}function fa(e,t){return(e??"")+""}function Rn(e,t,r=t){var i=Nt();Zi(e,"input",n=>{var a=n?e.defaultValue:e.value;if(a=Qt(e)?er(a):a,r(a),i&&a!==(a=t())){var s=e.selectionStart,l=e.selectionEnd;e.value=a??"",l!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(l,e.value.length))}}),Me(t)==null&&e.value&&r(Qt(e)?er(e.value):e.value),Tr(()=>{var n=t();Qt(e)&&n===er(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Qt(e){var t=e.type;return t==="number"||t==="range"}function er(e){return e===""?null:+e}function Hr(e,t){return e===t||(e==null?void 0:e[Ue])===t}function Ze(e={},t,r,i){return Sr(()=>{var n,a;return Tr(()=>{n=a,a=[],Me(()=>{e!==r(...a)&&(t(e,...a),n&&Hr(r(...n),e)&&t(null,...n))})}),()=>{Wt(()=>{a&&Hr(r(...a),e)&&t(null,...a)})}}),e}function va(e=!1){const t=F,r=t.l.u;if(!r)return;let i=()=>$i(t.s);if(e){let n=0,a={};const s=Ee(()=>{let l=!1;const o=t.s;for(const u in o)o[u]!==a[u]&&(a[u]=o[u],l=!0);return l&&n++,n});i=()=>_(s)}r.b.length&&Ti(()=>{Kr(t,i),ar(r.b)}),Re(()=>{const n=Me(()=>r.m.map(Zn));return()=>{for(const a of n)typeof a=="function"&&a()}}),r.a.length&&Re(()=>{Kr(t,i),ar(r.a)})}function Kr(e,t){if(e.l.s)for(const r of e.l.s)_(r);t()}function Dn(e,t,r){if(e==null)return t(void 0),rt;const i=Me(()=>e.subscribe(t,r));return i.unsubscribe?()=>i.unsubscribe():i}const Je=[];function fe(e,t=rt){let r=null;const i=new Set;function n(l){if(rn(e,l)&&(e=l,r)){const o=!Je.length;for(const u of i)u[1](),Je.push(u,e);if(o){for(let u=0;u<Je.length;u+=2)Je[u][0](Je[u+1]);Je.length=0}}}function a(l){n(l(e))}function s(l,o=rt){const u=[l,o];return i.add(u),i.size===1&&(r=t(n,a)||rt),l(e),()=>{i.delete(u),i.size===0&&r&&(r(),r=null)}}return{set:n,update:a,subscribe:s}}function Pe(e){let t;return Dn(e,r=>t=r)(),t}let Rt=!1,_r=Symbol();function ie(e,t,r){const i=r[t]??(r[t]={store:null,source:kr(void 0),unsubscribe:rt});if(i.store!==e&&!(_r in r))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=rt;else{var n=!0;i.unsubscribe=Dn(e,a=>{n?i.source.v=a:w(i.source,a)}),n=!1}return e&&_r in r?Pe(e):_(i.source)}function At(){const e={};function t(){gn(()=>{for(var r in e)e[r].unsubscribe();Jr(e,_r,{enumerable:!1,value:!0})})}return[e,t]}function _a(e){var t=Rt;try{return Rt=!1,[e(),Rt]}finally{Rt=t}}const ga={get(e,t){if(!e.exclude.includes(t))return _(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,r){return t in e.special||(e.special[t]=ce({get[t](){return e.props[t]}},t,an)),e.special[t](r),dr(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),dr(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function oe(e,t){return new Proxy({props:e,exclude:t,special:{},version:re(0)},ga)}const ha={get(e,t){let r=e.props.length;for(;r--;){let i=e.props[r];if(bt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,r){let i=e.props.length;for(;i--;){let n=e.props[i];bt(n)&&(n=n());const a=ze(n,t);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let i=e.props[r];if(bt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const n=ze(i,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(e,t){if(t===Ue||t===en)return!1;for(let r of e.props)if(bt(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props){bt(r)&&(r=r());for(const i in r)t.includes(i)||t.push(i)}return t}};function pe(...e){return new Proxy({props:e},ha)}function Yr(e){for(var t=O,r=O;t!==null&&!(t.f&(Te|Be));)t=t.parent;try{return Se(t),e()}finally{Se(r)}}function ce(e,t,r,i){var R;var n=(r&gi)!==0,a=!dt||(r&hi)!==0,s=(r&pi)!==0,l=(r&bi)!==0,o=!1,u;s?[u,o]=_a(()=>e[t]):u=e[t];var f=Ue in e||en in e,c=s&&(((R=ze(e,t))==null?void 0:R.set)??(f&&t in e&&(N=>e[t]=N)))||void 0,d=i,v=!0,g=!1,p=()=>(g=!0,v&&(v=!1,l?d=Me(i):d=i),d);u===void 0&&i!==void 0&&(c&&a&&si(),u=p(),c&&c(u));var S;if(a)S=()=>{var N=e[t];return N===void 0?p():(v=!0,g=!1,N)};else{var A=Yr(()=>(n?Ee:Er)(()=>e[t]));A.f|=ei,S=()=>{var N=_(A);return N!==void 0&&(d=void 0),N===void 0?d:N}}if(!(r&an))return S;if(c){var h=e.$$legacy;return function(N,D){return arguments.length>0?((!a||!D||h||o)&&c(D?S():N),N):S()}}var y=!1,C=!1,x=kr(u),m=Yr(()=>Ee(()=>{var N=S(),D=_(x);return y?(y=!1,C=!0,D):(C=!1,x.v=N)}));return n||(m.equals=mr),function(N,D){if(arguments.length>0){const z=D?_(m):a&&s?V(N):N;return m.equals(z)||(y=!0,w(x,z),g&&d!==void 0&&(d=z),Me(()=>_(m))),N}return _(m)}}function _t(e){F===null&&ln(),dt&&F.l!==null?ba(F).m.push(e):Re(()=>{const t=Me(e);if(typeof t=="function")return t})}function pa(e){F===null&&ln(),_t(()=>()=>Me(e))}function ba(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ya="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ya);fi();/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var xa=Qi("<svg><!><!></svg>");function be(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]),i=oe(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ge(t,!1);let n=ce(t,"name",8,void 0),a=ce(t,"color",8,"currentColor"),s=ce(t,"size",8,24),l=ce(t,"strokeWidth",8,2),o=ce(t,"absoluteStrokeWidth",8,!1),u=ce(t,"iconNode",24,()=>[]);const f=(...p)=>p.filter((S,A,h)=>!!S&&h.indexOf(S)===A).join(" ");va();var c=xa();let d;var v=b(c);vt(v,1,u,ft,(p,S)=>{let A=()=>_(S)[0],h=()=>_(S)[1];var y=se(),C=G(y);la(C,A,!0,(x,m)=>{let R;K(()=>R=Vr(x,R,{...h()},void 0,x.namespaceURI===sn,x.nodeName.includes("-")))}),T(p,y)});var g=E(v);de(g,t,"default",{}),K((p,S)=>d=Vr(c,d,{...ma,...i,width:s(),height:s(),stroke:a(),"stroke-width":p,class:S},void 0,!0),[()=>o()?Number(l())*24/Number(s()):l(),()=>f("lucide-icon","lucide",n()?`lucide-${n()}`:"",r.class)],Er),T(e,c),he()}function On(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"circle-user-round"},()=>r,{iconNode:[["path",{d:"M18 20a6 6 0 0 0-12 0"}],["circle",{cx:"12",cy:"10",r:"4"}],["circle",{cx:"12",cy:"12",r:"10"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function wa(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function lt(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function ka(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"message-square"},()=>r,{iconNode:[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Ea(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Ia(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"paperclip"},()=>r,{iconNode:[["path",{d:"M13.234 20.252 21 12.3"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Sa(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"send"},()=>r,{iconNode:[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Ta(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"smile"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Ca(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"sun"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Na(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}function Ar(e,t){const r=oe(t,["children","$$slots","$$events","$$legacy"]);be(e,pe({name:"x"},()=>r,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(n,a)=>{var s=se(),l=G(s);de(l,t,"default",{}),T(n,s)},$$slots:{default:!0}}))}const xt=fe({});function Tt(e,t){return`${e}|${t}`}function Pa(e){const[t,r]=e.split("|").map(Number);return{displayer:t,other:r}}const gr=fe(new Set),ot=fe({}),it=fe(new Set),Qe=fe({}),et=fe(new Set),Ft=fe({}),Gt=fe({}),wt=fe({});function Aa(e,t){Gt.update(r=>{const i=r[e]||{};return{...r,[e]:{...i,[t]:(i[t]||0)+1}}})}function Ra(e,t){Gt.update(r=>{const i=r[e]||{},{[t]:n,...a}=i;return{...r,[e]:a}})}const qe=fe({});function Da(e){qe.update(t=>({...t,[e]:{users:[],isLoading:!0,isRefreshing:!1}}))}function Oa(e,t){qe.update(r=>({...r,[e]:{...r[e],users:t,isLoading:!1,isRefreshing:!1}}))}function ja(e,t){qe.update(r=>({...r,[e]:{...r[e],isRefreshing:t}}))}function La(e,t){return Pe(qe)[e].users.some(i=>i.id===t)}const tt=fe({});function za(e){tt.update(t=>{const{[e]:r,...i}=t;return i})}function Ua(e){const t=e.message;switch(t.response){case"RegistrationSuccess":Pe(it).has(e.client_id)&&(ot.update(n=>({...n,[e.client_id]:e.server_id})),it.update(n=>(n.delete(e.client_id),n)));break;case"RegistrationFailure":it.update(n=>(n.delete(e.client_id),n)),Ft.update(n=>{const{[e.client_id]:a,...s}=n;return s}),tt.update(n=>({...n,[e.client_id]:{message:"Failed to register to server. Please try again.",type:"error"}}));break;case"UnregisterSuccess":Pe(et).has(e.client_id)&&(Qe.update(n=>({...n,[e.client_id]:!1})),ot.update(n=>{const{[e.client_id]:a,...s}=n;return s}),et.update(n=>(n.delete(e.client_id),n)),Ft.update(n=>{const{[e.client_id]:a,...s}=n;return s}),xt.update(n=>{const a={};for(const s in n){const{displayer:l}=Pa(s);l!==e.client_id&&(a[s]=n[s])}return a}),Gt.update(n=>{const{[e.client_id]:a,...s}=n;return s}),wt.update(n=>{const{[e.client_id]:a,...s}=n;return s}));break;case"UnregisterFailure":Pe(et).has(e.client_id)&&(console.warn(`Failed to unregister client ${e.client_id}`),Qe.update(n=>({...n,[e.client_id]:!1})),et.update(n=>(n.delete(e.client_id),n)));break;case"ActiveUsersList":console.log("ActiveUsersList",t.users);let r=t.users.filter(n=>n.id!==e.client_id);Oa(e.client_id,r);break;case"NewUserRegistered":const i={id:t.id,name:t.name};qe.update(n=>{var s;const a=((s=n[e.client_id])==null?void 0:s.users)??[];return{...n,[e.client_id]:{...n[e.client_id],users:[...a,i]}}}),tt.update(n=>({...n,[e.client_id]:{message:`${t.name} joined the server`,type:"success"}}));break;case"UserUnregistered":qe.update(n=>{const a=n[e.client_id].users.find(l=>l.id===t.id),s=n[e.client_id].users.filter(l=>l.id!==t.id);return a&&tt.update(l=>({...l,[e.client_id]:{message:`${a.name} left the server`,type:"error"}})),{...n,[e.client_id]:{...n[e.client_id],users:s}}}),wt.update(n=>{if(n[e.client_id]===t.id){const{[e.client_id]:a,...s}=n;return s}return n});break;case"PrivateMessage":if(La(e.client_id,t.sender_id)){const n=Tt(e.client_id,t.sender_id);xt.update(s=>{const l=s[n]||[];return{...s,[n]:[...l,{content:t.message.content,timestamp:t.message.timestamp,sender_id:t.sender_id,receiver_id:e.client_id,server_id:e.server_id}]}}),Pe(wt)[e.client_id]!==t.sender_id&&Aa(e.client_id,t.sender_id)}break;case"UserNotFound":console.warn(`User ${t.user_id} not found`);break;case"SendingError":if(t.message.request==="SendPrivateMessage"){const n=t.message,a=Tt(n.message.sender_id,n.recipient_id);xt.update(s=>{const l=s[a];if(l)for(let o=l.length-1;o>=0;o--){const u=l[o];if(u.content.type===n.message.content.type&&u.content.data===n.message.content.data&&u.timestamp===n.message.timestamp&&u.sender_id===n.message.sender_id){u.status="failed";break}}return s})}tt.update(n=>({...n,[e.client_id]:{message:t.error,type:"error"}}));break}}let je=null,Mt=0;const Fa=5,Rr=fe(!1);function jn(){return je&&je.close(),je=new WebSocket("ws://localhost:7374"),je.onopen=function(){console.log("WebSocket connection opened"),rr(!0)},je.onclose=function(){console.log("WebSocket connection closed"),rr(!1)},je.onerror=function(e){console.error("WebSocket error:",e),rr(!1)},je.onmessage=function(e){console.log("WebSocket message received:",e.data);const t=JSON.parse(e.data.toString());console.log("WebSocket message parsed:",t),Ua(t)},je}function tr(){if(Mt>=Fa){console.log("Max reconnect attempts reached");return}Mt++,jn()}function rr(e){Rr.set(e),Mt=e?0:Mt}async function Gr(e,t,r,i){if(!r)return;const n=Pe(ot)[e],a=new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),l={content:{type:i,data:r},timestamp:a,sender_id:e,receiver_id:t,server_id:n,status:"sent"};try{if(!(await fetch("/api/send-to",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Network response was not ok");let u=Tt(e,t);return xt.update(f=>{const c=f[u]||[];return{...f,[u]:[...c,l]}}),!0}catch(o){return console.error("Error sending message:",o),!1}}const Ma=["image/jpeg","image/png","image/gif","image/webp"];async function nr(e){return new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=n=>r(n)})}function ir(e){return Ma.includes(e.type)}var qa=(e,t)=>{e.stopPropagation(),w(t,!_(t))},$a=(e,t,r)=>{e.stopPropagation(),t(_(r))},Ba=j('<button class="emoji-option p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors duration-200"> </button>'),Va=j('<div class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 text-gray-400"><button class="emoji-button hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 bg-white dark:bg-gray-700 rounded-full p-1" aria-label="Insert emoji"><!></button> <div></div></div>');function Wa(e,t){ge(t,!0);let r=H(!1),i;const n=["ðŸ˜‚","â¤ï¸","ðŸ˜","ðŸ¤£","ðŸ˜Š","ðŸ™","ðŸ¥°","ðŸ˜­","ðŸ˜˜","ðŸ‘","ðŸ¤”","ðŸ˜…","ðŸŽ‰","ðŸ‘","ðŸ¥³","ðŸ¤—","ðŸ˜Ž","ðŸ’”","ðŸ’•","ðŸ˜œ"],a=c=>{var d;(d=t.onEmojiSelect)==null||d.call(t,c)},s=c=>{i&&!i.contains(c.target)&&w(r,!1)};_t(()=>(document.addEventListener("click",s),()=>{document.removeEventListener("click",s)}));var l=Va(),o=b(l);o.__click=[qa,r];var u=b(o);Ta(u,{class:"size-5"});var f=E(o,2);vt(f,21,()=>n,ft,(c,d)=>{var v=Ba();v.__click=[$a,a,d];var g=b(v);K(()=>ae(g,_(d))),T(c,v)}),Ze(f,c=>i=c,()=>i),K(()=>X(f,`emoji-dropdown ${(_(r)?"grid":"hidden")??""} select-none absolute bottom-full right-0 mb-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2 grid-cols-5 gap-2`)),T(e,l),he()}Ce(["click"]);var Ha=j("<div> </div>"),Ka=(e,t)=>{var r;return(r=t.onImageClick)==null?void 0:r.call(t,t.message.content.data)},Ya=j('<div><img alt="Sent img" class="w-full h-auto rounded-xl object-cover cursor-pointer hover:opacity-90 transition-opacity" loading="lazy"></div>'),Ga=j('<div><div><!> <div><span class="text-xs text-gray-500 dark:text-gray-400"> </span> <!></div></div></div>');function Ja(e,t){ge(t,!0);var r=Ga(),i=b(r),n=b(i);{var a=d=>{var v=Ha(),g=b(v);K(()=>{X(v,`inline-block rounded-2xl px-4 py-2 ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 text-white rounded-br-none":"bg-blue-500 text-white rounded-br-none")??""} shadow-sm break-words whitespace-pre-wrap overflow-hidden svelte-sjx01p`),ae(g,t.message.content.data)}),T(d,v)},s=d=>{var v=se(),g=G(v);{var p=S=>{var A=Ya(),h=b(A);h.__click=[Ka,t],K(()=>{X(A,`p-1 rounded-xl ${(t.isReceived?"bg-gray-100 dark:bg-gray-700 rounded-bl-none":t.message.status==="failed"?"bg-blue-300 rounded-br-none":"bg-blue-500 rounded-br-none")??""} shadow-sm`),Yt(h,"src",t.message.content.data)}),Xe("load",h,function(...y){var C;(C=t.onImageLoad)==null||C.apply(this,y)}),da(h),T(S,A)};M(g,S=>{t.message.content.type==="Image"&&S(p)},!0)}T(d,v)};M(n,d=>{t.message.content.type==="Text"?d(a):d(s,!1)})}var l=E(n,2),o=b(l),u=b(o),f=E(o,2);{var c=d=>{Na(d,{class:"size-3 text-red-500"})};M(f,d=>{t.message.status==="failed"&&d(c)})}K(()=>{X(r,`flex ${(t.isReceived?"justify-start":"justify-end")??""} animate-fadeIn`),X(i,`flex flex-col ${(t.message.content.type==="Text"?"max-w-[70%]":"w-[60%]")??""} gap-0.5`),X(l,`flex items-center gap-1 px-1 ${(t.isReceived?"justify-start":"justify-end")??""}`),ae(u,t.message.timestamp)}),T(e,r),he()}Ce(["click"]);var Xa=j('<div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10"><div><span> </span> <button class="ml-2 p-1 hover:bg-black/20 rounded-full transition-colors" aria-label="Dismiss"><!></button></div></div>');function Ln(e,t){ge(t,!0);let r=ce(t,"type",3,"error"),i=ce(t,"duration",3,3e3);ce(t,"key",3,0);let n=H(!0),a;Re(()=>(w(n,!0),a&&clearTimeout(a),a=setTimeout(()=>{s()},i()),()=>{a&&clearTimeout(a)}));function s(){var f;w(n,!1),a&&clearTimeout(a),(f=t.onClose)==null||f.call(t)}var l=se(),o=G(l);{var u=f=>{var c=Xa(),d=b(c),v=b(d),g=b(v),p=E(v,2);p.__click=s;var S=b(p);Ar(S,{class:"size-4"}),K(()=>{X(d,`px-4 py-2 rounded-lg shadow-lg ${(r()==="error"?"bg-red-500":"bg-green-500")??""} text-white flex items-center gap-2`),ae(g,t.message)}),T(f,c)};M(o,f=>{_(n)&&f(u)})}T(e,l),he()}Ce(["click"]);function Za(e,t,r){w(t,null),w(r,null)}function Qa(e,t){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),t())}var es=j('<div class="absolute inset-5 backdrop-blur-sm bg-blue-100/70 dark:bg-blue-900/70 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center z-10 pointer-events-none"><p class="text-blue-600 dark:text-blue-400 font-medium">Release here to attach image</p></div>'),ts=j('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),rs=j('<button class="absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"><!></button>'),ns=j('<div class="p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"><div class="relative inline-block"><img alt="Preview"> <!></div></div>'),is=j('<div class="w-full h-[450px] flex flex-col"><div class="p-4 border-b border-gray-100 dark:border-gray-700"><div class="flex items-center justify-between"><h3 class="text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"><!> </h3> <span class="text-sm text-gray-500 dark:text-gray-400"> </span></div></div> <div class="relative flex-1 overflow-hidden"><!> <div class="chat-box absolute inset-0 overflow-y-auto space-y-4 p-4 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700"></div></div> <!> <div class="p-4 border-t border-gray-100 dark:border-gray-700"><div class="flex gap-2"><input type="file" accept="image/*" class="hidden"> <button class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors" title="Attach image"><!></button> <div class="relative flex-1"><input type="text" class="message-input w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200" placeholder="Write a message..."> <!></div> <button class="send-button p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors duration-200 flex items-center justify-center"><!></button></div></div></div> <!>',1);function as(e,t){ge(t,!0);const[r,i]=At(),n=()=>ie(qe,"$clientUsers",r),a=()=>ie(xt,"$messages",r);let s=H(void 0),l=H(""),o,u,f=!0,c=H(!1),d=H(""),v=H(0);const g=Ee(()=>{var I;return((I=n()[t.clientId])==null?void 0:I.users.find(L=>L.id===t.destinationId))??{id:t.destinationId,name:`Client ${t.destinationId}`}}),p=()=>{o&&(o.scrollTop=o.scrollHeight)};function S(){setTimeout(p,60)}Ci(()=>{o&&p()}),Re(()=>{a()[Tt(t.clientId,t.destinationId)]&&f&&setTimeout(p,60)}),Re(()=>{f=!0,t.destinationId,setTimeout(p,0)});const A=()=>{if(!o)return;f=Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=1};let h=H(null),y=H(null),C,x=H(!1);async function m(I){var Q;const L=I.target,W=(Q=L.files)==null?void 0:Q[0];W&&ir(W)&&(w(h,V(await nr(W))),w(y,V(_(h)))),L.value=""}async function R(I){var W;const L=(W=I.clipboardData)==null?void 0:W.items;if(L){for(const Q of L)if(Q.kind==="file"){const pt=Q.getAsFile();if(pt&&ir(pt)){I.preventDefault(),w(h,V(await nr(pt))),w(y,V(_(h)));return}}}}async function N(){if(!(!_(h)&&!_(l).trim()))try{_(h)&&(w(x,!0),await Gr(t.clientId,t.destinationId,_(h),"Image"),w(h,null),w(y,null),w(x,!1)),_(l).trim()&&(await Gr(t.clientId,t.destinationId,_(l),"Text"),w(l,""),_(s)&&(_(s).value="")),f=!0,setTimeout(()=>{p(),setTimeout(p,50)},60)}catch(I){w(x,!1),console.error(I),w(d,"Failed to send message. Please try again."),dr(v),w(c,!0)}}function D(I){var W;const L=((W=_(s))==null?void 0:W.selectionStart)??_(l).length;w(l,_(l).slice(0,L)+I+_(l).slice(L)),setTimeout(()=>{if(_(s)){const Q=L+I.length;_(s).setSelectionRange(Q,Q),_(s).focus()}},0)}let z=H(!1);function q(I){I.preventDefault(),I.stopPropagation(),w(z,!0)}function J(I){const L=o.getBoundingClientRect(),W=I.clientX,Q=I.clientY;(W<=L.left||W>=L.right||Q<=L.top||Q>=L.bottom)&&w(z,!1)}async function Z(I){var W;I.preventDefault(),w(z,!1);const L=(W=I.dataTransfer)==null?void 0:W.files[0];L&&ir(L)&&(w(h,V(await nr(L))),w(y,V(_(h))))}var ue=is(),$=G(ue),B=b($),k=b(B),P=b(k),Y=b(P);On(Y,{class:"size-5 text-gray-600 dark:text-gray-300"});var ye=E(Y),gt=E(P,2),We=b(gt),Oe=E(B,2),me=b(Oe);{var Un=I=>{var L=es();T(I,L)};M(me,I=>{_(z)&&I(Un)})}var He=E(me,2);vt(He,5,()=>a()[Tt(t.clientId,t.destinationId)]||[],ft,(I,L)=>{const W=Ee(()=>_(L).sender_id!==t.clientId);Ja(I,{get message(){return _(L)},get isReceived(){return _(W)},get onImageClick(){return t.onImageClick},onImageLoad:S})}),Ze(He,I=>o=I,()=>o),Ze(Oe,I=>u=I,()=>u);var Dr=E(Oe,2);{var Fn=I=>{var L=ns(),W=b(L),Q=b(W),pt=E(Q,2);{var Kn=Ke=>{var Ye=ts(),Zt=b(Ye);lt(Zt,{class:"size-8 text-blue-500 animate-spin"}),T(Ke,Ye)},Yn=Ke=>{var Ye=rs();Ye.__click=[Za,h,y];var Zt=b(Ye);Ar(Zt,{class:"size-4"}),T(Ke,Ye)};M(pt,Ke=>{_(x)?Ke(Kn):Ke(Yn,!1)})}K(()=>{Yt(Q,"src",_(y)),X(Q,`max-h-48 rounded-lg ${(_(x)?"opacity-50":"")??""}`)}),T(I,L)};M(Dr,I=>{_(y)&&I(Fn)})}var Mn=E(Dr,2),qn=b(Mn),Jt=b(qn);Jt.__change=m,Ze(Jt,I=>C=I,()=>C);var Xt=E(Jt,2);Xt.__click=()=>C.click();var $n=b(Xt);Ia($n,{class:"size-5"});var Or=E(Xt,2),ht=b(Or);ht.__keydown=[Qa,N],Ze(ht,I=>w(s,I),()=>_(s));var Bn=E(ht,2);Wa(Bn,{get inputElement(){return _(s)},onEmojiSelect:D});var jr=E(Or,2);jr.__click=N;var Vn=b(jr);Sa(Vn,{class:"size-5"});var Wn=E($,2);{var Hn=I=>{Ln(I,{get message(){return _(d)},type:"error",onClose:()=>w(c,!1),get key(){return _(v)}})};M(Wn,I=>{_(c)&&I(Hn)})}K(()=>{ae(ye,` ${_(g).name??""}`),ae(We,`ID: ${_(g).id??""}`)}),Xe("scroll",He,A),Xe("dragover",He,q),Xe("dragleave",He,J),Xe("drop",He,Z),Xe("paste",ht,R),Rn(ht,()=>_(l),I=>w(l,I)),T(e,ue),he(),i()}Ce(["click","change","keydown"]);async function zn(e){try{const t=Pe(ot)[e];if(!(await fetch(`/api/registered-users?client_id=${e}&server_id=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to request registered users")}catch(t){console.error("Error requesting registered users:",t)}}var ss=e=>e.stopPropagation(),ls=j('<div><div class="relative w-[80%] h-[80%] flex items-center justify-center"><div class="relative w-full h-full flex items-center justify-center"><img alt="Full size" class="rounded-lg shadow-xl min-w-[300px] min-h-[300px] w-auto h-auto max-w-full max-h-full object-contain"> <div class="absolute -top-4 -right-4 flex gap-2"><button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button> <button class="p-2 bg-white/20 hover:bg-white/30 text-white rounded-full transition-colors shadow-lg backdrop-blur-sm"><!></button></div></div></div></div>');function os(e,t){ge(t,!0);let r=ce(t,"containerClass",3,"");function i(g){g.key==="Escape"&&t.onClose()}function n(){const g=document.createElement("a");g.href=t.src,g.download=`image-${Date.now()}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g)}_t(()=>(document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}));var a=ls();a.__click=function(...g){var p;(p=t.onClose)==null||p.apply(this,g)};var s=b(a);s.__click=[ss];var l=b(s),o=b(l),u=E(o,2),f=b(u);f.__click=n;var c=b(f);wa(c,{class:"size-5"});var d=E(f,2);d.__click=function(...g){var p;(p=t.onClose)==null||p.apply(this,g)};var v=b(d);Ar(v,{class:"size-5"}),K(()=>{X(a,`absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm ${r()??""}`),Yt(o,"src",t.src)}),T(e,a),he()}Ce(["click"]);async function us(e,t){ja(t.clientId,!0),await zn(t.clientId)}var cs=j('<div class="flex justify-center py-4"><div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div></div>'),ds=(e,t,r)=>t(_(r).id),fs=j('<span class="absolute right-2 top-1/2 -translate-y-1/2 min-w-[20px] h-5 flex items-center justify-center bg-blue-500 text-white text-xs rounded-full px-1.5"> </span>'),vs=j("<button><!> <span> </span> <!></button>"),_s=j('<div class="space-y-2"></div>'),gs=j('<div class="relative flex-1"><!> <!></div>'),hs=j('<div class="flex items-center justify-center w-full h-[450px]"><p class="text-gray-500 dark:text-gray-400">Select a user to start chatting</p></div>'),ps=j(`<div class="flex w-full"><div class="w-52 bg-white dark:bg-gray-800 border-r border-gray-300 dark:border-gray-700 overflow-hidden"><div class="p-2 border-b border-gray-300 dark:border-gray-700"><button class="w-full px-3 py-2 flex items-center justify-center gap-2 text-sm
                       bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500
                       rounded-lg transition-colors text-gray-800 dark:text-white"><span>Refresh Users</span> <!></button></div> <div class="px-3 py-2"><!></div></div> <!></div>`);function bs(e,t){ge(t,!0);const[r,i]=At(),n=()=>ie(qe,"$clientUsers",r),a=()=>ie(Gt,"$unreadMessages",r);let s=ce(t,"destinationId",31,()=>-1);_t(()=>{Da(t.clientId),zn(t.clientId)});let l=H(null);Re(()=>{wt.update(m=>({...m,[t.clientId]:s()})),s()!==-1&&Ra(t.clientId,s()),w(l,null)});function o(m){s(m)}var u=ps(),f=b(u),c=b(f),d=b(c);d.__click=[us,t];var v=E(b(d),2);{var g=m=>{lt(m,{class:"size-4 animate-spin"})};M(v,m=>{var R;(R=n()[t.clientId])!=null&&R.isRefreshing&&m(g)})}var p=E(c,2),S=b(p);{var A=m=>{var R=cs();T(m,R)},h=m=>{var R=_s();vt(R,5,()=>{var N;return((N=n()[t.clientId])==null?void 0:N.users)||[]},ft,(N,D)=>{var z=vs();z.__click=[ds,o,D];var q=b(z);const J=Ee(()=>s()===_(D).id?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300");On(q,{get class(){return`size-5 ${_(J)??""}`}});var Z=E(q,2),ue=b(Z),$=E(Z,2);{var B=k=>{var P=fs(),Y=b(P);K(()=>ae(Y,a()[t.clientId][_(D).id])),T(k,P)};M($,k=>{var P;(((P=a()[t.clientId])==null?void 0:P[_(D).id])??0)>0&&k(B)})}K(()=>{X(z,`w-full p-2 rounded cursor-pointer transition-colors flex items-center gap-2 relative
                                   ${(s()===_(D).id?"bg-blue-100 dark:bg-blue-900":"hover:bg-gray-100 dark:hover:bg-gray-700")??""}`),X(Z,s()===_(D).id?"text-blue-600 dark:text-blue-400 font-medium":"text-gray-800 dark:text-gray-100"),ae(ue,_(D).name)}),T(N,z)}),T(m,R)};M(S,m=>{var R;(R=n()[t.clientId])!=null&&R.isLoading?m(A):m(h,!1)})}var y=E(f,2);{var C=m=>{var R=gs(),N=b(R);as(N,{get clientId(){return t.clientId},get destinationId(){return s()},onImageClick:q=>w(l,V(q))});var D=E(N,2);{var z=q=>{os(q,{get src(){return _(l)},onClose:()=>w(l,null)})};M(D,q=>{_(l)&&q(z)})}T(m,R)},x=m=>{var R=hs();T(m,R)};M(y,m=>{s()!==-1?m(C):m(x,!1)})}T(e,u),he(),i()}Ce(["click"]);function ys(e,t,r,i){e.key==="Enter"&&_(t).trim()?(e.preventDefault(),r()):e.key==="Escape"&&(e.preventDefault(),i())}function ms(e,t,r,i){if(_(t).length>0){const n=Math.floor(Math.random()*_(t).length);w(r,V(_(t)[n])),w(i,!0)}}var xs=j('<div class="flex items-center justify-center w-full h-[450px]"><div class="text-center"><!> <p class="text-gray-600 dark:text-gray-300">Registering to server...</p></div></div>'),ws=(e,t,r,i)=>{w(t,V(_(r))),w(i,!0)},ks=j("<button> </button>"),Es=j(`<div class="flex justify-center pt-4"><button class="px-6 py-3 bg-blue-600 dark:bg-blue-700 text-white rounded-lg
                                   transition-all hover:bg-blue-700 dark:hover:bg-blue-600
                                   hover:shadow-md w-full sm:w-auto">Connect to Random Server</button></div>`),Is=j(`<div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full"><h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200"> </h2> <input type="text" placeholder="Enter your username" class="w-full p-3 mb-4 border rounded-lg dark:bg-gray-700 dark:text-gray-200
                               focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <div class="flex justify-end gap-3"><button class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">Cancel</button> <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors
                                   disabled:opacity-50 disabled:cursor-not-allowed">Join Server</button></div></div></div>`),Ss=j(`<div class="flex items-center justify-center flex-col w-full h-[450px] p-6"><div class="w-full max-w-md space-y-6"><div class="flex items-center justify-between"><h2 class="text-xl font-semibold text-gray-700 dark:text-gray-300">Available Servers</h2> <button class="inline-flex items-center justify-center px-3 py-2 rounded-lg
                               bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600
                               transition-colors gap-2 text-gray-700 dark:text-gray-300"><span class="text-sm font-medium">Refresh</span> <!></button></div> <div></div> <!></div></div> <!>`,1),Ts=j('<div class="flex w-full relative"><!></div>');function Cs(e,t){ge(t,!0);const[r,i]=At(),n=()=>ie(it,"$pendingRegistrations",r);let a=H(V([])),s=H(!1),l=H(-1),o=H(""),u=H(!1),f;async function c(){w(u,!0);try{let h=await fetch(`/api/servers?id=${t.clientId}`);w(a,V(await h.json())),console.log("Servers: ",_(a).join(", "))}catch(h){console.error(h),w(a,V([]))}finally{setTimeout(()=>{w(u,!1)},600)}}_t(async()=>{await c()}),Re(()=>{_(s)&&f&&f.focus()});async function d(){try{it.update(y=>(y.add(t.clientId),y)),(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:_(l),username:_(o)})})).ok?(w(s,!1),Ft.update(y=>({...y,[t.clientId]:_(o)})),w(o,"")):(it.update(y=>(y.delete(t.clientId),y)),t.showToast(`Registration failed for Server ${_(l)}. Please try again.`,"error"))}catch(h){console.error(h),t.showToast(`Registration failed for Server ${_(l)}. Please try again.`,"error")}}function v(){w(s,!1),w(o,"")}var g=Ts(),p=b(g);{var S=h=>{var y=xs(),C=b(y),x=b(C);lt(x,{class:"size-8 animate-spin mx-auto mb-4 text-blue-500"}),T(h,y)},A=h=>{var y=Ss(),C=G(y),x=b(C),m=b(x),R=E(b(m),2);R.__click=c;var N=E(b(R),2);const D=Ee(()=>_(u)?"animate-spin":"hidden");lt(N,{get class(){return`size-5 ${_(D)??""}`}});var z=E(m,2);vt(z,21,()=>_(a),ft,($,B)=>{var k=ks();k.__click=[ws,l,B,s];var P=b(k);K(()=>{X(k,`flex items-center justify-center px-6 py-3
                                   bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600
                                   text-gray-800 dark:text-gray-200 rounded-lg transition-all
                                   hover:shadow-md border border-gray-300 dark:border-gray-600
                                   ${(_(a).length===1?"text-lg":"")??""}`),ae(P,`Server ${_(B)??""}`)}),T($,k)});var q=E(z,2);{var J=$=>{var B=Es(),k=b(B);k.__click=[ms,a,l,s],T($,B)};M(q,$=>{_(a).length>1&&$(J)})}var Z=E(C,2);{var ue=$=>{var B=Is(),k=b(B),P=b(k),Y=b(P),ye=E(P,2);ye.__keydown=[ys,o,d,v],Ze(ye,me=>f=me,()=>f);var gt=E(ye,2),We=b(gt);We.__click=v;var Oe=E(We,2);Oe.__click=d,K(()=>{ae(Y,`Connect to Server ${_(l)??""}`),Oe.disabled=!_(o)}),Rn(ye,()=>_(o),me=>w(o,me)),T($,B)};M(Z,$=>{_(s)&&$(ue)})}K(()=>{R.disabled=_(u),X(z,`grid gap-3 ${(_(a).length===1?"":"sm:grid-cols-2")??""}`)}),T(h,y)};M(p,h=>{n().has(t.clientId)?h(S):h(A,!1)})}T(e,g),he(),i()}Ce(["click","keydown"]);var Ns=j('<button class="px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded transition-colors duration-200 flex items-center gap-1 disabled:opacity-75"><!> Disconnect</button> <span class="text-xs text-gray-500 dark:text-gray-400 bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded-full"> </span>',1),Ps=j('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-200 relative"><div class="p-4 border-b border-gray-300 dark:border-gray-700"><div class="flex justify-between items-center"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100"> </h2></div> <div class="flex items-center gap-2"><!> <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full"> </span></div></div></div> <!> <!></div>');function As(e,t){ge(t,!0);const[r,i]=At(),n=()=>ie(wt,"$currentChats",r),a=()=>ie(tt,"$userEvents",r),s=()=>ie(Qe,"$isDisconnecting",r),l=()=>ie(ot,"$registrationStatus",r),o=()=>ie(Rr,"$connectionStatus",r),u=()=>ie(Ft,"$clientUsernames",r);let f=Ee(()=>n()[t.clientId]??-1),c=H(null);Re(()=>{const k=a()[t.clientId];k&&(w(c,V({message:k.message,type:k.type,key:Date.now()})),za(t.clientId))});function d(k,P){w(c,V({message:k,type:P,key:Date.now()}))}async function v(){if(!s()[t.clientId]){Qe.update(k=>({...k,[t.clientId]:!0}));try{if(et.update(P=>(P.add(t.clientId),P)),!(await fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t.clientId,server_id:l()[t.clientId]})})).ok){Qe.update(P=>({...P,[t.clientId]:!1})),et.update(P=>(P.delete(t.clientId),P));return}}catch(k){console.error("Error unregistering:",k),Qe.update(P=>({...P,[t.clientId]:!1}))}}}var g=Ps(),p=b(g),S=b(p),A=b(S),h=b(A),y=b(h),C=E(y,2),x=E(h,2),m=b(x),R=E(A,2),N=b(R);{var D=k=>{var P=Ns(),Y=G(P);Y.__click=v;var ye=b(Y);{var gt=me=>{lt(me,{class:"size-3 animate-spin"})};M(ye,me=>{s()[t.clientId]&&me(gt)})}var We=E(Y,2),Oe=b(We);K(()=>{Y.disabled=s()[t.clientId],ae(Oe,`Server ${l()[t.clientId]??""}`)}),T(k,P)};M(N,k=>{l()[t.clientId]&&k(D)})}var z=E(N,2),q=b(z),J=E(p,2);{var Z=k=>{bs(k,{get clientId(){return t.clientId},get destinationId(){return _(f)}})},ue=k=>{Cs(k,{get clientId(){return t.clientId},showToast:d})};M(J,k=>{l()[t.clientId]?k(Z):k(ue,!1)})}var $=E(J,2);{var B=k=>{Ln(k,{get message(){return _(c).message},get type(){return _(c).type},onClose:()=>w(c,null),get key(){return _(c).key}})};M($,k=>{_(c)&&k(B)})}K(()=>{X(y,`status-indicator w-3 h-3 ${(o()?"bg-green-500":"bg-red-500")??""} rounded-full`),X(C,`status-ping w-3 h-3 ${(o()?"bg-green-500 animate-ping":"bg-red-500")??""} rounded-full absolute inset-0`),ae(m,u()[t.clientId]||`Chat ${t.clientId}`),ae(q,`ID: ${t.clientId??""}`)}),T(e,g),he(),i()}Ce(["click"]);function Rs(){const e=localStorage.getItem("theme");e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}async function Ds(){Rs();try{const t=await(await fetch("/api/clients")).json();t.sort(),t.forEach(r=>{gr.set(new Set([...Pe(gr),r]))})}catch(e){console.error("Error loading active_clients:",e)}jn()}var Os=j('<button class="ml-2 px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors duration-200">Reconnect</button>'),js=()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")},Ls=j('<div class="fixed inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-50 transition-opacity duration-500"><div class="text-center flex flex-col gap-4 items-center justify-center"><!> <p class="text-gray-600 dark:text-gray-300">Loading chats...</p></div></div>'),zs=j('<div class="container mx-auto p-4 lg:p-6"><div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6"><div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="flex items-center gap-3"><div class="bg-blue-500 p-2 rounded-lg"><!></div> <div><h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">Clients - AP 24/25</h1> <p class="text-sm text-gray-500 dark:text-gray-400">Clients UI for Advanced Programming Project</p></div></div> <div class="flex items-center gap-6"><div class="flex items-center gap-2"><div class="relative"><div></div> <div></div></div> <span class="text-sm text-gray-600 dark:text-gray-300"> </span> <!></div> <div class="h-8 w-px bg-gray-200 dark:bg-gray-700"></div> <div class="flex items-center gap-3"><!> <button id="theme-toggle" aria-label="Change theme" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"><span class="inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-200 translate-x-[2px] dark:translate-x-5"></span></button> <!></div></div></div></div> <div id="chat-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"></div></div> <!>',1);function Us(e,t){ge(t,!0);const[r,i]=At(),n=()=>ie(gr,"$displayedChats",r),a=()=>ie(ot,"$registrationStatus",r),s=()=>ie(Rr,"$connectionStatus",r);let l=H(!0);_t(async()=>{await Ds(),setTimeout(()=>{w(l,!1)},800),window.addEventListener("beforeunload",o)}),pa(()=>{window.removeEventListener("beforeunload",o),u()});function o(k){u()}function u(){console.error("Unregistering clients..."),n().forEach(k=>{fetch("/api/unregister",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:k,server_id:a()[k]})})}),console.warn("Clients unregistered.")}var f=zs(),c=G(f),d=b(c),v=b(d),g=b(v),p=b(g),S=b(p);ka(S,{class:"size-5 text-white"});var A=E(g,2),h=b(A),y=b(h),C=b(y),x=E(C,2),m=E(y,2),R=b(m),N=E(m,2);{var D=k=>{var P=Os();P.__click=function(...Y){tr==null||tr.apply(this,Y)},T(k,P)};M(N,k=>{s()||k(D)})}var z=E(h,4),q=b(z);Ca(q,{class:"size-5 dark:text-gray-200"});var J=E(q,2);J.__click=[js];var Z=E(J,2);Ea(Z,{class:"size-5 dark:text-gray-200"});var ue=E(d,2);vt(ue,5,n,ft,(k,P)=>{As(k,{get clientId(){return _(P)}})});var $=E(c,2);{var B=k=>{var P=Ls(),Y=b(P),ye=b(Y);lt(ye,{class:"w-16 h-16 text-blue-500 animate-spin mb-4"}),T(k,P)};M($,k=>{_(l)&&k(B)})}K(()=>{X(C,`w-3 h-3 rounded-full transition-colors duration-200 ${(s()?"bg-green-500":"bg-red-500")??""}`),X(x,`w-3 h-3 absolute inset-0 rounded-full transition-colors duration-200 ${(s()?"bg-green-500 animate-ping":"bg-red-500")??""}`),ae(R,s()?"Online":"Offline")}),T(e,f),he(),i()}Ce(["click"]);ea(Us,{target:document.getElementById("app")});
